#set ($orgsLocatorId = "orgs-location-" + $formatter.randomGuid)

<div class="orgs-locator-component" id="${orgsLocatorId}" data-lat="$!page.organisation.lat" data-lng="$!page.organisation.lng"></div>
#set ($orgTypesSettings = [])
#if ($orgTypes && $orgTypes != "")
#set ($orgTypesSettings = $orgTypes.split(","))
#end
<script type="text/javascript">
    window['${orgsLocatorId}-orgTypes'] = [];
    window['${orgsLocatorId}-orgTypes-preset'] = [];
    #foreach($orgType in $rootFolder.find("/").orgTypes)
        window['${orgsLocatorId}-orgTypes'].push({
            title: "$orgType.displayName",
            value: '$orgType.name'
        });
    #end
    #foreach($orgType in $rootFolder.find("/").orgTypes)
        #if ($orgTypesSettings.size() > 0)
            #if ($orgTypesSettings.contains($orgType.name))
                window['${orgsLocatorId}-orgTypes-preset'].push({
                    title: "$orgType.displayName",
                    value: '$orgType.name'
                });
            #end
        #end
    #end

    window['${orgsLocatorId}-allowedCountries'] = [];
    #foreach($cc in $formatter.countryCodes.list)
        window['${orgsLocatorId}-allowedCountries'].push({
            value: '$cc.alpha2Code',
            title: "$cc.englishShortName"
        });
    #end
</script>