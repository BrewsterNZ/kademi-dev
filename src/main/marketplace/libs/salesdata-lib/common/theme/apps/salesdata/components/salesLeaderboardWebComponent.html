#script
<script>
    templatingContext.put("String", String.class);
</script>
#end

<table class="table table-striped">
    #if (!$rowHeight)
    #set ($rowHeight = 25)
    #end

    #if (!$numUsers)
    #set ($numUsers = 5)
    #else
    #set ($numUsers = $formatter.toInteger($numUsers))
    #end

    #if ($formatter.isNull($showPoints))
        #set ($showPoints = "true")
    #end

    #if ($series && $series != "")
    #set ($dataSeriesObj = $applications.salesData.getSalesDataSeries($series))
    #set( $crit = $services.criteriaBuilders.salesDataRecord.eq("series", $dataSeriesObj) )
    #set( $crit = $crit.sum("amount"))
    #set( $crit = $crit.groupBy("salesBy"))
    #if ($useDateRange == "true")
    #set( $crit = $crit.ge("periodFrom", $services.queryManager.commonStartDate) )
    #set( $crit = $crit.lt("periodFrom", $services.queryManager.commonFinishDate) )
    #end
    #set( $results = $crit.execute(10) )
    #docs($results[0])
    #end
    <thead>
        <tr>
            <th class="trans-lookup" data-transcode="rank">Rank</th>
            <th class="trans-lookup" data-transcode="participant">Participant</th>
            #if ($showPoints == "true")
            <th class="trans-lookup" data-transcode="points">Points</th>
            #end
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

#macro (renderLeaderRow $rank $participantName $points $highlightRow)
    <tr>
        <td>
            #if( $highlightRow )
            <b>$rank</b>
            #else
            $rank
            #end
        </td>
        <td>
            #if( $highlightRow )
            <b>$participantName</b>
            #else
            #if( $formatter.toBool($hideNames) )
            $hiddenText
            #else
            $participantName
            #end
            #end
        </td>
        #if ($showPoints == "true")
        <td>
            $!points pts
        </td>
        #end
    </tr>
#end

