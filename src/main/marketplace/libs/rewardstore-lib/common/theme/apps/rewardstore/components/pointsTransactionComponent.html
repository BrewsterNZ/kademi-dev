#if ($startDate && $startDate != "")
#set ($since = $formatter.toDate($startDate))
#else
#set($since = $formatter.addDays( $formatter.now, -7 ) )
#end

#if ($endDate && $endDate != "")
#set ($to = $formatter.toDate($endDate))
#else
#set ($to = $formatter.now)
#end


#set ($trans = $applications.rewardStore.transactions($userResource, $pointsBucket, $since, $to))


<table class="table table-striped">
    <thead>
    <tr>
        <th>Amount</th>
        <th>Date</th>
        <th>Reason</th>
        #if (!$txType || $txType == "")
            <th>Type</th>
        #end
    </tr>
    </thead>
    <tbody>
    #if (!$trans || $trans.size() < 1)
    <tr>
        <td colspan="99">There are no points transaction yet</td>
    </tr>
    #else
    #foreach( $t in $trans )
        #if ($txType && $txType != "")
            #if ($txType == $t.txType)
                #render($t, $txType)
            #end
        #else
            #render($t, $txType)
        #end
    #end
    #end
    </tbody>
</table>

#macro (render $t, $txType)
<tr>
    <td>$!t.numPoints Pts</td>
    <td>$!formatter.formatDate($t.date)</td>
    <td>$!t.description</td>
    #if (!$txType || $txType == "")
        <td>$t.txType</td>
    #end
</tr>
#end