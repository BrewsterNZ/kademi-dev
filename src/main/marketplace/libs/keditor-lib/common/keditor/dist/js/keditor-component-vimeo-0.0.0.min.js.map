{"version":3,"sources":["keditor-component-vimeo-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","getContent","component","componentContent","children","find","remove","html","settingEnabled","settingTitle","initSettingForm","form","ajax","url","type","dataType","success","resp","btnEdit","on","e","preventDefault","inputData","prompt","vimeoRegex","match","getSettingComponent","attr","alert","btn169","removeClass","addClass","btn43","chkAutoplay","embedItem","currentUrl","newUrl","replace","is","showSettingForm","src","prop","indexOf","jQuery"],"mappings":"CAAA,SAAWA,GACP,GAAIC,GAAUD,EAAEE,QACZC,EAAOF,EAAQG,GAEnBH,GAAQI,WAAkB,OACtBC,WAAY,SAAUC,EAAWL,GAC7BC,EAAK,+BAAgCI,EAErC,IAAIC,GAAmBD,EAAUE,SAAS,6BAG1C,OAFAD,GAAiBE,KAAK,gBAAgBC,SAE/BH,EAAiBI,QAG5BC,gBAAgB,EAEhBC,aAAc,iBAEdC,gBAAiB,SAAUC,EAAMd,GAG7B,MAFAC,GAAK,wBAAyBa,GAEvBhB,EAAEiB,MACLC,IAAK,uCACLC,KAAM,MACNC,SAAU,OACVC,QAAS,SAAUC,GACfN,EAAKJ,KAAKU,EAEV,IAAIC,GAAUP,EAAKN,KAAK,kBACxBa,GAAQC,GAAG,QAAS,SAAUC,GAC1BA,EAAEC,gBAEF,IAAIC,GAAYC,OAAO,mCACnBC,EAAa,8IACbC,EAAQH,EAAUG,MAAMD,EACxBC,IAASA,EAAM,GACf5B,EAAQ6B,sBAAsBrB,KAAK,0BAA0BsB,KAAK,MAAO,kCAAoCF,EAAM,GAAK,gCAExHG,MAAM,+BAId,IAAIC,GAASlB,EAAKN,KAAK,iBACvBwB,GAAOV,GAAG,QAAS,SAAUC,GACzBA,EAAEC,iBAEFxB,EAAQ6B,sBAAsBrB,KAAK,qBAAqByB,YAAY,yBAAyBC,SAAS,2BAG1G,IAAIC,GAAQrB,EAAKN,KAAK,gBACtB2B,GAAMb,GAAG,QAAS,SAAUC,GACxBA,EAAEC,iBAEFxB,EAAQ6B,sBAAsBrB,KAAK,qBAAqByB,YAAY,0BAA0BC,SAAS,0BAG3G,IAAIE,GAActB,EAAKN,KAAK,kBAC5B4B,GAAYd,GAAG,QAAS,WACpB,GAAIe,GAAYrC,EAAQ6B,sBAAsBrB,KAAK,0BAC/C8B,EAAaD,EAAUP,KAAK,OAC5BS,EAAUD,EAAWE,QAAQ,UAAW,IAAO,0CAA4CJ,EAAYK,GAAG,YAAc,EAAI,EAEhIxC,GAAK,gBAAkBqC,EAAY,YAAcC,GACjDF,EAAUP,KAAK,MAAOS,SAMtCG,gBAAiB,SAAU5B,EAAMT,EAAWL,GACxCC,EAAK,oCAAqCI,EAE1C,IAAIgC,GAAYhC,EAAUG,KAAK,0BAC3B4B,EAActB,EAAKN,KAAK,mBACxBmC,EAAMN,EAAUP,KAAK,MAEzBM,GAAYQ,KAAK,UAAWD,EAAIE,QAAQ,uBAIjDC","file":"keditor-component-vimeo-0.0.0.min.js","sourcesContent":["(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['vimeo'] = {\n        getContent: function (component, keditor) {\n            flog('getContent \"vimeo\" component', component);\n            \n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.vimeo-cover').remove();\n            \n            return componentContent.html();\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Vimeo Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"vimeo\" settings', form);\n            \n            return $.ajax({\n                url: '/keditor/componentVimeoSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var btnEdit = form.find('.btn-vimeo-edit');\n                    btnEdit.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        var inputData = prompt('Please enter Vimeo URL in here:');\n                        var vimeoRegex = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n                        var match = inputData.match(vimeoRegex);\n                        if (match && match[1]) {\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://player.vimeo.com/video/' + match[1] + '?byline=0&portrait=0&badge=0');\n                        } else {\n                            alert('Your Vimeo URL is invalid!');\n                        }\n                    });\n                    \n                    var btn169 = form.find('.btn-vimeo-169');\n                    btn169.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\n                    });\n                    \n                    var btn43 = form.find('.btn-vimeo-43');\n                    btn43.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\n                    });\n                    \n                    var chkAutoplay = form.find('#vimeo-autoplay');\n                    chkAutoplay.on('click', function () {\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\n                        var currentUrl = embedItem.attr('src');\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?byline=0&portrait=0&badge=0&autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\n                        \n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\n                        embedItem.attr('src', newUrl);\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"vimeo\" component', component);\n            \n            var embedItem = component.find('.embed-responsive-item');\n            var chkAutoplay = form.find('#vimeo-autoplay');\n            var src = embedItem.attr('src');\n            \n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\n        }\n    };\n    \n})(jQuery);\n"]}