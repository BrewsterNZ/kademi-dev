/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var n=t.keditor,e=n.log;n.components.form={initFormBuilder:function(n){var e=this;t.getScriptOnce("/static/formBuilder/2.5.3/form-builder.min.js",function(){t.getScriptOnce("/static/formBuilder/2.5.3/form-render.min.js",function(){var t=n.find(".form-builder-area"),o=n.find(".form-data"),i=n.find(".form-content");n.find(".keditor-component-content").prepend('<p class="form-builder-tools" style="text-align: right;">    <a href="#" class="btn btn-primary btn-preview-form">Preview form</a>     <a href="#" class="btn btn-info btn-edit-form disabled">Edit form</a></p>');var r=n.find(".btn-edit-form"),a=n.find(".btn-preview-form");t.formBuilder({disableInjectedStyle:!0,showActionButtons:!1,dataType:"json",formData:o.html(),disableFields:["autocomplete","paragraph","header"],disabledAttrs:["access"],typeUserDisabledAttrs:{"checkbox-group":["toggle","inline"]}}),r.on("click",function(n){n.preventDefault(),r.hasClass("disabled")||(t.show(),i.hide(),r.addClass("disabled"),a.removeClass("disabled"))}),a.on("click",function(o){o.preventDefault(),a.hasClass("disabled")||(e.renderForm(n),t.hide(),i.show(),r.removeClass("disabled"),a.addClass("disabled"))})})})},renderForm:function(n,e){var o=n.find(".form-content");if(!e){var i=n.find(".form-builder-area");e=i.data("formBuilder")}o.formRender({dataType:"json",formData:e.actions.getData("json")}),o.hasClass("form-horizontal")&&o.children("div").each(function(){var n=t(this),e=o.attr("data-grid")||"4-8";if(e=e.split("-"),n.attr("class"))if(n.hasClass("fb-button"))n.find("button").wrap('<div class="col-sm-'+e[1]+" col-sm-offset-"+e[0]+'"></div>');else{var i=n.children("label"),r=n.children("input, select, textarea"),a=n.children("div");i.addClass("control-label col-sm-"+e[0]),a.length>0?a.addClass("col-sm-"+e[1]):r.addClass("form-control").wrap('<div class="col-sm-'+e[1]+'"></div>')}})},init:function(n,o,i,r){e('init "form" component',i);var a=i.find(".keditor-component-content"),d=i.find(".form-builder-area"),s=i.find(".form-content"),l=i.find(".form-data");0===l.length&&a.append('<div class="form-data" style="display: none !important;"></div>'),0===s.length?a.append('<form class="form-content" style="display: none !important;"></form>'):s.hide(),0===d.length&&(d=t('<div class="form-builder-area clearfix"></div>'),a.append(d)),this.initFormBuilder(i)},getContent:function(n,o){e('getContent "form" component',n);var i=this,r=n.find(".keditor-component-content"),a=n.find(".form-data"),d=t("#"+n.attr("id")).find(".form-builder-area"),s=d.data("formBuilder");return i.renderForm(n,s),a.html(s.actions.getData("json")),n.find(".form-builder-area, .form-builder-tools").remove(),n.find(".form-content").show(),r.html()},settingEnabled:!0,settingTitle:"Form Settings",initSettingForm:function(n,o){e('initSettingForm "form" component');var i=this;return t.ajax({url:"/keditor/componentFormSettings.html",type:"get",dataType:"HTML",success:function(t){n.html(t),n.find(".txt-form-action").on("change",function(){var t=o.getSettingComponent(),n=t.find(".form-content");n.attr("action",this.value)}),n.find(".select-method").on("change",function(){var t=o.getSettingComponent(),n=t.find(".form-content");n.attr("action",this.value)}),n.find(".select-enctype").on("change",function(){var t=o.getSettingComponent(),n=t.find(".form-content");n.attr("enctype",this.value)}),n.find(".select-layout").on("change",function(){var t=o.getSettingComponent(),e=t.find(".form-content");e.removeClass("form-inline form-horizontal"),this.value&&e.addClass(this.value),i.renderForm(t),n.find(".select-grid-wrapper").css("display","form-horizontal"===this.value?"block":"none")}),n.find(".select-grid").on("change",function(){var t=o.getSettingComponent(),n=t.find(".form-content");n.attr("data-grid",this.value),i.renderForm(t)})}})},showSettingForm:function(t,n,o){e('showSettingForm "form" component',n);var i=n.find(".form-content"),r="";i.hasClass("form-inline")?r="form-inline":i.hasClass("form-horizontal")&&(r="form-horizontal"),t.find(".txt-form-action").val(i.attr("action")||""),t.find(".select-method").val(i.attr("method")||"get"),t.find(".select-enctype").val(i.attr("enctype")),t.find(".select-layout").val(r),t.find(".select-grid-wrapper").css("display","form-horizontal"===r?"block":"none"),t.find(".select-grid").val(i.attr("data-grid")||"4-8")}}}(jQuery);
//# sourceMappingURL=keditor-component-form-0.0.0.min.js.map
