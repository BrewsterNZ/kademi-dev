{"version":3,"sources":["keditor-edm-components-0.0.0.js"],"names":["$","KEditor","keditor","edmEditor","flog","log","components","settingEnabled","settingTitle","initSettingForm","form","ajax","url","type","dataType","success","resp","html","find","initDefaultComponentControls","buttonColorPicker","initSimpleColorPicker","color","buttonWrapper","getSettingComponent","attr","setStyles","txtBorderRadius","on","this","value","each","input","dataCss","initPaddingControl","txtText","text","trim","txtLink","href","mselect","mselectAll","pagePath","options","basePath","onSelectFile","relativeUrl","fileType","hash","val","window","location","host","trigger","buttonTextColorPicker","button","txtFontSize","cbbFontFamily","btn","name","e","preventDefault","hasClass","removeClass","addClass","get","style","btnsAlign","table","removeAttr","showSettingForm","component","showDefaultComponentControls","buttonInner","css","borderRadius","replace","propName","fontSize","toLowerCase","btnBold","fontWeight","btnItalic","align","filter","jQuery","lineHeight","lineWidth","prop","lineColorPicker","wrapper","div","height","width","init","contentArea","container","self","img","adjustWidthForImg","onComponentReady","call","onPaddingChanged","link","pattern","RegExp","span","next","formGroup","closest","test","hide","show","cbbTarget","chkLinkable","is","wrap","unwrap","photoEdit","contentTypes","bs3Modal","inputAlt","chkFullWidth","checked","cbbAlign","td","a","parent","length","isFullWidth","load","realWidth","realHeight","ratio","wrapperWidth","onWithChanged","append","hidePadding","spacerHeight","CKEDITOR","disableAutoInline","isEDM","componentContent","children","textWrapper","textHtml","editorDiv","generateId","editor","ckeditor","ckeditorOptions","onComponentChanged","onContainerChanged","onContentChanged","getContent","id","instances","getData","destroy"],"mappings":"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","file":"keditor-edm-components-0.0.0.min.js","sourcesContent":["(function ($) {\r\n    var KEditor = $.keditor;\r\n    var edmEditor = $.edmEditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['button'] = {\r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Button Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"button\" settings', form);\r\n    \r\n            return $.ajax({\r\n                url: '/keditor/edmComponentButtonSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n    \r\n                    form = form.find('.form-horizontal');\r\n                    edmEditor.initDefaultComponentControls(form, keditor);\r\n    \r\n                    var buttonColorPicker = form.find('.button-color-picker');\r\n                    edmEditor.initSimpleColorPicker(buttonColorPicker, function (color) {\r\n                        var buttonWrapper = keditor.getSettingComponent().find('.button-wrapper');\r\n                        buttonWrapper.attr('bgcolor', color);\r\n                        edmEditor.setStyles('background-color', color, buttonWrapper);\r\n                    });\r\n    \r\n                    var txtBorderRadius = form.find('#button-border-radius');\r\n                    txtBorderRadius.on('change', function () {\r\n                        edmEditor.setStyles('border-radius', this.value + 'px', keditor.getSettingComponent().find('.button-wrapper'));\r\n                    });\r\n    \r\n                    form.find('.button-inner-padding').each(function () {\r\n                        var input = $(this);\r\n                        var dataCss = input.attr('data-css');\r\n        \r\n                        edmEditor.initPaddingControl(input, function (value) {\r\n                            edmEditor.setStyles(dataCss, value + 'px', keditor.getSettingComponent().find('.button-inner'));\r\n                        });\r\n                    });\r\n    \r\n                    var txtText = form.find('#button-text');\r\n                    txtText.on('change', function () {\r\n                        var text = this.value || '';\r\n                        text = text.trim();\r\n        \r\n                        keditor.getSettingComponent().find('.button-wrapper a').text(text);\r\n                    });\r\n    \r\n                    var txtLink = form.find('#button-link');\r\n                    txtLink.on('change', function () {\r\n                        var href = this.value || '';\r\n                        href = href.trim();\r\n        \r\n                        keditor.getSettingComponent().find('.button-wrapper a').attr(\"href\", href);\r\n                    });\r\n                    \r\n                    form.find('.btn-browse-file').mselect({\r\n                        mselectAll: true,\r\n                        pagePath: keditor.options.pagePath,\r\n                        basePath: keditor.options.basePath,\r\n                        onSelectFile: function (url, relativeUrl, fileType, hash) {\r\n                            txtLink.val('http://' + window.location.host + '/_hashes/files/' + hash).trigger('change');\r\n                        }\r\n                    });\r\n    \r\n                    var buttonTextColorPicker = form.find('.button-color-text-picker');\r\n                    edmEditor.initSimpleColorPicker(buttonTextColorPicker, function (color) {\r\n                        var button = keditor.getSettingComponent().find('.button-wrapper a');\r\n                        edmEditor.setStyles('color', color, button);\r\n                    });\r\n    \r\n                    var txtFontSize = form.find('#button-font-size');\r\n                    txtFontSize.on('change', function () {\r\n                        edmEditor.setStyles('font-size', (this.value > 0 ? this.value : 0) + 'px', keditor.getSettingComponent().find('.button-wrapper .button-inner'));\r\n                    });\r\n    \r\n                    var cbbFontFamily = form.find('#button-font-family');\r\n                    cbbFontFamily.on('change', function () {\r\n                        edmEditor.setStyles('font-family', this.value, keditor.getSettingComponent().find('.button-wrapper .button-inner'));\r\n                    });\r\n    \r\n                    form.find('.btn-style').each(function () {\r\n                        var btn = $(this);\r\n                        var name = btn.attr('data-prop');\r\n        \r\n                        btn.on('click', function (e) {\r\n                            e.preventDefault();\r\n            \r\n                            var value = btn.attr('data-value');\r\n                            if (btn.hasClass('active')) {\r\n                                btn.removeClass('active');\r\n                                value = '';\r\n                            } else {\r\n                                btn.addClass('active');\r\n                            }\r\n            \r\n                            keditor.getSettingComponent().find('.button-wrapper a').get(0).style[name] = value;\r\n                        });\r\n                    });\r\n    \r\n                    var btnsAlign = form.find('.btn-align');\r\n                    btnsAlign.each(function () {\r\n                        var btn = $(this);\r\n                        var value = btn.attr('data-value');\r\n        \r\n                        btn.on('click', function (e) {\r\n                            e.preventDefault();\r\n            \r\n                            if (!btn.hasClass('active')) {\r\n                                var table = keditor.getSettingComponent().find('.button-wrapper');\r\n                \r\n                                btnsAlign.removeClass('active');\r\n                                btn.addClass('active');\r\n                \r\n                                if (value === 'full') {\r\n                                    table.attr('width', '100%').attr('align', 'center');\r\n                                } else {\r\n                                    table.removeAttr('width').attr('align', value);\r\n                                }\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"button\" component', component);\r\n            \r\n            edmEditor.showDefaultComponentControls(form, component, keditor);\r\n            \r\n            var buttonWrapper = component.find('.button-wrapper');\r\n            var buttonInner = buttonWrapper.find('.button-inner');\r\n            var button = buttonInner.find('a');\r\n            \r\n            var buttonColorPicker = form.find('.button-color-picker');\r\n            buttonColorPicker.val(buttonWrapper.css('background-color') || '').trigger('update');\r\n            \r\n            var txtBorderRadius = form.find('#button-border-radius');\r\n            var borderRadius = buttonWrapper.css('border-radius');\r\n            txtBorderRadius.val(borderRadius ? borderRadius.replace('px', '') : '');\r\n            \r\n            form.find('.button-inner-padding').each(function () {\r\n                var input = $(this);\r\n                var propName = input.attr('data-css');\r\n                var value = buttonInner.css(propName);\r\n                \r\n                input.val(value ? value.replace('px', '') : '0');\r\n            });\r\n            \r\n            var txtText = form.find('#button-text');\r\n            txtText.val(button.text());\r\n            \r\n            var txtLink = form.find('#button-link');\r\n            txtLink.val(button.attr(\"href\"));\r\n            \r\n            var buttonTextColorPicker = form.find('.button-color-text-picker');\r\n            buttonTextColorPicker.val(button.css('color') || '').trigger('update');\r\n            \r\n            var txtFontSize = form.find('#button-font-size');\r\n            var fontSize = buttonInner.css('font-size');\r\n            txtFontSize.val(fontSize ? fontSize.replace('px', '') : '');\r\n            \r\n            var cbbFontFamily = form.find('#button-font-family');\r\n            cbbFontFamily.val(buttonInner.css('font-family').toLowerCase().replace(/,\\s/g, ',').replace(/\"/g, ''));\r\n            \r\n            var btnBold = form.find('.btn-bold');\r\n            var fontWeight = button.css('font-weight');\r\n            btnBold[fontWeight === '700' || fontWeight === 'bold' ? 'addClass' : 'removeClass']('active');\r\n            \r\n            var btnItalic = form.find('.btn-italic');\r\n            btnItalic[button.css('font-style') === 'italic' ? 'addClass' : 'removeClass']('active');\r\n            \r\n            var align = buttonWrapper.attr('align');\r\n            if (buttonWrapper.attr('width') === '100%') {\r\n                align = 'full';\r\n            }\r\n            form.find('.btn-align').removeClass('active').filter('[data-value=' + align + ']').addClass('active');\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var edmEditor = $.edmEditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['line'] = {\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Line Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"line\" settings', form);\r\n    \r\n            return $.ajax({\r\n                url: '/keditor/edmComponentLineSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n    \r\n                    form = form.find('.form-horizontal');\r\n                    edmEditor.initDefaultComponentControls(form, keditor);\r\n    \r\n                    var lineHeight = form.find('#line-height');\r\n                    lineHeight.on('change', function () {\r\n                        keditor.getSettingComponent().find('.wrapper div').css('height', this.value);\r\n                    });\r\n    \r\n                    var lineWidth = form.find('#line-width');\r\n                    lineWidth.on('change', function () {\r\n                        keditor.getSettingComponent().find('.wrapper table').attr('width', this.value);\r\n                    });\r\n                    \r\n                    form.find('[name=width]').on('click', function () {\r\n                        lineWidth.prop('disabled', this.value);\r\n                        \r\n                        if (this.value) {\r\n                            keditor.getSettingComponent().find('.wrapper table').attr('width', '100%');\r\n                        }\r\n                    });\r\n    \r\n                    var lineColorPicker = form.find('.line-color-picker');\r\n                    edmEditor.initSimpleColorPicker(lineColorPicker, function (color) {\r\n                        var wrapper = keditor.getSettingComponent().find('.wrapper');\r\n                        var div = wrapper.find('div');\r\n        \r\n                        edmEditor.setStyles('background-color', color, div);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"line\" component', component);\r\n\r\n            var lineHeight = form.find('#line-height');\r\n            var height = component.find('.wrapper div').css('height');\r\n            lineHeight.val(height ? height.replace('px', '') : '0');\r\n\r\n            var lineWidth = form.find('#line-width');\r\n            var width = component.find('.wrapper table').attr('width');\r\n            form.find('[name=width]')[width === '100%' ? 'filter' : 'not']('[value=\"line-full-width\"]').trigger('click');\r\n            lineWidth.val(width === '100%' ? '' : width ? width.replace('px', '') : '0');\r\n            \r\n            edmEditor.showDefaultComponentControls(form, component, keditor);\r\n\r\n            var wrapper = component.find('.wrapper');\r\n            var div = wrapper.find('div');\r\n            var lineColorPicker = form.find('.line-color-picker');\r\n            lineColorPicker.val(div.css('background-color') || '').trigger('update');\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var edmEditor = $.edmEditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['photo'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"photo\" component', component);\r\n            \r\n            var self = this;\r\n            var img = component.find('img');\r\n            self.adjustWidthForImg(img, img.hasClass('full-width'));\r\n            \r\n            var options = keditor.options;\r\n            if (typeof options.onComponentReady === 'function') {\r\n                options.onComponentReady.call(contentArea, component);\r\n            }\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Photo Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"photo\" settings', form);\r\n            \r\n            var self = this;\r\n            return $.ajax({\r\n                url: '/keditor/edmComponentPhotoSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    form = form.find('.form-horizontal');\r\n                    edmEditor.initDefaultComponentControls(form, keditor, {\r\n                        onPaddingChanged: function (dataCss, value) {\r\n                            if (dataCss === 'padding-left' || dataCss === 'padding-right') {\r\n                                var img = keditor.getSettingComponent().find('img');\r\n                                self.adjustWidthForImg(img, img.hasClass('full-width'));\r\n                            }\r\n                        }\r\n                    });\r\n                    \r\n                    var txtLink = form.find('#photo-link');\r\n                    txtLink.on('change', function () {\r\n                        var link = this.value.trim();\r\n                        var pattern = new RegExp('^[a-zA-Z0-9_/%:/./-]+$');\r\n                        var span = txtLink.next();\r\n                        var formGroup = txtLink.closest('.form-group');\r\n                        \r\n                        if (pattern.test(link)) {\r\n                            keditor.getSettingComponent().find('a').attr('href', link);\r\n                            span.hide();\r\n                            formGroup.removeClass('has-error');\r\n                        } else {\r\n                            span.show();\r\n                            formGroup.addClass('has-error');\r\n                        }\r\n                    });\r\n                    \r\n                    var cbbTarget = form.find('#photo-target');\r\n                    cbbTarget.on('change', function () {\r\n                        keditor.getSettingComponent().find('a').attr('target', this.value);\r\n                    });\r\n                    \r\n                    var chkLinkable = form.find('#photo-linkable');\r\n                    chkLinkable.on('click', function () {\r\n                        var img = keditor.getSettingComponent().find('img');\r\n                        \r\n                        if (chkLinkable.is(':checked')) {\r\n                            txtLink.prop('disabled', false);\r\n                            cbbTarget.prop('disabled', false);\r\n                            img.wrap('<a href=\"\" style=\"text-decoration: none;\"></a>');\r\n                            img.css('border', '0');\r\n                        } else {\r\n                            txtLink.prop('disabled', true);\r\n                            cbbTarget.prop('disabled', true);\r\n                            img.unwrap('a');\r\n                        }\r\n                    });\r\n                    \r\n                    var photoEdit = form.find('#photo-edit');\r\n                    photoEdit.mselect({\r\n                        contentTypes: ['image'],\r\n                        bs3Modal: true,\r\n                        pagePath: keditor.options.pagePath,\r\n                        basePath: keditor.options.basePath,\r\n                        onSelectFile: function (url, relativeUrl, fileType, hash) {\r\n                            var img = keditor.getSettingComponent().find('img');\r\n                            img.attr('src', 'http://' + window.location.host + '/_hashes/files/' + hash);\r\n                            self.adjustWidthForImg(img, true);\r\n                        }\r\n                    });\r\n                    \r\n                    var inputAlt = form.find('#photo-alt');\r\n                    inputAlt.on('change', function () {\r\n                        keditor.getSettingComponent().find('img').attr('alt', this.value);\r\n                    });\r\n                    \r\n                    var chkFullWidth = form.find('#photo-fullwidth');\r\n                    chkFullWidth.on('click', function () {\r\n                        var img = keditor.getSettingComponent().find('img');\r\n                        img[this.checked ? 'addClass' : 'removeClass']('full-width');\r\n                        self.adjustWidthForImg(img, this.checked);\r\n                    });\r\n                    \r\n                    var cbbAlign = form.find('#photo-align');\r\n                    cbbAlign.on('change', function () {\r\n                        var td = keditor.getSettingComponent().find('.text-wrapper');\r\n                        td.attr('align', this.value);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"photo\" component', component);\r\n            \r\n            edmEditor.showDefaultComponentControls(form, component, keditor);\r\n            \r\n            var td = component.find('.text-wrapper');\r\n            var img = component.find('img');\r\n            \r\n            var inputAlt = form.find('#photo-alt');\r\n            inputAlt.val(img.attr('alt') || '');\r\n            \r\n            var chkFullWidth = form.find('#photo-fullwidth');\r\n            chkFullWidth.prop('checked', img.hasClass('full-width'));\r\n            \r\n            var txtLink = form.find('#photo-link');\r\n            var cbbTarget = form.find('#photo-target');\r\n            var chkLinkable = form.find('#photo-linkable');\r\n            var cbbAlign = form.find('#photo-align');\r\n            \r\n            cbbAlign.val(td.attr('align') || 'left');\r\n            txtLink.next().hide();\r\n            txtLink.closest('.form-group').removeClass('has-error');\r\n            \r\n            var a = img.parent('a');\r\n            if (a.length > 0) {\r\n                chkLinkable.prop('checked', true);\r\n                txtLink.prop('disabled', false).val(a.attr('href'));\r\n                cbbTarget.prop('disabled', false).val(a.attr('target'));\r\n            } else {\r\n                chkLinkable.prop('checked', false);\r\n                txtLink.prop('disabled', true).val('');\r\n                cbbTarget.prop('disabled', true).val('');\r\n            }\r\n        },\r\n        \r\n        adjustWidthForImg: function (img, isFullWidth) {\r\n            flog('adjustWidthForImg', img, isFullWidth);\r\n            \r\n            img.css('display', 'none');\r\n            \r\n            $('<img />').attr('src', img.attr('src')).load(function () {\r\n                var realWidth = this.width;\r\n                var realHeight = this.height;\r\n                var ratio = realWidth / realHeight;\r\n                var wrapper = img.parent();\r\n                if (wrapper.is('a')) {\r\n                    wrapper = wrapper.parent();\r\n                }\r\n                var wrapperWidth = wrapper.width();\r\n                img.attr({\r\n                    width: isFullWidth ? wrapperWidth : realWidth,\r\n                    height: isFullWidth ? wrapperWidth / ratio : realHeight\r\n                });\r\n                img.css('display', 'block');\r\n            });\r\n        },\r\n        \r\n        onWithChanged: function (component, width, keditor) {\r\n            var self = this;\r\n            \r\n            var img = component.find('img');\r\n            self.adjustWidthForImg(img, img.hasClass('full-width'));\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var edmEditor = $.edmEditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['spacer'] = {\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Spacer Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"spacer\" component');\r\n            form.append(\r\n                '<div class=\"form-horizontal\">' +\r\n                '    <div class=\"form-group\">' +\r\n                '       <label for=\"spacer-height\" class=\"col-sm-12\">Height</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" id=\"spacer-height\" class=\"form-control\" />' +\r\n                '       </div>' +\r\n                '    </div>' +\r\n                '</div>'\r\n            );\r\n    \r\n            form = form.find('.form-horizontal');\r\n            edmEditor.initDefaultComponentControls(form, keditor, {\r\n                hidePadding: true\r\n            });\r\n\r\n            var spacerHeight = form.find('#spacer-height');\r\n            spacerHeight.on('change', function () {\r\n                keditor.getSettingComponent().find('.spacer').attr('height', this.value);\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"spacer\" component', component);\r\n\r\n            var spacerHeight = form.find('#spacer-height');\r\n            spacerHeight.val(component.find('.spacer').attr('height'));\r\n    \r\n            edmEditor.showDefaultComponentControls(form, component, keditor);\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var edmEditor = $.edmEditor;\r\n    var flog = KEditor.log;\r\n\r\n    CKEDITOR.disableAutoInline = true;\r\n    CKEDITOR.isEDM = true;\r\n\r\n    // Text component\r\n    // ---------------------------------------------------------------------\r\n    KEditor.components['text'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"text\" component', component);\r\n\r\n            var self = this;\r\n            var options = keditor.options;\r\n\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var textWrapper = componentContent.find('.text-wrapper');\r\n            var textHtml = textWrapper.html();\r\n            var editorDiv = $('<div class=\"text-editor\" contenteditable=\"true\"></div>').attr('id', keditor.generateId('text-editor')).html(textHtml);\r\n            textWrapper.html(editorDiv);\r\n\r\n            var editor = editorDiv.ckeditor(keditor.options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n\r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(keditor, component, editor, contentArea);\r\n                }\r\n            });\r\n\r\n            editorDiv.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(keditor, e, component, contentArea);\r\n                }\r\n\r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(keditor, e, container, contentArea);\r\n                }\r\n\r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(keditor, e, contentArea);\r\n                }\r\n            });\r\n        },\r\n\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"text\" component', component);\r\n\r\n            var componentContent = component.find('.keditor-component-content');\r\n            var textWrapper = componentContent.find('.text-wrapper');\r\n            var editorDiv = componentContent.find('.text-editor');\r\n            var id = editorDiv.attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n\r\n            if (editor) {\r\n                textWrapper.html(editor.getData());\r\n            }\r\n\r\n            return componentContent.html();\r\n        },\r\n\r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n\r\n            var id = component.find('.text-editor').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Text Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"text\" component');\r\n            form.append(\r\n                '<div class=\"form-horizontal\">' +\r\n                '</div>'\r\n            );\r\n\r\n            form = form.find('.form-horizontal');\r\n            edmEditor.initDefaultComponentControls(form, keditor);\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"text\" component', component);\r\n    \r\n            edmEditor.showDefaultComponentControls(form, component, keditor);\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n"]}