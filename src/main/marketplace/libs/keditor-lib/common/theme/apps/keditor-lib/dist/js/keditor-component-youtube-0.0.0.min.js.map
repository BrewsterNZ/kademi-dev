{"version":3,"sources":["keditor-component-youtube-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","init","contentArea","container","component","find","attr","getContent","componentContent","children","remove","html","settingEnabled","settingTitle","initSettingForm","form","ajax","url","type","dataType","success","resp","btnEdit","on","e","preventDefault","inputData","prompt","youtubeRegex","match","getSettingComponent","alert","btn169","removeClass","addClass","btn43","chkAutoplay","embedItem","currentUrl","newUrl","replace","is","showSettingForm","src","prop","indexOf","jQuery"],"mappings":"CAAA,SAAWA,GACP,GAAIC,GAAUD,EAAEE,QACZC,EAAOF,EAAQG,GAEnBH,GAAQI,WAAoB,SACxBC,KAAM,SAAUC,EAAaC,EAAWC,EAAWP,GAC/CC,EAAK,2BAA4BM,GAEjCA,EAAUC,KAAK,UAAUC,KAAK,kBAAmB,oBAGrDC,WAAY,SAAUH,EAAWP,GAC7BC,EAAK,iCAAkCM,EAEvC,IAAII,GAAmBJ,EAAUK,SAAS,6BAG1C,OAFAD,GAAiBH,KAAK,kBAAkBK,SAEjCF,EAAiBG,QAG5BC,gBAAgB,EAEhBC,aAAc,mBAEdC,gBAAiB,SAAUC,EAAMlB,GAG7B,MAFAC,GAAK,0BAA2BiB,GAEzBpB,EAAEqB,MACLC,IAAK,wDACLC,KAAM,MACNC,SAAU,OACVC,QAAS,SAAUC,GACfN,EAAKJ,KAAKU,EAEV,IAAIC,GAAUP,EAAKV,KAAK,oBACxBiB,GAAQC,GAAG,QAAS,SAAUC,GAC1BA,EAAEC,gBAEF,IAAIC,GAAYC,OAAO,oCACvB,IAAkB,OAAdD,EAAoB,CACpB,GAAIE,GAAe,2IACfC,GAASH,GAAa,IAAIG,MAAMD,EAChCC,IAASA,EAAM,GACfhC,EAAQiC,sBAAsBzB,KAAK,0BAA0BC,KAAK,MAAO,iCAAmCuB,EAAM,IAElHE,MAAM,kCAKlB,IAAIC,GAASjB,EAAKV,KAAK,mBACvB2B,GAAOT,GAAG,QAAS,SAAUC,GACzBA,EAAEC,iBAEF5B,EAAQiC,sBAAsBzB,KAAK,qBAAqB4B,YAAY,yBAAyBC,SAAS,2BAG1G,IAAIC,GAAQpB,EAAKV,KAAK,kBACtB8B,GAAMZ,GAAG,QAAS,SAAUC,GACxBA,EAAEC,iBAEF5B,EAAQiC,sBAAsBzB,KAAK,qBAAqB4B,YAAY,0BAA0BC,SAAS,0BAG3G,IAAIE,GAAcrB,EAAKV,KAAK,oBAC5B+B,GAAYb,GAAG,QAAS,WACpB,GAAIc,GAAYxC,EAAQiC,sBAAsBzB,KAAK,0BAC/CiC,EAAaD,EAAU/B,KAAK,OAC5BiC,EAAUD,EAAWE,QAAQ,UAAW,IAAO,cAAgBJ,EAAYK,GAAG,YAAc,EAAI,EAEpG3C,GAAK,gBAAkBwC,EAAY,YAAcC,GACjDF,EAAU/B,KAAK,MAAOiC,SAMtCG,gBAAiB,SAAU3B,EAAMX,EAAWP,GACxCC,EAAK,sCAAuCM,EAE5C,IAAIiC,GAAYjC,EAAUC,KAAK,0BAC3B+B,EAAcrB,EAAKV,KAAK,qBACxBsC,EAAMN,EAAU/B,KAAK,MAEzB8B,GAAYQ,KAAK,UAAWD,EAAIE,QAAQ,uBAIjDC","file":"keditor-component-youtube-0.0.0.min.js","sourcesContent":["(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['youtube'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"youtube\" component', component);\r\n            \r\n            component.find('iframe').attr('allowfullscreen', 'allowfullscreen');\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"youtube\" component', component);\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.youtube-cover').remove();\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Youtube Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"youtube\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentYoutubeSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var btnEdit = form.find('.btn-youtube-edit');\r\n                    btnEdit.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var inputData = prompt('Please enter Youtube URL in here:');\r\n                        if (inputData !== null) {\r\n                            var youtubeRegex = /^(?:http(?:s)?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:(?:watch)?\\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\\/))([^\\?&\\\"'>]+)/;\r\n                            var match = (inputData || '').match(youtubeRegex);\r\n                            if (match && match[1]) {\r\n                                keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://www.youtube.com/embed/' + match[1]);\r\n                            } else {\r\n                                alert('Your Youtube URL is invalid!');\r\n                            }\r\n                        }\r\n                    });\r\n                    \r\n                    var btn169 = form.find('.btn-youtube-169');\r\n                    btn169.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n                    });\r\n                    \r\n                    var btn43 = form.find('.btn-youtube-43');\r\n                    btn43.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n                    });\r\n                    \r\n                    var chkAutoplay = form.find('#youtube-autoplay');\r\n                    chkAutoplay.on('click', function () {\r\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\r\n                        var currentUrl = embedItem.attr('src');\r\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\r\n                        \r\n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\r\n                        embedItem.attr('src', newUrl);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"youtube\" component', component);\r\n            \r\n            var embedItem = component.find('.embed-responsive-item');\r\n            var chkAutoplay = form.find('#youtube-autoplay');\r\n            var src = embedItem.attr('src');\r\n            \r\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n"]}