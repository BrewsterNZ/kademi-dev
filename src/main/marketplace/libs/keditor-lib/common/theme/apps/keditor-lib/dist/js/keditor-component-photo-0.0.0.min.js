/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var i=t.keditor,n=t.contentEditor,e=i.log;i.components.photo={init:function(t,i,n,o){e('init "photo" component',n);var a=n.children(".keditor-component-content"),h=a.find("img");h.css("display","inline-block"),h.css("vertical-align")||h.css("vertical-align","middle"),h.attr({width:h.width(),height:h.height()}).css({width:"",height:""});var s=o.options;"function"==typeof s.onComponentReady&&s.onComponentReady.call(t,n)},settingEnabled:!0,settingTitle:"Photo Settings",initSettingForm:function(i,o){e('init "photo" settings',i,o);var a=this;return t.ajax({url:"/theme/apps/keditor-lib/componentPhotoSettings.html",type:"get",dataType:"HTML",success:function(e){i.html(e);var h=i.find("#photo-link");h.on("change",function(){var t=this.value.trim();o.getSettingComponent().find("a").attr("href",t)});var s=i.find("#photo-target");s.on("change",function(){o.getSettingComponent().find("a").attr("target",this.value)});var d=i.find("#photo-linkable");d.on("click",function(){var t=o.getSettingComponent().find("img");d.is(":checked")?(h.prop("disabled",!1),s.prop("disabled",!1),t.wrap('<a href=""></a>')):(h.prop("disabled",!0),s.prop("disabled",!0),t.unwrap("a"))});var r=i.find("#photo-align");r.on("change",function(){var t=o.getSettingComponent().find(".photo-panel");t.css("text-align",this.value)});var g=i.find("#v-align");g.on("change",function(){var t=o.getSettingComponent().find(".photo-panel").find("img");t.css("vertical-align",this.value)});var l=i.find("#photo-responsive");l.on("click",function(){o.getSettingComponent().find("img")[this.checked?"addClass":"removeClass"]("img-responsive")});var p=i.find("#photo-style");p.on("change",function(){var t=o.getSettingComponent().find("img"),i=this.value;t.removeClass("img-rounded img-circle img-thumbnail"),i&&t.addClass(i)});var c=i.find("#photo-width"),v=i.find("#photo-height");c.on("change",function(){var t=o.getSettingComponent().find("img"),i=+this.value,n=Math.round(i/a.ratio);i<=0&&(i=a.width,n=a.height,this.value=i),t.attr({width:i,height:n}),v.val(n)}),v.on("change",function(){var t=o.getSettingComponent().find("img"),i=+this.value,n=Math.round(i*a.ratio);i<=0&&(n=a.width,i=a.height,this.value=i),t.attr({height:i,width:n}),c.val(n)}),n.initMselectImage(i.find("#photo-edit"),o,function(i,n,e,h){var s=o.getSettingComponent().find("img"),d="/_hashes/files/"+h;t("<img />").attr("src",d).load(function(){s.attr({width:this.width,height:this.height,src:d}),a.ratio=this.width/this.height,a.width=this.width,a.height=this.height,c.val(this.width),v.val(this.height)})})}})},showSettingForm:function(i,n,o){e('showSettingForm "photo" component',n);var a=this,h=i.find("#photo-align"),s=i.find("#v-align"),d=i.find("#photo-responsive"),r=i.find("#photo-width"),g=i.find("#photo-height"),l=i.find("#photo-style"),p=i.find("#photo-link"),c=i.find("#photo-target"),v=i.find("#photo-linkable"),f=n.find(".photo-panel"),m=f.find("img"),u=m.parent("a");u.length>0?(v.prop("checked",!0),p.prop("disabled",!1).val(u.attr("href")),c.prop("disabled",!1).val(u.attr("target"))):(v.prop("checked",!1),p.prop("disabled",!0).val(""),c.prop("disabled",!0).val(""));var w=f.css("text-align");"right"===w&&"center"===w||(w="left");var C=m.css("vertical-align");m.hasClass("img-rounded")?l.val("img-rounded"):m.hasClass("img-circle")?l.val("img-circle"):m.hasClass("img-thumbnail")?l.val("img-thumbnail"):l.val(""),h.val(w),s.val(C),d.prop("checked",m.hasClass("img-responsive")),r.val(m.width()),g.val(m.height()),t("<img />").attr("src",m.attr("src")).load(function(){a.ratio=this.width/this.height,a.width=this.width,a.height=this.height})}}}(jQuery);
//# sourceMappingURL=keditor-component-photo-0.0.0.min.js.map
