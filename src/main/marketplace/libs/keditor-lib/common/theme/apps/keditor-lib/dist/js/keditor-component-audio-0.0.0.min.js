/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var i=t.keditor,e=i.log;i.components.audio={init:function(t,i,a,n){e('init "audio" component',a),this.component=a;var o=a.find("img[data-src]"),r="";o.attr("id")?r=o.attr("id"):(r=n.generateId("component-audio"),o.attr("id",r)),o.parent().hasClass("audio-wrapper")||o.wrap('<div class="audio-wrapper"></div>'),this.src=o.attr("data-src"),this.width=o.attr("data-width"),this.autostart="true"===o.attr("data-autostart"),this.buildJWAudioPlayerPreview(r)},getContent:function(t,i){e('getContent "audio" component',t);var a=t.find("img[data-src]"),n=a.attr("id"),o='<img data-componentId="'+n+'" src="/theme/apps/content/preview/audio.png" data-autostart="'+this.autostart+'" data-width="'+this.width+'" data-src="'+this.src+'" data-kaudio="'+this.src+'" />';return o},settingEnabled:!0,settingTitle:"Audio settings",initSettingForm:function(i,a){return e('init "audio" settings',i),t.ajax({url:"/theme/apps/keditor-lib/componentAudioSettings.html",type:"get",dataType:"HTML",success:function(t){i.html(t)}})},showSettingForm:function(t,i,a){e('showSettingForm "audio" component',t,i);var n=this,o=t.find(".btn-audioFileInput");o.mselect({contentType:"audio",bs3Modal:!0,pagePath:a.options.pagePath,basePath:a.options.basePath,onSelectFile:function(t){n.src=t;var i=a.getSettingComponent(),e=i.find("object"),o=e.attr("id");n.componentId=o,n.refreshAudioPlayerPreview()}});var r=t.find("#audio-autoplay");this.autostart&&r.prop("checked",!0),r.on("click",function(t){var i=a.getSettingComponent(),e=i.find("object"),o=e.attr("id");n.autostart=this.checked,n.buildJWAudioPlayerPreview(o)});var d=t.find("#audio-width");d.val(this.width),d.on("change",function(){var t=a.getSettingComponent(),i=t.find("object"),e=i.attr("id");n.componentId=e,n.width=this.value,n.resizeAudioPlayerPreview()})},buildJWAudioPlayerPreview:function(t){var i=this.width,e=this.src,a=this.autostart,n=jwplayer(t);n.setup({file:e,width:i,height:30,autostart:a,flashplayer:window.JWPLAYER_LIB_PATH_FLASH,html5player:window.JWPLAYER_LIB_PATH_HTML5,primary:"flash"}),n.onReady(function(){log("jwplayer preview init done")})},refreshAudioPlayerPreview:function(){var t=this,i=jwplayer(t.componentId),e=t.src;i.load([{file:e}]),i.play()},resizeAudioPlayerPreview:function(){var t=this,i=jwplayer(t.componentId),e=t.width;i.resize(e,30)}}}(jQuery);
//# sourceMappingURL=keditor-component-audio-0.0.0.min.js.map
