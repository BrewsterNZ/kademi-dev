/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var i=t.keditor,a=i.log;i.components.audio={init:function(t,i,e,r){a('init "audio" component',e),this.component=e;var o=e.find("img[data-src]"),n="";o.attr("id")?n=o.attr("id"):(n=r.generateId("component-audio"),o.attr("id",n)),o.parent().hasClass("audio-wrapper")||o.wrap('<div class="audio-wrapper"></div>'),this.src=o.attr("data-src"),this.width=o.attr("data-width"),this.autostart="true"===o.attr("data-autostart"),this.buildJWAudioPlayerPreview(n)},getContent:function(t,i){a('getContent "audio" component',t);var e=t.find("img[data-src]"),r=e.attr("id"),o='<img data-componentId="'+r+'" src="/theme/apps/content/preview/audio.png" data-autostart="'+this.autostart+'" data-width="'+this.width+'" data-src="'+this.src+'" data-kaudio="'+this.src+'" />';return o},settingEnabled:!0,settingTitle:"Audio settings",initSettingForm:function(i,e){return a('init "audio" settings',i),t.ajax({url:"/theme/apps/keditor-lib/componentAudioSettings.html",type:"get",dataType:"HTML",success:function(t){i.html(t)}})},showSettingForm:function(t,i,e){a('showSettingForm "audio" component',t,i);var r=this,o=t.find(".btn-audioFileInput");o.mselect({contentType:"audio",bs3Modal:!0,pagePath:e.options.pagePath,basePath:e.options.basePath,onSelectFile:function(t){r.src=t,r.refreshAudioPlayerPreview()}});var n=i.find("img[data-src]"),s=n.attr("id"),d=t.find("#audio-autoplay");this.autostart&&d.prop("checked",!0),d.on("click",function(t){r.autostart=this.checked,r.buildJWAudioPlayerPreview(s)});var u=t.find("#audio-width");u.val(this.width),u.on("change",function(){r.width=this.value,r.resizeAudioPlayerPreview()})},buildJWAudioPlayerPreview:function(t){var i=this.width,a=this.src,e=this.autostart,r=jwplayer(t);r.setup({file:a,width:i,height:30,autostart:e,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",primary:"flash"}),r.onReady(function(){log("jwplayer preview init done")})},refreshAudioPlayerPreview:function(){var t=this,i=jwplayer(t.componentId),a=t.src;i.load([{file:a}]),i.play()},resizeAudioPlayerPreview:function(){var t=this,i=jwplayer(t.componentId),a=t.width;i.resize(a,30)}}}(jQuery);
//# sourceMappingURL=keditor-component-audio-0.0.0.min.js.map
