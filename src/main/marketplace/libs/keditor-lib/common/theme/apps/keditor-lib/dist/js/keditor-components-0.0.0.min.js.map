{"version":3,"sources":["keditor-components-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","settingEnabled","settingTitle","init","contentArea","container","component","options","doc","iframeMode","iframeDoc","document","id","generateId","componentContent","children","find","attr","panels","each","index","item","p","itemId","panelCollapseId","on","e","preventDefault","length","headingText","headingIcon","text","trim","html","append","collapse","removeClass","prop","onComponentChanged","call","onContainerChanged","onContentChanged","editor","this","ckeditor","ckeditorOptions","onComponentReady","setTimeout","parents","css","off","componentContentNow","closest","confirm","panelsCount","remove","Msg","error","clone","first","getContent","h","replaceWith","panelTitle","panelCollapse","addClass","removeAttr","destroy","CKEDITOR","instances","initSettingForm","form","ajax","url","type","dataType","success","resp","comp","getSettingComponent","checked","old","value","getStyleOnce","getScriptOnce","iconpicker","iconset","cols","rows","placement","icon","className","showSettingForm","dataAttributes","getDataAttributes","val","iconCollapsed","end","iconExpanded","jQuery","img","componentId","parent","hasClass","wrap","src","width","autostart","buildJWAudioPlayerPreview","instance","btnAudioFileInput","mselect","contentType","bs3Modal","pagePath","basePath","onSelectFile","refreshAudioPlayerPreview","autoplayToggle","audioWidth","resizeAudioPlayerPreview","playerInstance","jwplayer","setup","file","height","flashplayer","window","JWPLAYER_LIB_PATH_FLASH","html5player","JWPLAYER_LIB_PATH_HTML5","primary","onReady","load","play","resize","carousel","self","images","push","hash","i","image","addItemToCarousel","eq","editingItemId","carouselAddImage","carouselItemsWrap","initMSelectImage","relUrl","isAsset","addItemToList","caption","refreshCarousel","sortable","handle","items","axis","tolerance","sort","update","editorContent","initModalContent","modalContent","editorCaption","initModalCaption","modalCaption","modal","btn","siblings","carouselItem","txtCarouselContent","setData","trigger","txtCarouselCaption","isNaN","appendTo","body","contentOptions","extend","removePlugins","replace","extraPlugins","carouselContent","getData","content","captionOptions","toolbarGroups","toolbarSets","carouselCaption","carouselImg","slice","isWrap","pause","interval","iconPrev","iconNext","data","carouselInner","cls","backgroundUrl","backgroundSize","itemStr","editCaption","Date","getTime","txtContent","txtCaption","initFormBuilder","formBuilderArea","formData","formContent","prepend","btnEditForm","btnPreviewForm","formBuilder","disableInjectedStyle","showActionButtons","disableFields","disabledAttrs","typeUserDisabledAttrs","checkbox-group","show","hide","renderForm","formRender","actions","div","dataGrid","split","label","input","subDiv","layout","callWhenGoogleMapReady","initKGoogleMap","initAutocomplete","mapTypes","filter","iframe","kgooglemap","makeGoogleMapFresh","alert","callback","apiKey","google","maps","places","event","keyCode","map","maptype","place","ratio","mapDiv","Map","zoom","mapTypeId","searchBox","SearchBox","addListener","setBounds","getBounds","markers","getPlaces","forEach","marker","setMap","bounds","LatLngBounds","geometry","console","size","Size","origin","Point","anchor","scaledSize","Marker","title","name","position","location","viewport","union","fitBounds","contentEditor","buttonColorPicker","initSimpleColorPicker","color","paddingSettings","paddingValue","paddingProp","marginSettings","script","vectorMap","backgroundColor","zoomButtons","focusOn","x","y","scale","regionStyle","initial","fill","hover","onRegionTipShow","el","code","setInterval","updateSize","clearInterval","arr","insertBefore","insertAfter","currentState","defaultState","mediaBody","mediaLeft","mediaLeftInner","txtLink","link","cbbTarget","chkLinkable","is","unwrap","relativeUrl","fileType","imgUrl","inputVAlign","inputResponsive","inputWidth","cbbStyle","get","style","a","valign","disableAutoInline","dtd","$removeEmpty","ckeditorPlace","contentHtml","componentTextContent","target","imageUrl","host","colorPicker","initColorPicker","textColorPicker","txt","styleName","marginValue","minHeight","maxHeight","minWidth","maxWidth","backgroundImage","backgroundRepeat","backgroundPosition","colorpicker","captionInner","btnEdit","inputData","prompt","vimeoRegex","match","btn169","btn43","chkAutoplay","embedItem","currentUrl","newUrl","indexOf","youtubeRegex"],"mappings":"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","file":"keditor-components-0.0.0.min.js","sourcesContent":["(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['accordion'] = {\r\n        settingEnabled: true,\r\n        settingTitle: 'Accordion Settings',\r\n\r\n        init: function (contentArea, container, component, keditor) {\r\n            var options = keditor.options;\r\n            var doc = options.iframeMode ? keditor.iframeDoc : $(document);\r\n            var id = keditor.generateId('accordion');\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.accordionWrap .panel-group').attr('id', id);\r\n            componentContent.find('.accordionWrap a[data-toggle]').attr('data-parent', '#' + id);\r\n\r\n\r\n            var panels = componentContent.find('.panel');\r\n            panels.each(function (index, item) {\r\n                var p = $(item);\r\n                var itemId = keditor.generateId('heading' + index);\r\n                var panelCollapseId = keditor.generateId('collapse' + index);\r\n                p.find('.panel-heading').attr('id', itemId);\r\n                p.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\r\n                p.find('a[data-toggle]').attr('href', '#' + panelCollapseId).attr('aria-controls', '#' + panelCollapseId).on('click', function (e) {\r\n                    e.preventDefault();\r\n                });\r\n\r\n                // backward compatibility\r\n                if (!p.find('a[data-toggle]').find('.accHeadingText').length){\r\n                    var headingText = $('<div class=\"accHeadingText\" style=\"display: inline-block; width: 90%\"></div>');\r\n                    var headingIcon = $('<div style=\"display: inline-block; width: 5%; float: right; text-align: right\"><i class=\"fa fa-angle-double-down panelIconCollapsed\"></i><i class=\"fa panelIconExpanded fa-angle-double-up\"></i></div>')\r\n                    var text = p.find('a[data-toggle]').text().trim();\r\n                    headingText.text(text);\r\n                    p.find('a[data-toggle]').html('').append(headingText).append(headingIcon);\r\n                }\r\n            });\r\n\r\n            componentContent.find('.accordionWrap .panel-collapse').collapse('show');\r\n            componentContent.find('.panel-footer, .btnAddAccordionItem').removeClass('hide');\r\n            componentContent.find('.panel-title a .accHeadingText').prop('contenteditable', true);\r\n            componentContent.find('.panel-collapse .panel-body').prop('contenteditable', true);\r\n\r\n            componentContent.find('.panel-title a .accHeadingText, .panel-collapse .panel-body').on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(keditor, e, component, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(keditor, e, container, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(keditor, e, contentArea);\r\n                }\r\n            });\r\n            componentContent.find('.panel-title a .accHeadingText, .panel-collapse .panel-body').each(function () {\r\n                var editor = $(this).ckeditor(options.ckeditorOptions).editor;\r\n                editor.on('instanceReady', function (e) {\r\n                    flog('CKEditor is ready', component);\r\n\r\n                    if (typeof options.onComponentReady === 'function') {\r\n                        options.onComponentReady.call(contentArea, component, editor);\r\n                    }\r\n\r\n                    if (options.iframeMode){\r\n                        e.editor.on('focus', function (e) {\r\n                            setTimeout(function () {\r\n                                $('#'+e.editor.id + '_top').parents('.'+e.editor.id).css('top', 0).css('position', 'fixed');\r\n                            }, 0);\r\n                        });\r\n                    }\r\n                });\r\n            })\r\n\r\n\r\n\r\n            doc.off('click', '.btnDeleteAccordionItem').on('click', '.btnDeleteAccordionItem', function (e) {\r\n                e.preventDefault();\r\n                var componentContentNow = $(this).closest('.keditor-component-content');\r\n                if (confirm('Are you sure you want to delete this item?')) {\r\n                    var panelsCount = componentContentNow.find('.panel').length;\r\n                    if (panelsCount > 1) {\r\n                        $(this).parents('.panel').remove();\r\n                    } else {\r\n                        Msg.error('You cant delete the last item');\r\n                    }\r\n                }\r\n            });\r\n\r\n            doc.off('click', '.btnAddAccordionItem').on('click', '.btnAddAccordionItem', function (e) {\r\n                e.preventDefault();\r\n                var componentContentNow = $(this).closest('.keditor-component-content');\r\n                var clone = componentContentNow.find('.panel').first().clone();\r\n                var itemId = keditor.generateId('heading');\r\n                var panelCollapseId = keditor.generateId('collapse');\r\n                clone.find('.panel-heading').attr('id', itemId);\r\n                clone.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\r\n                clone.find('a[data-toggle]').attr('href', '#' + panelCollapseId).on('click', function (e) {\r\n                    e.preventDefault();\r\n                });\r\n                componentContentNow.find('.accordionWrap .panel-group').append(clone);\r\n                clone.find('.panel-title a .accHeadingText, .panel-collapse .panel-body').each(function () {\r\n                    var editor = $(this).ckeditor(options.ckeditorOptions).editor;\r\n                    editor.on('instanceReady', function (e) {\r\n                        flog('CKEditor is ready', component);\r\n\r\n                        if (typeof options.onComponentReady === 'function') {\r\n                            options.onComponentReady.call(contentArea, component, editor);\r\n                        }\r\n\r\n                        if (options.iframeMode){\r\n                            e.editor.on('focus', function (e) {\r\n                                setTimeout(function () {\r\n                                    $('#'+e.editor.id + '_top').parents('.'+e.editor.id).css('top', 0).css('position', 'fixed');\r\n                                }, 0);\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        },\r\n\r\n        getContent: function (component, keditor) {\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.panel-collapse .panel-body').each(function () {\r\n                var h = $(this).html();\r\n                $(this).replaceWith('<div class=\"panel-body\">' + h + '</div>');\r\n            });\r\n            if (component.attr('data-initial-collapsed') == 'true'){\r\n                componentContent.find('.panel').each(function () {\r\n                    var panelTitle = $(this).find('.panel-heading a');\r\n                    var panelCollapse = $(this).find('.panel-collapse');\r\n                    panelCollapse.addClass('collapse').attr('aria-expanded', 'false').removeClass('in');\r\n                    panelTitle.addClass('collapsed').attr('aria-expanded', 'false');\r\n                });\r\n            }\r\n            componentContent.find('.panel-footer, .btnAddAccordionItem').addClass('hide');\r\n            componentContent.find('[contenteditable]').removeAttr('contenteditable');\r\n            componentContent.find('.accHeadingText').each(function () {\r\n               $(this).css('outline', 'none').text($(this).text());\r\n            });\r\n            return componentContent.html();\r\n        },\r\n\r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n\r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"accordion\" settings', form);\r\n\r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentAccordionSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n\r\n                    form.find('.collapsedAll').on('click', function () {\r\n                        var comp = keditor.getSettingComponent();\r\n                        comp.attr('data-initial-collapsed', this.checked);\r\n                    });\r\n\r\n                    form.find('.panelStyle').on('change', function (e) {\r\n                        var comp = keditor.getSettingComponent();\r\n                        var old = comp.attr('data-panel-style') || 'panel-default';\r\n                        comp.attr('data-panel-style', this.value);\r\n                        comp.find('.panel').removeClass(old).addClass(this.value);\r\n                    });\r\n                    \r\n                    $.getStyleOnce('/static/bootstrap-iconpicker/1.7.0/css/bootstrap-iconpicker.min.css');\r\n                    $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/iconset/iconset-fontawesome-4.2.0.min.js', function () {\r\n                        $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/bootstrap-iconpicker.min.js', function () {\r\n                            form.find('.btn-collapsed-icon, .btn-expanded-icon').iconpicker({\r\n                                iconset: 'fontawesome',\r\n                                cols: 10,\r\n                                rows: 4,\r\n                                placement: 'left'\r\n                            });\r\n                            \r\n                            form.find('.btn-collapsed-icon').on('change', function (e) {\r\n                                var component = keditor.getSettingComponent();\r\n                                component.attr('data-collapsed-icon', e.icon);\r\n                                component.find('.panelIconCollapsed').each(function () {\r\n                                    this.className = \"panelIconCollapsed fa \"+ e.icon;\r\n                                })\r\n                            });\r\n                            \r\n                            form.find('.btn-expanded-icon').on('change', function (e) {\r\n                                var component = keditor.getSettingComponent();\r\n                                component.attr('data-expanded-icon', e.icon);\r\n                                component.find('.panelIconExpanded').each(function () {\r\n                                    this.className = \"panelIconExpanded fa \"+ e.icon;\r\n                                })\r\n                            });\r\n                        });\r\n                    });\r\n                            \r\n                }\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"Accordion\" component');\r\n            var dataAttributes = keditor.getDataAttributes(component, ['data-type'], false);\r\n            \r\n            form.find('.collapsedAll').prop('checked', component.attr('data-initial-collapsed') == 'true');\r\n            form.find('.panelStyle').val(component.attr('data-panel-style'));\r\n            \r\n            $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/iconset/iconset-fontawesome-4.2.0.min.js', function () {\r\n                $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/bootstrap-iconpicker.min.js', function () {\r\n                    var iconCollapsed = dataAttributes['data-collapsed-icon'] || 'fa-caret-up';\r\n                    form.find('.btn-collapsed-icon').find('i').attr('class', 'fa ' + iconCollapsed).end().find('input').val(iconCollapsed);\r\n                    var iconExpanded = dataAttributes['data-expanded-icon'] || 'fa-caret-down';\r\n                    form.find('.btn-expanded-icon').find('i').attr('class', 'fa ' + iconExpanded).end().find('input').val(iconExpanded);\r\n                });\r\n            });\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['audio'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"audio\" component', component);\r\n            \r\n            this.component = component;\r\n            var img = component.find('img[data-src]');\r\n            var componentId = '';\r\n            if (!img.attr('id')) {\r\n                componentId = keditor.generateId('component-audio');\r\n                img.attr('id', componentId);\r\n            } else {\r\n                componentId = img.attr('id');\r\n            }\r\n            if (!img.parent().hasClass('audio-wrapper')) {\r\n                img.wrap('<div class=\"audio-wrapper\"></div>');\r\n            }\r\n            this.src = img.attr('data-src');\r\n            this.width = img.attr('data-width');\r\n            this.autostart = img.attr('data-autostart') === 'true';\r\n            this.buildJWAudioPlayerPreview(componentId);\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"audio\" component', component);\r\n            \r\n            var img = component.find('img[data-src]');\r\n            var componentId = img.attr('id');\r\n            \r\n            var html = '<img data-componentId=\"' + componentId + '\" src=\"/theme/apps/content/preview/audio.png\" data-autostart=\"' + this.autostart + '\" data-width=\"' + this.width + '\" data-src=\"' + this.src + '\" data-kaudio=\"' + this.src + '\" />';\r\n            return html;\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Audio settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"audio\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentAudioSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"audio\" component', form, component);\r\n            \r\n            var instance = this;\r\n            var btnAudioFileInput = form.find('.btn-audioFileInput');\r\n            btnAudioFileInput.mselect({\r\n                contentType: 'audio',\r\n                bs3Modal: true,\r\n                pagePath: keditor.options.pagePath,\r\n                basePath: keditor.options.basePath,\r\n                onSelectFile: function (url) {\r\n                    instance.src = url;\r\n                    var component = keditor.getSettingComponent();\r\n                    var img = component.find('object');\r\n                    var componentId = img.attr('id');\r\n                    instance.componentId = componentId;\r\n                    instance.refreshAudioPlayerPreview();\r\n                }\r\n            });\r\n            \r\n\r\n            var autoplayToggle = form.find('#audio-autoplay');\r\n            if (this.autostart) {\r\n                autoplayToggle.prop('checked', true);\r\n            }\r\n            autoplayToggle.on('click', function (e) {\r\n                var component = keditor.getSettingComponent();\r\n                var img = component.find('object');\r\n                var componentId = img.attr('id');\r\n                instance.autostart = this.checked;\r\n                instance.buildJWAudioPlayerPreview(componentId);\r\n            });\r\n            \r\n            var audioWidth = form.find('#audio-width');\r\n            audioWidth.val(this.width);\r\n            audioWidth.on('change', function () {\r\n                var component = keditor.getSettingComponent();\r\n                var img = component.find('object');\r\n                var componentId = img.attr('id');\r\n                instance.componentId = componentId;\r\n                instance.width = this.value;\r\n                instance.resizeAudioPlayerPreview();\r\n            });\r\n        },\r\n        \r\n        buildJWAudioPlayerPreview: function (componentId) {\r\n            var width = this.width;\r\n            var src = this.src;\r\n            var autostart = this.autostart;\r\n            var playerInstance = jwplayer(componentId);\r\n            playerInstance.setup({\r\n                file: src,\r\n                width: width,\r\n                height: 30,\r\n                autostart: autostart,\r\n                flashplayer: window.JWPLAYER_LIB_PATH_FLASH,\r\n                html5player: window.JWPLAYER_LIB_PATH_HTML5,\r\n                primary: \"flash\"\r\n            });\r\n            playerInstance.onReady(function () {\r\n                log('jwplayer preview init done');\r\n            });\r\n        },\r\n        \r\n        refreshAudioPlayerPreview: function () {\r\n            var instance = this;\r\n            var playerInstance = jwplayer(instance.componentId);\r\n            var src = instance.src;\r\n            playerInstance.load([{\r\n                file: src\r\n            }]);\r\n            playerInstance.play();\r\n        },\r\n        \r\n        resizeAudioPlayerPreview: function () {\r\n            var instance = this;\r\n            var playerInstance = jwplayer(instance.componentId);\r\n            var width = instance.width;\r\n            \r\n            playerInstance.resize(width, 30);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['carousel'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"carousel\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var carousel = componentContent.find('.carousel');\r\n            \r\n            if (carousel.find('.carousel-img').length === 0 && carousel.find('.carousel-content').length === 0) {\r\n                var self = this;\r\n                var images = [];\r\n                \r\n                carousel.addClass('carousel-fixed-height');\r\n                carousel.find('.carousel-inner .item').each(function () {\r\n                    var item = $(this);\r\n                    \r\n                    images.push({\r\n                        src: item.find('img').attr('src'),\r\n                        hash: item.attr('data-hash')\r\n                    });\r\n                });\r\n                \r\n                carousel.attr('data-height', 300).css('height', 300);\r\n                carousel.find('.carousel-inner').html('');\r\n                carousel.find('.carousel-indicators').html('');\r\n                \r\n                $.each(images, function (i, image) {\r\n                    self.addItemToCarousel(component, {\r\n                        src: image.src,\r\n                        hash: image.hash\r\n                    });\r\n                });\r\n            }\r\n            \r\n            var id = keditor.generateId('component-carousel');\r\n            carousel.attr('id', id);\r\n            carousel.find('.carousel-indicators li').attr('data-target', '#' + id);\r\n            carousel.find('.carousel-control').attr('href', '#' + id);\r\n        },\r\n        getContent: function (component, keditor) {\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.carousel-inner').children().removeClass('active').eq(0).addClass('active');\r\n            \r\n            return componentContent.html();\r\n        },\r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Carousel settings',\r\n        \r\n        editingItemId: '',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"carousel\" settings', form);\r\n            \r\n            var self = this;\r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentCarouselSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    $.getStyleOnce('/static/bootstrap-iconpicker/1.7.0/css/bootstrap-iconpicker.min.css');\r\n                    $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/iconset/iconset-fontawesome-4.2.0.min.js', function () {\r\n                        $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/bootstrap-iconpicker.min.js', function () {\r\n                            form.find('.btn-prev-icon, .btn-next-icon').iconpicker({\r\n                                iconset: 'fontawesome',\r\n                                cols: 10,\r\n                                rows: 4,\r\n                                placement: 'left'\r\n                            });\r\n                            \r\n                            form.find('.btn-prev-icon').on('change', function (e) {\r\n                                var carousel = keditor.getSettingComponent().find('.carousel');\r\n                                carousel.find('.glyphicon-chevron-left').attr('class', 'fa glyphicon-chevron-left ' + e.icon);\r\n                            });\r\n                            \r\n                            form.find('.btn-next-icon').on('change', function (e) {\r\n                                var carousel = keditor.getSettingComponent().find('.carousel');\r\n                                carousel.find('.glyphicon-chevron-right').attr('class', 'fa glyphicon-chevron-right ' + e.icon);\r\n                            });\r\n                        });\r\n                    });\r\n                    \r\n                    var carouselAddImage = form.find('.carouselAddImage');\r\n                    var carouselItemsWrap = form.find('.carouselItemsWrap');\r\n                    \r\n                    initMSelectImage(carouselAddImage, keditor, function (url, relUrl, type, hash, isAsset) {\r\n                        flog('Keditor carousel selected a file', url, hash);\r\n\r\n                        self.addItemToList(form, {\r\n                            src: url,\r\n                            hash: hash,\r\n                            caption: ''\r\n                        });\r\n                        \r\n                        self.refreshCarousel(keditor.getSettingComponent(), form);\r\n                        self.editingItemId = '';\r\n                    });\r\n                    \r\n                    carouselItemsWrap.sortable({\r\n                        handle: '.btn-sort-item',\r\n                        items: '> .carouselItem',\r\n                        axis: 'y',\r\n                        tolerance: 'pointer',\r\n                        sort: function () {\r\n                            $(this).removeClass('ui-state-default');\r\n                        },\r\n                        update: function () {\r\n                            self.refreshCarousel(keditor.getSettingComponent(), form);\r\n                        }\r\n                    });\r\n                    \r\n                    // Content modal\r\n                    var editorContent = self.initModalContent(form, keditor)\r\n                    var modalContent = $('#modal-carousel-content');\r\n                    \r\n                    // Caption modal\r\n                    var editorCaption = self.initModalCaption(form, keditor)\r\n                    var modalCaption = $('#modal-carousel-caption');\r\n                    \r\n                    form.find('.carouselAddImage').on('click', function (e) {\r\n                        e.preventDefault();\r\n                    });\r\n                    \r\n                    form.find('.carouselAddContent').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        modalContent.modal('show');\r\n                    });\r\n                    \r\n                    form.on('click', '.carouselItem a.btn-remove-item', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        if (confirm('Are you sure that you want to delete this image?')) {\r\n                            var btn = $(this);\r\n                            var hash = btn.closest('.btn-group').siblings('[data-hash]').attr('data-hash');\r\n                            \r\n                            var carousel = keditor.getSettingComponent().find('.carousel');\r\n                            carousel.find('[data-hash=' + hash + ']').remove();\r\n                            btn.closest('.carouselItem').remove();\r\n                            \r\n                            self.refreshCarousel(keditor.getSettingComponent(), form);\r\n                        }\r\n                    });\r\n                    \r\n                    form.on('click', '.carouselItem a.btn-edit-item', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var carouselItem = $(this).closest('.carouselItem');\r\n                        self.editingItemId = carouselItem.attr('id');\r\n                        var txtCarouselContent = carouselItem.find('.txt-carousel-content');\r\n                        \r\n                        if (txtCarouselContent.length > 0) {\r\n                            editorContent.setData(txtCarouselContent.val() || '');\r\n                            form.find('.carouselAddContent').trigger('click');\r\n                        } else {\r\n                            form.find('.carouselAddImage').trigger('click');\r\n                        }\r\n                    });\r\n                    \r\n                    \r\n                    form.on('click', '.carouselItem a.btn-edit-caption-item', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var carouselItem = $(this).closest('.carouselItem');\r\n                        self.editingItemId = carouselItem.attr('id');\r\n                        var txtCarouselCaption = carouselItem.find('.txt-carousel-caption');\r\n                        \r\n                        editorCaption.setData(txtCarouselCaption.val() || '');\r\n                        modalCaption.modal('show');\r\n                    });\r\n                    \r\n                    form.find('.carouselHeight').on('change', function (e) {\r\n                        var value = this.value;\r\n                        \r\n                        if (isNaN(value) || +value < 200) {\r\n                            value = 200;\r\n                            this.value = 200;\r\n                        }\r\n                        \r\n                        var carousel = keditor.getSettingComponent().find('.carousel');\r\n                        carousel.attr('data-height', value);\r\n                        carousel.css('height', value);\r\n                    });\r\n                    \r\n                    form.find('.carouselPause').on('change', function (e) {\r\n                        e.preventDefault();\r\n                        var comp = keditor.getSettingComponent().find('.carousel');\r\n                        comp.attr('data-pause', this.value);\r\n                    });\r\n                    \r\n                    form.find('.carouselInterval').on('change', function (e) {\r\n                        e.preventDefault();\r\n                        var comp = keditor.getSettingComponent().find('.carousel');\r\n                        comp.attr('data-interval', this.value);\r\n                    });\r\n                    \r\n                    form.find('.carouselWrap').on('click', function (e) {\r\n                        var comp = keditor.getSettingComponent().find('.carousel');\r\n                        if (this.checked) {\r\n                            comp.attr('data-wrap', 'true');\r\n                        } else {\r\n                            comp.attr('data-wrap', 'false');\r\n                        }\r\n                    });\r\n                    \r\n                    form.find('.select-image-size').on('change', function () {\r\n                        var carousel = keditor.getSettingComponent().find('.carousel');\r\n                        \r\n                        carousel.attr('data-image-size', this.value);\r\n                        \r\n                        carousel.find('.carousel-img').css('background-size', this.value === 'centered' ? 'unset' : '');\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        initModalContent: function (form, keditor) {\r\n            var self = this;\r\n            \r\n            var modalContent = $(\r\n                '<div class=\"modal fade\" tabindex=\"-1\" id=\"modal-carousel-content\">' +\r\n                '    <div class=\"modal-dialog modal-lg\">' +\r\n                '        <div class=\"modal-content\">' +\r\n                '            <div class=\"modal-header\">' +\r\n                '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>' +\r\n                '                <h4 class=\"modal-title\">Edit content</h4>' +\r\n                '            </div>' +\r\n                '            <div class=\"modal-body\">' +\r\n                '                <textarea id=\"modal-carousel-content-body\" class=\"form-control\" rows=\"12\"></textarea>' +\r\n                '            </div>' +\r\n                '            <div class=\"modal-footer\">' +\r\n                '                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>' +\r\n                '                <button type=\"button\" class=\"btn btn-primary btn-carousel-save-content\">Save</button>' +\r\n                '            </div>' +\r\n                '        </div>' +\r\n                '    </div>' +\r\n                '</div>'\r\n            ).appendTo(document.body);\r\n            \r\n            var contentOptions = $.extend({}, keditor.options.ckeditorOptions);\r\n            contentOptions.removePlugins = contentOptions.removePlugins.replace(',autogrow', '') + ',sourcedialog';\r\n            contentOptions.extraPlugins = contentOptions.extraPlugins + ',autogrow';\r\n            var editorContent = $('#modal-carousel-content-body').ckeditor(contentOptions).editor;\r\n            \r\n            modalContent.on('hidden.bs.modal', function () {\r\n                editorContent.setData('');\r\n                self.editingItemId = '';\r\n            });\r\n            \r\n            modalContent.find('.btn-carousel-save-content').on('click', function (e) {\r\n                e.preventDefault();\r\n                \r\n                flog('Keditor carousel add content');\r\n                \r\n                var carouselContent = editorContent.getData() || '';\r\n                self.addItemToList(form, {\r\n                    content: carouselContent\r\n                });\r\n                \r\n                self.refreshCarousel(keditor.getSettingComponent(), form);\r\n                modalContent.modal('hide');\r\n            });\r\n            \r\n            return editorContent;\r\n        },\r\n        \r\n        initModalCaption: function (form, keditor) {\r\n            var self = this;\r\n            \r\n            var modalCaption = $(\r\n                '<div class=\"modal fade\" tabindex=\"-1\" id=\"modal-carousel-caption\">' +\r\n                '    <div class=\"modal-dialog modal-lg\">' +\r\n                '        <div class=\"modal-content\">' +\r\n                '            <div class=\"modal-header\">' +\r\n                '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>' +\r\n                '                <h4 class=\"modal-title\">Edit caption</h4>' +\r\n                '            </div>' +\r\n                '            <div class=\"modal-body\">' +\r\n                '                <textarea id=\"modal-carousel-caption-body\" class=\"form-control\" rows=\"12\"></textarea>' +\r\n                '            </div>' +\r\n                '            <div class=\"modal-footer\">' +\r\n                '                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>' +\r\n                '                <button type=\"button\" class=\"btn btn-primary btn-carousel-save-caption\">Save</button>' +\r\n                '            </div>' +\r\n                '        </div>' +\r\n                '    </div>' +\r\n                '</div>'\r\n            ).appendTo(document.body);\r\n            \r\n            var captionOptions = $.extend({}, keditor.options.ckeditorOptions);\r\n            captionOptions.removePlugins = captionOptions.removePlugins.replace(',autogrow', '') + ',sourcedialog';\r\n            captionOptions.extraPlugins = captionOptions.extraPlugins + ',autogrow';\r\n            captionOptions.toolbarGroups = toolbarSets['Lite'];\r\n            var editorCaption = $('#modal-carousel-caption-body').ckeditor(captionOptions).editor;\r\n            \r\n            modalCaption.on('hidden.bs.modal', function () {\r\n                editorCaption.setData('');\r\n                self.editingItemId = '';\r\n            });\r\n            \r\n            modalCaption.find('.btn-carousel-save-caption').on('click', function (e) {\r\n                e.preventDefault();\r\n                \r\n                flog('Keditor carousel add content');\r\n                \r\n                var carouselCaption = editorCaption.getData() || '';\r\n                var item = form.find('#' + self.editingItemId).find('.img-responsive');\r\n                self.addItemToList(form, {\r\n                    src: item.attr('src'),\r\n                    hash: item.attr('data-hash'),\r\n                    caption: carouselCaption\r\n                });\r\n                \r\n                self.refreshCarousel(keditor.getSettingComponent(), form);\r\n                modalCaption.modal('hide');\r\n            });\r\n            \r\n            return editorCaption;\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            var self = this;\r\n            self.editingItemId = '';\r\n            form.find('.carouselItemsWrap').html('');\r\n            component.find('.carousel-inner > .item').each(function () {\r\n                var item = $(this);\r\n                var carouselImg = item.find('.carousel-img');\r\n                var carouselContent = item.find('.carousel-content');\r\n                \r\n                if (carouselContent.length > 0) {\r\n                    self.addItemToList(form, {\r\n                        content: carouselContent.html()\r\n                    });\r\n                } else {\r\n                    var url = carouselImg.css('background-image');\r\n                    url = url.slice(4, -1).replace(/['\"]/g, '');\r\n                    var hash = $(item).attr('data-hash');\r\n                    var caption = item.find('.carousel-caption');\r\n                    \r\n                    self.addItemToList(form, {\r\n                        src: url,\r\n                        hash: hash,\r\n                        caption: caption.html() || ''\r\n                    });\r\n                }\r\n            });\r\n            \r\n            var carousel = component.find('.carousel');\r\n            var isWrap = carousel.attr('data-wrap');\r\n            var pause = carousel.attr('data-pause');\r\n            var interval = carousel.attr('data-interval');\r\n            var height = carousel.attr('data-height');\r\n            \r\n            form.find('.carouselPause').val(pause);\r\n            form.find('.carouselInterval').val(interval);\r\n            form.find('.carouselWrap').prop('checked', isWrap === 'true');\r\n            form.find('.carouselHeight').val(height);\r\n            form.find('.select-image-size').val(carousel.attr('data-image-size') || 'stretched');\r\n            \r\n            $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/iconset/iconset-fontawesome-4.2.0.min.js', function () {\r\n                $.getScriptOnce('/static/bootstrap-iconpicker/1.7.0/js/bootstrap-iconpicker.min.js', function () {\r\n                    var iconPrev = carousel.find('.glyphicon-chevron-left').attr('class') || '';\r\n                    iconPrev = iconPrev.replace('glyphicon-chevron-left', '').replace('fa', '').trim();\r\n                    form.find('.btn-prev-icon').find('i').attr('class', 'fa ' + iconPrev).end().find('input').val(iconPrev);\r\n                    \r\n                    var iconNext = carousel.find('.glyphicon-chevron-right').attr('class') || '';\r\n                    iconNext = iconNext.replace('glyphicon-chevron-right', '').replace('fa', '').trim();\r\n                    form.find('.btn-next-icon').find('i').attr('class', 'fa ' + iconNext).end().find('input').val(iconNext);\r\n                });\r\n            });\r\n        },\r\n        \r\n        addItemToCarousel: function (component, data) {\r\n            flog('addItemToCarousel', component, data);\r\n            \r\n            var carousel = component.find('.carousel');\r\n            var carouselInner = carousel.find('.carousel-inner');\r\n            var id = carousel.attr('id');\r\n            var index = carouselInner.children().length;\r\n            var cls = index === 0 ? 'active' : '';\r\n            var backgroundUrl = \"background-image: url('\" + data.src + \"')\";\r\n            var backgroundSize = carousel.attr('data-image-size') === 'centered' ? ';background-size: unset' : '';\r\n            \r\n            carousel.find('.carousel-indicators').append(\r\n                '<li data-target=\"#' + id + '\" data-slide-to=\"' + index + '\" class=\"' + cls + '\"></li>'\r\n            );\r\n            \r\n            var itemStr = '';\r\n            if (data.content) {\r\n                itemStr += '<div class=\"item ' + cls + '\">';\r\n                itemStr += '   <div class=\"carousel-content clearfix\">' + data.content + '</div>';\r\n                itemStr += '   <div class=\"carousel-caption\"></div>';\r\n                itemStr += '</div>';\r\n            } else {\r\n                itemStr += '<div data-hash=\"' + data.hash + '\" class=\"item ' + cls + '\">';\r\n                itemStr += '   <div class=\"carousel-img\" style=\"' + backgroundUrl + backgroundSize + '\"></div>';\r\n                itemStr += '   <div class=\"carousel-caption\">' + data.caption + '</div>';\r\n                itemStr += '</div>';\r\n            }\r\n            \r\n            carouselInner.append(itemStr);\r\n        },\r\n        \r\n        addItemToList: function (form, data) {\r\n            flog('addItemToList', form, data);\r\n            \r\n            var editCaption = '';\r\n            \r\n            var itemStr = '';\r\n            if (data.content) {\r\n                itemStr += '<img class=\"img-responsive\" src=\"/theme/apps/keditor-lib/componentCarouselContent.png\" />';\r\n                itemStr += '<textarea style=\"display: none\" class=\"txt-carousel-content\">' + data.content + '</textarea>';\r\n            } else {\r\n                itemStr += '<img class=\"img-responsive\" src=\"' + data.src + '\" data-hash=\"' + data.hash + '\" />';\r\n                itemStr += '<textarea style=\"display: none\" class=\"txt-carousel-caption\">' + data.caption + '</textarea>';\r\n                editCaption = '<a title=\"Edit caption\" class=\"btn btn-success btn-edit-caption-item\" href=\"#\"><i class=\"fa fa-file\"></i></a>';\r\n            }\r\n            \r\n            itemStr += '   <div class=\"btn-group btn-group-xs\">';\r\n            itemStr += '       <a title=\"Reorder item\" class=\"btn btn-info btn-sort-item\" href=\"#\"><i class=\"fa fa-sort\"></i></a>';\r\n            itemStr += '       <a title=\"Edit item\" class=\"btn btn-primary btn-edit-item\" href=\"#\"><i class=\"fa fa-edit\"></i></a>' + editCaption;\r\n            itemStr += '       <a title=\"Delete item\" class=\"btn btn-danger btn-remove-item\" href=\"#\"><i class=\"fa fa-trash\"></i></a>';\r\n            itemStr += '   </div>';\r\n            \r\n            if (this.editingItemId) {\r\n                form.find('#' + this.editingItemId).html(itemStr);\r\n                this.editingItemId = '';\r\n            } else {\r\n                form.find('.carouselItemsWrap').append(\r\n                    '<div class=\"carouselItem\" id=\"carouselItem-' + (new Date()).getTime() + '\">' + itemStr + '</div>'\r\n                );\r\n            }\r\n        },\r\n        \r\n        refreshCarousel: function (component, form) {\r\n            var self = this;\r\n            var carousel = component.find('.carousel');\r\n            carousel.find('.carousel-inner').html('');\r\n            carousel.find('.carousel-indicators').html('');\r\n            \r\n            form.find('.carouselItemsWrap').find('.carouselItem').each(function () {\r\n                var carouselItem = $(this);\r\n                var txtContent = carouselItem.find('.txt-carousel-content');\r\n                var txtCaption = carouselItem.find('.txt-carousel-caption');\r\n                var img = carouselItem.find('img');\r\n                \r\n                if (txtContent.length === 0) {\r\n                    self.addItemToCarousel(component, {\r\n                        src: img.attr('src'),\r\n                        hash: img.attr('data-hash'),\r\n                        caption: txtCaption.val()\r\n                    });\r\n                } else {\r\n                    self.addItemToCarousel(component, {\r\n                        content: txtContent.val()\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n})(jQuery);\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['form'] = {\r\n        initFormBuilder: function (component) {\r\n            var self = this;\r\n            \r\n            $.getScriptOnce('/static/formBuilder/2.5.3/form-builder.min.js', function () {\r\n                $.getScriptOnce('/static/formBuilder/2.5.3/form-render.min.js', function () {\r\n                    var formBuilderArea = component.find('.form-builder-area');\r\n                    var formData = component.find('.form-data');\r\n                    var formContent = component.find('.form-content');\r\n                    \r\n                    component.find('.keditor-component-content').prepend(\r\n                        '<p class=\"form-builder-tools\" style=\"text-align: right;\">' +\r\n                        '    <a href=\"#\" class=\"btn btn-primary btn-preview-form\">Preview form</a> ' +\r\n                        '    <a href=\"#\" class=\"btn btn-info btn-edit-form disabled\">Edit form</a>' +\r\n                        '</p>'\r\n                    );\r\n                    \r\n                    var btnEditForm = component.find('.btn-edit-form');\r\n                    var btnPreviewForm = component.find('.btn-preview-form');\r\n                    \r\n                    formBuilderArea.formBuilder({\r\n                        disableInjectedStyle: true,\r\n                        showActionButtons: false,\r\n                        dataType: 'json',\r\n                        formData: formData.html(),\r\n                        disableFields: [\r\n                            'autocomplete',\r\n                            'paragraph',\r\n                            'header'\r\n                        ],\r\n                        disabledAttrs: ['access'],\r\n                        \r\n                        typeUserDisabledAttrs: {\r\n                            'checkbox-group': [\r\n                                'toggle',\r\n                                'inline'\r\n                            ]\r\n                        }\r\n                    });\r\n                    \r\n                    btnEditForm.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        if (!btnEditForm.hasClass('disabled')) {\r\n                            formBuilderArea.show();\r\n                            formContent.hide();\r\n                            btnEditForm.addClass('disabled');\r\n                            btnPreviewForm.removeClass('disabled');\r\n                        }\r\n                    });\r\n                    \r\n                    btnPreviewForm.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        if (!btnPreviewForm.hasClass('disabled')) {\r\n                            self.renderForm(component);\r\n                            \r\n                            formBuilderArea.hide();\r\n                            formContent.show();\r\n                            btnEditForm.removeClass('disabled');\r\n                            btnPreviewForm.addClass('disabled');\r\n                        }\r\n                    });\r\n                })\r\n            });\r\n        },\r\n        \r\n        renderForm: function (component, formBuilder) {\r\n            var formContent = component.find('.form-content');\r\n            \r\n            if (!formBuilder) {\r\n                var formBuilderArea = component.find('.form-builder-area');\r\n                formBuilder = formBuilderArea.data('formBuilder');\r\n            }\r\n            \r\n            formContent.formRender({\r\n                dataType: 'json',\r\n                formData: formBuilder.actions.getData('json')\r\n            });\r\n            \r\n            if (formContent.hasClass('form-horizontal')) {\r\n                formContent.children('div').each(function () {\r\n                    var div = $(this);\r\n                    var dataGrid = formContent.attr('data-grid') || '4-8';\r\n                    dataGrid = dataGrid.split('-');\r\n                    \r\n                    if (div.attr('class')) {\r\n                        if (div.hasClass('fb-button')) {\r\n                            div.find('button').wrap('<div class=\"col-sm-' + dataGrid[1] + ' col-sm-offset-' + dataGrid[0] + '\"></div>');\r\n                        } else {\r\n                            var label = div.children('label');\r\n                            var input = div.children('input, select, textarea');\r\n                            var subDiv = div.children('div');\r\n                            \r\n                            label.addClass('control-label col-sm-' + dataGrid[0]);\r\n                            \r\n                            if (subDiv.length > 0) {\r\n                                subDiv.addClass('col-sm-' + dataGrid[1]);\r\n                            } else {\r\n                                input.addClass('form-control').wrap('<div class=\"col-sm-' + dataGrid[1] + '\"></div>');\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        \r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"form\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var formBuilder = component.find('.form-builder-area');\r\n            var formContent = component.find('.form-content');\r\n            var formData = component.find('.form-data');\r\n            \r\n            if (formData.length === 0) {\r\n                componentContent.append('<div class=\"form-data\" style=\"display: none !important;\"></div>')\r\n            }\r\n            \r\n            if (formContent.length === 0) {\r\n                componentContent.append('<form class=\"form-content\" style=\"display: none !important;\"></form>')\r\n            } else {\r\n                formContent.hide()\r\n            }\r\n            \r\n            if (formBuilder.length === 0) {\r\n                formBuilder = $('<div class=\"form-builder-area clearfix\"></div>');\r\n                componentContent.append(formBuilder);\r\n            }\r\n            \r\n            this.initFormBuilder(component);\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"form\" component', component);\r\n            \r\n            var self = this;\r\n            var componentContent = component.find('.keditor-component-content');\r\n            var formData = component.find('.form-data');\r\n            var formBuilderArea = $('#' + component.attr('id')).find('.form-builder-area');\r\n            var formBuilder = formBuilderArea.data('formBuilder');\r\n            \r\n            self.renderForm(component, formBuilder);\r\n            formData.html(formBuilder.actions.getData('json'));\r\n            component.find('.form-builder-area, .form-builder-tools').remove();\r\n            component.find('.form-content').show();\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Form Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"form\" component');\r\n            \r\n            var self = this;\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentFormSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    form.find('.txt-form-action').on('change', function () {\r\n                        var component = keditor.getSettingComponent();\r\n                        var formContent = component.find('.form-content');\r\n                        \r\n                        formContent.attr('action', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-method').on('change', function () {\r\n                        var component = keditor.getSettingComponent();\r\n                        var formContent = component.find('.form-content');\r\n                        \r\n                        formContent.attr('action', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-enctype').on('change', function () {\r\n                        var component = keditor.getSettingComponent();\r\n                        var formContent = component.find('.form-content');\r\n                        \r\n                        formContent.attr('enctype', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-layout').on('change', function () {\r\n                        var component = keditor.getSettingComponent();\r\n                        var formContent = component.find('.form-content');\r\n                        \r\n                        formContent.removeClass('form-inline form-horizontal');\r\n                        if (this.value) {\r\n                            formContent.addClass(this.value);\r\n                        }\r\n                        self.renderForm(component);\r\n                        form.find('.select-grid-wrapper').css('display', this.value === 'form-horizontal' ? 'block' : 'none');\r\n                    });\r\n                    \r\n                    form.find('.select-grid').on('change', function () {\r\n                        var component = keditor.getSettingComponent();\r\n                        var formContent = component.find('.form-content');\r\n                        \r\n                        formContent.attr('data-grid', this.value);\r\n                        self.renderForm(component);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"form\" component', component);\r\n            var formContent = component.find('.form-content');\r\n            \r\n            var layout = '';\r\n            if (formContent.hasClass('form-inline')) {\r\n                layout = 'form-inline';\r\n            } else if (formContent.hasClass('form-horizontal')) {\r\n                layout = 'form-horizontal';\r\n            }\r\n            \r\n            form.find('.txt-form-action').val(formContent.attr('action') || '');\r\n            form.find('.select-method').val(formContent.attr('method') || 'get');\r\n            form.find('.select-enctype').val(formContent.attr('enctype'));\r\n            form.find('.select-layout').val(layout);\r\n            form.find('.select-grid-wrapper').css('display', layout === 'form-horizontal' ? 'block' : 'none');\r\n            form.find('.select-grid').val(formContent.attr('data-grid') || '4-8');\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($, window) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['googlemap'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"googlemap\" component', component);\r\n            \r\n            this.callWhenGoogleMapReady(function () {\r\n                initKGoogleMap(component);\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"googlemap\" component', component);\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.googlemap-cover').remove();\r\n            component.find('.kgooglemap').html('');\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Google Map Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"googlemap\" settings', form);\r\n            var self = this;\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentGoogleMapSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    self.callWhenGoogleMapReady(function () {\r\n                        var component = keditor.getSettingComponent();\r\n                        self.initAutocomplete(component, form);\r\n                    });\r\n                    \r\n                    var mapTypes = form.find('.map-type');\r\n                    form.find('.mapType').on('click', function () {\r\n                        mapTypes.hide().filter('.' + this.value).show();\r\n                        \r\n                        var component = keditor.getSettingComponent();\r\n                        var iframe = component.find('iframe');\r\n                        var kgooglemap = component.find('.kgooglemap');\r\n                        component.attr('data-maptype', this.value);\r\n                        \r\n                        iframe[this.value === 'manually' ? 'hide' : 'show']();\r\n                        kgooglemap[this.value === 'manually' ? 'show' : 'hide']();\r\n                        \r\n                        if (this.value === 'manually') {\r\n                            self.makeGoogleMapFresh(form, component);\r\n                        }\r\n                    });\r\n                    \r\n                    form.find('[name=mapEmbedCode]').on('change', function () {\r\n                        var iframe = $(this.value);\r\n                        var src = iframe.attr('src');\r\n                        if (iframe.length > 0 && src && src.length > 0) {\r\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', src);\r\n                        } else {\r\n                            alert('Your Google Map embed code is invalid!');\r\n                        }\r\n                    });\r\n                    \r\n                    form.find('[name=mapRatio]').on('click', function () {\r\n                        var component = keditor.getSettingComponent();\r\n                        \r\n                        component.find('.embed-responsive').removeClass('embed-responsive-4by3 embed-responsive-16by9').addClass('embed-responsive-' + this.value);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        callWhenGoogleMapReady: function (callback) {\r\n            var self = this;\r\n            var apiKey = 'AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs';\r\n            var url = 'https://maps.googleapis.com/maps/api/js?key=' + apiKey + '&libraries=places';\r\n            \r\n            if (window.google && window.google.maps && google.maps.places) {\r\n                callback.call(self);\r\n            } else {\r\n                $.getScriptOnce(url, function () {\r\n                    callback.call(self);\r\n                });\r\n            }\r\n        },\r\n        \r\n        makeGoogleMapFresh: function (form, component) {\r\n            var input = form.find('[name=mapAddress]')[0];\r\n            \r\n            setTimeout(function () {\r\n                try {\r\n                    $(input).trigger('focus');\r\n                    // google.maps.event.trigger(input, 'focus');\r\n                    google.maps.event.trigger(input, 'keydown', {\r\n                        keyCode: 13\r\n                    });\r\n                } catch (e) {\r\n                    flog('===================', e);\r\n                }\r\n            }, 1000);\r\n            \r\n            var map = component.find('.kgooglemap').data('map');\r\n            setTimeout(function () {\r\n                google.maps.event.trigger(map, \"resize\");\r\n            }, 100);\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            var self = this;\r\n            \r\n            self.callWhenGoogleMapReady(function () {\r\n                var maptype = component.attr('data-maptype') || 'embed';\r\n                var place = component.attr('data-place');\r\n                \r\n                var ratio = component.find('.embed-responsive').hasClass('embed-responsive-16by9') ? '16by9' : '4by3';\r\n                form.find('.mapRatio[value=' + ratio + ']').prop('checked', true);\r\n                form.find('.mapType[value=' + maptype + ']').prop('checked', true);\r\n                \r\n                var src = component.find('iframe').attr('src');\r\n                var iframe = '<iframe class=\"embed-responsive-item\" src=\"' + src + '\"></iframe>';\r\n                if (!place) {\r\n                    place = 'Hanoi, Vietnam';\r\n                }\r\n                form.find('[name=mapAddress]').val(place);\r\n                form.find('[name=mapEmbedCode]').val(iframe);\r\n                \r\n                form.find('.map-type').hide().filter('.' + maptype).show();\r\n                \r\n                if (!component.find('.kgooglemap').data('map')) {\r\n                    self.initAutocomplete(component, form);\r\n                    \r\n                    if (maptype === 'manually') {\r\n                        self.makeGoogleMapFresh(form, component);\r\n                    }\r\n                } else {\r\n                    if (maptype === 'manually') {\r\n                        self.makeGoogleMapFresh(form, component);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        \r\n        initAutocomplete: function (component, form) {\r\n            if (component.find('.kgooglemap').data('map')) {\r\n                this.makeGoogleMapFresh(form, component);\r\n            } else {\r\n                var mapDiv = component.find('.kgooglemap')[0];\r\n                var map = new google.maps.Map(mapDiv, {\r\n                    zoom: 13,\r\n                    mapTypeId: 'roadmap'\r\n                });\r\n                \r\n                // Create the search box and link it to the UI element.\r\n                var input = form.find('[name=mapAddress]')[0];\r\n                var searchBox = new google.maps.places.SearchBox(input);\r\n                \r\n                // Bias the SearchBox results towards current map's viewport.\r\n                map.addListener('bounds_changed', function () {\r\n                    searchBox.setBounds(map.getBounds());\r\n                });\r\n                \r\n                var markers = [];\r\n                searchBox.addListener('places_changed', function () {\r\n                    var places = searchBox.getPlaces();\r\n                    \r\n                    if (places.length == 0) {\r\n                        return;\r\n                    }\r\n                    \r\n                    // Clear out the old markers.\r\n                    markers.forEach(function (marker) {\r\n                        marker.setMap(null);\r\n                    });\r\n                    markers = [];\r\n                    \r\n                    // For each place, get the icon, name and location.\r\n                    var bounds = new google.maps.LatLngBounds();\r\n                    places.forEach(function (place) {\r\n                        if (!place.geometry) {\r\n                            console.log(\"Returned place contains no geometry\");\r\n                            return;\r\n                        }\r\n                        \r\n                        var icon = {\r\n                            url: place.icon,\r\n                            size: new google.maps.Size(71, 71),\r\n                            origin: new google.maps.Point(0, 0),\r\n                            anchor: new google.maps.Point(17, 34),\r\n                            scaledSize: new google.maps.Size(25, 25)\r\n                        };\r\n                        \r\n                        // Create a marker for each place.\r\n                        markers.push(new google.maps.Marker({\r\n                            map: map,\r\n                            icon: icon,\r\n                            title: place.name,\r\n                            position: place.geometry.location\r\n                        }));\r\n                        \r\n                        if (place.geometry.viewport) {\r\n                            // Only geocodes have viewport.\r\n                            bounds.union(place.geometry.viewport);\r\n                        } else {\r\n                            bounds.extend(place.geometry.location);\r\n                        }\r\n                    });\r\n                    map.fitBounds(bounds);\r\n                    component.attr('data-place', input.value);\r\n                });\r\n                \r\n                component.find('.kgooglemap').data('map', map);\r\n            }\r\n        }\r\n    };\r\n    \r\n})(jQuery, window);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var contentEditor = $.contentEditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['jumbotron'] = {\r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Jumbotron Settings',\r\n        init: function (contentArea, container, component, keditor) {\r\n            var self = this;\r\n            var options = keditor.options;\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.prop('contenteditable', true);\r\n            \r\n            componentContent.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(keditor, e, component, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(keditor, e, container, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(keditor, e, contentArea);\r\n                }\r\n            });\r\n            \r\n            var editor = componentContent.ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n                \r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"jumbotron\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var id = componentContent.attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                return editor.getData();\r\n            } else {\r\n                return componentContent.html();\r\n            }\r\n        },\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"jumbotron\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentJumbotronSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    form.find('.chk-inverse').on('click', function () {\r\n                        var comp = keditor.getSettingComponent();\r\n                        comp.find('.jumbotron')[this.checked ? 'addClass' : 'removeClass']('jumbotron-inverse');\r\n                    });\r\n                    \r\n                    var buttonColorPicker = form.find('.button-color-picker');\r\n                    contentEditor.initSimpleColorPicker(buttonColorPicker, function (color) {\r\n                        var comp = keditor.getSettingComponent();\r\n                        comp.find('.jumbotron').css('background-color', color);\r\n                        comp.attr('data-bgcolor', color);\r\n                    });\r\n                    \r\n                    var paddingSettings = form.find('.paddingSettings');\r\n                    paddingSettings.on('change', function () {\r\n                        var paddingValue = this.value || '';\r\n                        var component = keditor.getSettingComponent();\r\n                        var paddingProp = $(this).attr('name');\r\n                        if (paddingValue.trim() === '') {\r\n                            component.find('.jumbotron').css(paddingProp, '');\r\n                        } else {\r\n                            if (isNaN(paddingValue)) {\r\n                                paddingValue = 0;\r\n                                this.value = paddingValue;\r\n                            }\r\n                            component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\r\n                        }\r\n                    });\r\n                    \r\n                    var marginSettings = form.find('.marginSettings');\r\n                    marginSettings.on('change', function () {\r\n                        var paddingValue = this.value || '';\r\n                        var component = keditor.getSettingComponent();\r\n                        var paddingProp = $(this).attr('name');\r\n                        if (paddingValue.trim() === '') {\r\n                            component.find('.jumbotron').css(paddingProp, '');\r\n                        } else {\r\n                            if (isNaN(paddingValue)) {\r\n                                paddingValue = 0;\r\n                                this.value = paddingValue;\r\n                            }\r\n                            component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"jumbotron\" component', component);\r\n            form.find('[name=button-color]').val(component.attr('data-bgcolor')).trigger('update');\r\n            form.find('.paddingSettings').each(function () {\r\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px', ''));\r\n            });\r\n            form.find('.marginSettings').each(function () {\r\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px', ''));\r\n            });\r\n            form.find('[name=showButton][value=false]').prop('checked', component.find('a').hasClass('hide'));\r\n            form.find('.chk-inverse').prop('checked', component.find('.jumbotron').hasClass('jumbotron-inverse'));\r\n        },\r\n        \r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n            \r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['ksvgmap'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            var script = component.find('script');\r\n            if (script.length) {\r\n                script.remove();\r\n            }\r\n            if (component.attr('data-height')) {\r\n                component.find('.ksvgmap').css('height', +component.attr('data-height'));\r\n            }\r\n            $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js', function () {\r\n                $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-au-mill.js', function () {\r\n                    component.find('.ksvgmap').vectorMap({\r\n                        map: 'au_mill',\r\n                        backgroundColor: '#fff',\r\n                        zoomButtons: false,\r\n                        focusOn: {\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            scale: 1\r\n                        },\r\n                        regionStyle: {\r\n                            initial: {\r\n                                fill: '#efefef'\r\n                            },\r\n                            hover: {\r\n                                fill: \"#00aa90\"\r\n                            }\r\n                        },\r\n                        onRegionTipShow: function (e, el, code) {\r\n                            if (component.attr('data-' + code))\r\n                                el.html(el.html() + ' - ' + component.attr('data-' + code));\r\n                        }\r\n                    });\r\n                    var i = setInterval(function () {\r\n                        try {\r\n                            var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\r\n                            map.updateSize();\r\n                            clearInterval(i);\r\n                        } catch (e) {\r\n                            flog('trying to get jvectormap object');\r\n                        }\r\n                    }, 50);\r\n                });\r\n            });\r\n        },\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"svgmap\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var script = '<script>$(function(){$(document.body).hasClass(\"content-editor-page\")||$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js\",function(){$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-au-mill.js\",function(){$(\".ksvgmap\").each(function(){var a=$(this).parents(\"[data-type=component-ksvgmap]\");a.hasClass(\"ksvgInit\")||(a.addClass(\"ksvgInit\"),$(this).vectorMap({map:\"au_mill\",backgroundColor:\"#fff\",zoomButtons:!1,scale:5,regionStyle:{initial:{fill:\"#efefef\"},hover:{fill:\"#00aa90\"}},onRegionTipShow:function(b,c,d){a.attr(\"data-\"+d)&&c.html(\"<span class=\\'vectormap-tip-region-name\\'>\"+c.html()+\"</span><span class=\\'vectormap-tip-separator\\'> - </span><span class=\\'vectormap-tip-region-data\\'>\"+a.attr(\"data-\"+d)+\"</span>\")}}))})})})});</script>';\r\n            var css = '<link rel=\"stylesheet\" href=\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.css\">';\r\n            component.find('.jvectormap-container').remove();\r\n            var arr = $(document.body).find('[data-type=\"component-ksvgmap\"]:not(.keditor-snippet)');\r\n            if (arr.length > 0) {\r\n                if ($(arr[arr.length - 1]).attr('id') === component.attr('id')) {\r\n                    $(css).insertBefore(component.find('.ksvgmap'));\r\n                    $(script).insertAfter(component.find('.ksvgmap'));\r\n                }\r\n            }\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'SVGMap Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"svgmap\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentKsvgMapSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var component = keditor.getSettingComponent();\r\n                    form.find('.state').on('change', function (e) {\r\n                        var val = component.attr('data-' + this.value);\r\n                        form.find('.stateMessage').val(val);\r\n                    });\r\n                    form.find('.stateMessage').on('change', function (e) {\r\n                        var currentState = form.find('.state').val();\r\n                        component.attr('data-' + currentState, this.value);\r\n                    });\r\n                    form.find('.height').on('change', function (e) {\r\n                        component.attr('data-height', this.value);\r\n                        component.find('.ksvgmap').css('height', this.value);\r\n                        var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\r\n                        map.updateSize();\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        showSettingForm: function (form, component, keditor) {\r\n            var height = component.attr('data-height');\r\n            var defaultState = form.find('.state').val();\r\n            form.find('.height').val(height);\r\n            form.find('.stateMessage').val(component.attr('data-' + defaultState));\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['media'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"media\" component', component);\r\n            \r\n            var options = keditor.options;\r\n            var componentContent = component.children('.keditor-component-content');\r\n            \r\n            var mediaBody = componentContent.find('.media-body');\r\n            mediaBody.addClass('clearfix');\r\n            \r\n            var mediaLeft = componentContent.find('.media-left');\r\n            var mediaLeftInner = componentContent.find('.media-left-inner');\r\n            if (mediaLeftInner.length === 0) {\r\n                mediaLeft.html('<div class=\"media-left-inner\">' + mediaLeft.html() + '</div>');\r\n            }\r\n            \r\n            if (!mediaBody.attr('id')) {\r\n                mediaBody.attr('id', keditor.generateId('component-text-content-inner'));\r\n            }\r\n            \r\n            mediaBody.prop('contenteditable', true);\r\n            mediaBody.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(keditor, e, component, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(keditor, e, container, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(keditor, e, contentArea);\r\n                }\r\n            });\r\n            \r\n            var editor = mediaBody.ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n                \r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"media\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var mediaBody = componentContent.find('.media-body');\r\n            \r\n            var id = mediaBody.attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                mediaBody.replaceWith('<div class=\"media-body clearfix\">' + editor.getData() + '</div>');\r\n            }\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n            \r\n            var id = component.find('.media-body').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Media Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"media\" component');\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentMediaSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    var txtLink = form.find('.photo-link');\r\n                    txtLink.on('change', function () {\r\n                        var link = this.value.trim();\r\n                        keditor.getSettingComponent().find('a').attr('href', link);\r\n                    });\r\n                    \r\n                    var cbbTarget = form.find('.photo-target');\r\n                    cbbTarget.on('change', function () {\r\n                        keditor.getSettingComponent().find('a').attr('target', this.value);\r\n                    });\r\n                    \r\n                    var chkLinkable = form.find('.photo-linkable');\r\n                    chkLinkable.on('click', function () {\r\n                        var img = keditor.getSettingComponent().find('img.media-object');\r\n                        \r\n                        if (chkLinkable.is(':checked')) {\r\n                            txtLink.prop('disabled', false);\r\n                            cbbTarget.prop('disabled', false);\r\n                            img.wrap('<a href=\"\"></a>');\r\n                        } else {\r\n                            txtLink.prop('disabled', true);\r\n                            cbbTarget.prop('disabled', true);\r\n                            img.unwrap('a');\r\n                        }\r\n                    });\r\n                    \r\n                    form.find('.photo-v-align').on('change', function () {\r\n                        var mediaLeft = keditor.getSettingComponent().find('.media-left');\r\n                        mediaLeft.css('vertical-align', this.value);\r\n                    });\r\n                    \r\n                    form.find('.photo-responsive').on('click', function () {\r\n                        keditor.getSettingComponent().find('img')[this.checked ? 'addClass' : 'removeClass']('img-responsive');\r\n                    });\r\n                    \r\n                    form.find('.photo-style').on('change', function () {\r\n                        var img = keditor.getSettingComponent().find('img.media-object');\r\n                        var val = this.value;\r\n                        \r\n                        img.removeClass('img-rounded img-circle img-thumbnail');\r\n                        if (val) {\r\n                            img.addClass(val);\r\n                        }\r\n                    });\r\n                    \r\n                    form.find('.photo-width').on('change', function () {\r\n                        var img = keditor.getSettingComponent().find('img.media-object');\r\n                        img.attr('width', this.value);\r\n                    });\r\n                    \r\n                    initMSelectImage(form.find('.photo-edit'), keditor, function (url, relativeUrl, fileType, hash, isAsset) {\r\n                        var img = keditor.getSettingComponent().find('img.media-object');\r\n                        var imgUrl = '/_hashes/files/' + hash;\r\n                        if (isAsset){\r\n                            imgUrl = url;\r\n                        }\r\n                        img.attr('src', '/_hashes/files/' + hash);\r\n                    });\r\n                    \r\n                    form.find('.left-width').on('change', function () {\r\n                        var mediaLeftInner = keditor.getSettingComponent().find('.media-left-inner');\r\n                        mediaLeftInner.css('width', this.value);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"media\" component', component);\r\n            \r\n            var inputVAlign = form.find('.photo-v-align');\r\n            var inputResponsive = form.find('.photo-responsive');\r\n            var inputWidth = form.find('.photo-width');\r\n            var cbbStyle = form.find('.photo-style');\r\n            var txtLink = form.find('.photo-link');\r\n            var cbbTarget = form.find('.photo-target');\r\n            var chkLinkable = form.find('.photo-linkable');\r\n            \r\n            var img = component.find('img.media-object');\r\n            var mediaLeft = component.find('.media-left');\r\n            var mediaLeftInner = component.find('.media-left-inner');\r\n            \r\n            form.find('.left-width').val((mediaLeftInner.get(0).style.width || '').replace('px', ''));\r\n            \r\n            var a = img.parent('a');\r\n            if (a.length > 0) {\r\n                chkLinkable.prop('checked', true);\r\n                txtLink.prop('disabled', false).val(a.attr('href'));\r\n                cbbTarget.prop('disabled', false).val(a.attr('target'));\r\n            } else {\r\n                chkLinkable.prop('checked', false);\r\n                txtLink.prop('disabled', true).val('');\r\n                cbbTarget.prop('disabled', true).val('');\r\n            }\r\n            \r\n            var valign = mediaLeft.css('vertical-align') || 'top';\r\n            \r\n            if (img.hasClass('img-rounded')) {\r\n                cbbStyle.val('img-rounded');\r\n            } else if (img.hasClass('img-circle')) {\r\n                cbbStyle.val('img-circle');\r\n            } else if (img.hasClass('img-thumbnail')) {\r\n                cbbStyle.val('img-thumbnail');\r\n            } else {\r\n                cbbStyle.val('');\r\n            }\r\n            \r\n            inputVAlign.val(valign);\r\n            inputResponsive.prop('checked', img.hasClass('img-responsive'));\r\n            inputWidth.val(img.attr('width'));\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var contentEditor = $.contentEditor;\r\n    var flog = KEditor.log;\r\n    \r\n    CKEDITOR.disableAutoInline = true;\r\n    CKEDITOR.dtd.$removeEmpty['i'] = false;\r\n    \r\n    // Text component\r\n    // ---------------------------------------------------------------------\r\n    KEditor.components['text'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"text\" component', component);\r\n            \r\n            var options = keditor.options;\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var ckeditorPlace = componentContent.find('.keditor-component-text-content-inner');\r\n            \r\n            if (ckeditorPlace.length === 0) {\r\n                var contentHtml = componentContent.html();\r\n                ckeditorPlace = $('<div class=\"keditor-component-text-content-inner clearfix\"></div>');\r\n                componentContent.html(ckeditorPlace);\r\n                ckeditorPlace.html(contentHtml);\r\n                ckeditorPlace.wrap('<div class=\"keditor-component-text-content\"></div>');\r\n            }\r\n            \r\n            if (!ckeditorPlace.attr('id')) {\r\n                ckeditorPlace.attr('id', keditor.generateId('component-text-content-inner'));\r\n            }\r\n            \r\n            ckeditorPlace.prop('contenteditable', true);\r\n            ckeditorPlace.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(keditor, e, component, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(keditor, e, container, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(keditor, e, contentArea);\r\n                }\r\n            });\r\n            \r\n            var editor = ckeditorPlace.ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function (e) {\r\n                flog('CKEditor is ready', component);\r\n                \r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n                if (options.iframeMode){\r\n                    e.editor.on('focus', function (e) {\r\n                        setTimeout(function () {\r\n                            $('#'+e.editor.id + '_top').parents('.'+e.editor.id).css('top', 0).css('position', 'fixed');\r\n                        }, 0);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"text\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var componentTextContent = componentContent.find('.keditor-component-text-content');\r\n            \r\n            var id = componentTextContent.children().attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                componentTextContent.html('<div class=\"keditor-component-text-content-inner clearfix\">' + editor.getData() + '</div>');\r\n            }\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n            \r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Text Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"text\" component');\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentTextSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    // =================================================================================\r\n                    // Backgrounds\r\n                    // =================================================================================\r\n                    initMSelectImage(form.find('.background-image-edit'), keditor, function (url, relUrl, type, hash, isAsset) {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        var imageUrl = 'http://' + window.location.host + '/_hashes/files/' + hash;\r\n                        if (isAsset){\r\n                            imageUrl = url;\r\n                        }\r\n                        target.css('background-image', 'url(\"' + imageUrl + '\")');\r\n                        form.find('.background-image-previewer').attr('src', imageUrl);\r\n                    });\r\n                    form.find('.background-image-delete').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('background-image', '');\r\n                        form.find('.background-image-previewer').attr('src', '/static/images/photo_holder.png');\r\n                    });\r\n                    \r\n                    var colorPicker = form.find('.txt-bg-color');\r\n                    contentEditor.initColorPicker(colorPicker, function (color) {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('background-color', color);\r\n                    });\r\n\r\n                    var textColorPicker = form.find('.txt-text-color');\r\n                    contentEditor.initColorPicker(textColorPicker, function (color) {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('color', color);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-repeat').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-repeat', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-size').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-size', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-position').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-position', this.value);\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Padding\r\n                    // =================================================================================\r\n                    form.find('.txt-padding').each(function () {\r\n                        var txt = $(this);\r\n                        var styleName = txt.attr('data-style-name');\r\n                        \r\n                        txt.on('change', function () {\r\n                            var paddingValue = this.value || '';\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\r\n                            \r\n                            if (paddingValue.trim() === '') {\r\n                                target.style[styleName] = '';\r\n                            } else {\r\n                                if (isNaN(paddingValue)) {\r\n                                    paddingValue = 0;\r\n                                    this.value = paddingValue;\r\n                                }\r\n                                target.style[styleName] = paddingValue + 'px';\r\n                            }\r\n                        });\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Margin\r\n                    // =================================================================================\r\n                    form.find('.txt-margin').each(function () {\r\n                        var txt = $(this);\r\n                        var styleName = txt.attr('data-style-name');\r\n                        \r\n                        txt.on('change', function () {\r\n                            var marginValue = this.value || '';\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\r\n                            \r\n                            if (marginValue.trim() === '') {\r\n                                target.style[styleName] = '';\r\n                            } else {\r\n                                if (isNaN(marginValue)) {\r\n                                    marginValue = 0;\r\n                                    this.value = marginValue;\r\n                                }\r\n                                target.style[styleName] = marginValue + 'px';\r\n                            }\r\n                        });\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Width and Height\r\n                    // =================================================================================\r\n                    form.find('.txt-height').on('change', function () {\r\n                        var height = this.value || '';\r\n                        if (isNaN(height)) {\r\n                            height = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('height', height);\r\n                    });\r\n                    \r\n                    form.find('.txt-min-height').on('change', function () {\r\n                        var minHeight = this.value || '';\r\n                        if (isNaN(minHeight)) {\r\n                            minHeight = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('min-height', minHeight + 'px');\r\n                    });\r\n                    \r\n                    form.find('.txt-max-height').on('change', function () {\r\n                        var maxHeight = this.value || '';\r\n                        if (isNaN(maxHeight)) {\r\n                            maxHeight = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('max-height', maxHeight + 'px');\r\n                    });\r\n                    \r\n                    form.find('.txt-width').on('change', function () {\r\n                        var width = this.value || '';\r\n                        if (isNaN(width)) {\r\n                            width = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('width', width);\r\n                    });\r\n                    \r\n                    form.find('.txt-min-width').on('change', function () {\r\n                        var minWidth = this.value || '';\r\n                        if (isNaN(minWidth)) {\r\n                            minWidth = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('min-width', minWidth + 'px');\r\n                    });\r\n                    \r\n                    form.find('.txt-max-width').on('change', function () {\r\n                        var maxWidth = this.value || '';\r\n                        if (isNaN(maxWidth)) {\r\n                            maxWidth = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('max-width', maxWidth + 'px');\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"text\" component', component);\r\n            \r\n            var target = component.find('.keditor-component-text-content').get(0);\r\n            \r\n            var imageUrl = target.style.backgroundImage;\r\n            imageUrl = (imageUrl || '').replace(/^url\\(['\"]+(.+)['\"]+\\)$/, '$1');\r\n            form.find('.background-image-previewer').attr('src', imageUrl !== 'none' && imageUrl !== '' ? imageUrl : '/static/images/photo_holder.png');\r\n            \r\n            form.find('.select-bg-repeat').val(target.style.backgroundRepeat || 'repeat');\r\n            form.find('.select-bg-position').val(target.style.backgroundPosition || '0% 0%');\r\n            form.find('.select-bg-size').val(target.style.backgroundSize || 'auto');\r\n\r\n            if (target.style.backgroundColor){\r\n                form.find('.txt-bg-color').colorpicker('setValue', target.style.backgroundColor);\r\n            }\r\n            if (target.style.color){\r\n                form.find('.txt-text-color').colorpicker('setValue', target.style.color);\r\n            }\r\n\r\n            form.find('.txt-padding').each(function () {\r\n                var txt = $(this);\r\n                var styleName = txt.attr('data-style-name');\r\n                \r\n                txt.val((target.style[styleName] || '').replace('px', ''));\r\n            });\r\n            form.find('.txt-margin').each(function () {\r\n                var txt = $(this);\r\n                var styleName = txt.attr('data-style-name');\r\n                \r\n                txt.val((target.style[styleName] || '').replace('px', ''));\r\n            });\r\n            \r\n            form.find('.txt-height').val((target.style.height || '').replace('px', ''));\r\n            form.find('.txt-min-height').val((target.style.minHeight || '').replace('px', ''));\r\n            form.find('.txt-max-height').val((target.style.maxHeight || '').replace('px', ''));\r\n            form.find('.txt-width').val((target.style.width || '').replace('px', ''));\r\n            form.find('.txt-min-with').val((target.style.minWidth || '').replace('px', ''));\r\n            form.find('.txt-max-with').val((target.style.maxWidth || '').replace('px', ''));\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['thumbnail'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"thumbnail\" component', component);\r\n            \r\n            var options = keditor.options;\r\n            var componentContent = component.children('.keditor-component-content');\r\n            \r\n            var caption = componentContent.find('.caption');\r\n            caption.addClass('clearfix');\r\n            \r\n            var captionInner = caption.find('.caption-inner');\r\n            if (captionInner.length === 0) {\r\n                caption.html('<div class=\"caption-inner\">' + caption.html() + '</div>');\r\n                captionInner = caption.find('.caption-inner');\r\n            }\r\n            \r\n            if (!captionInner.attr('id')) {\r\n                captionInner.attr('id', keditor.generateId('component-text-content-inner'));\r\n            }\r\n            \r\n            captionInner.prop('contenteditable', true);\r\n            captionInner.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(keditor, e, component, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(keditor, e, container, contentArea);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(keditor, e, contentArea);\r\n                }\r\n            });\r\n            \r\n            var editor = captionInner.ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n                \r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"thumbnail\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var caption = componentContent.find('.caption');\r\n            var captionInner = caption.find('.caption-inner');\r\n            \r\n            var id = captionInner.attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                caption.html(editor.getData());\r\n            }\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n            \r\n            var id = component.find('.caption-inner').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Thumbnail Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"thumbnail\" component');\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentThumbnailSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    initMSelectImage(form.find('.photo-edit'), keditor, function (url, relativeUrl, fileType, hash, isAsset) {\r\n                        var img = keditor.getSettingComponent().find('.thumbnail img');\r\n                        var imgUrl = '/_hashes/files/' + hash;\r\n                        if (isAsset){\r\n                            imgUrl = url;\r\n                        }\r\n                        img.attr('src', imgUrl);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"thumbnail\" component', component);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['vimeo'] = {\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"vimeo\" component', component);\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.vimeo-cover').remove();\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Vimeo Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"vimeo\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentVimeoSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var btnEdit = form.find('.btn-vimeo-edit');\r\n                    btnEdit.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var inputData = prompt('Please enter Vimeo URL in here:');\r\n                        var vimeoRegex = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\r\n                        var match = inputData.match(vimeoRegex);\r\n                        if (match && match[1]) {\r\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://player.vimeo.com/video/' + match[1] + '?byline=0&portrait=0&badge=0');\r\n                        } else {\r\n                            alert('Your Vimeo URL is invalid!');\r\n                        }\r\n                    });\r\n                    \r\n                    var btn169 = form.find('.btn-vimeo-169');\r\n                    btn169.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n                    });\r\n                    \r\n                    var btn43 = form.find('.btn-vimeo-43');\r\n                    btn43.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n                    });\r\n                    \r\n                    var chkAutoplay = form.find('#vimeo-autoplay');\r\n                    chkAutoplay.on('click', function () {\r\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\r\n                        var currentUrl = embedItem.attr('src');\r\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?byline=0&portrait=0&badge=0&autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\r\n                        \r\n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\r\n                        embedItem.attr('src', newUrl);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"vimeo\" component', component);\r\n            \r\n            var embedItem = component.find('.embed-responsive-item');\r\n            var chkAutoplay = form.find('#vimeo-autoplay');\r\n            var src = embedItem.attr('src');\r\n            \r\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['youtube'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"youtube\" component', component);\r\n            \r\n            component.find('iframe').attr('allowfullscreen', 'allowfullscreen');\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"youtube\" component', component);\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.youtube-cover').remove();\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Youtube Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"youtube\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/componentYoutubeSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var btnEdit = form.find('.btn-youtube-edit');\r\n                    btnEdit.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var inputData = prompt('Please enter Youtube URL in here:');\r\n                        if (inputData !== null) {\r\n                            var youtubeRegex = /^(?:http(?:s)?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:(?:watch)?\\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\\/))([^\\?&\\\"'>]+)/;\r\n                            var match = (inputData || '').match(youtubeRegex);\r\n                            if (match && match[1]) {\r\n                                keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://www.youtube.com/embed/' + match[1]);\r\n                            } else {\r\n                                alert('Your Youtube URL is invalid!');\r\n                            }\r\n                        }\r\n                    });\r\n                    \r\n                    var btn169 = form.find('.btn-youtube-169');\r\n                    btn169.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n                    });\r\n                    \r\n                    var btn43 = form.find('.btn-youtube-43');\r\n                    btn43.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n                    });\r\n                    \r\n                    var chkAutoplay = form.find('#youtube-autoplay');\r\n                    chkAutoplay.on('click', function () {\r\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\r\n                        var currentUrl = embedItem.attr('src');\r\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\r\n                        \r\n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\r\n                        embedItem.attr('src', newUrl);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"youtube\" component', component);\r\n            \r\n            var embedItem = component.find('.embed-responsive-item');\r\n            var chkAutoplay = form.find('#youtube-autoplay');\r\n            var src = embedItem.attr('src');\r\n            \r\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n"]}