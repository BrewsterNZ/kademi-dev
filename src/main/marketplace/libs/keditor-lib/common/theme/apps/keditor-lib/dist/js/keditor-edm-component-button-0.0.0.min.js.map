{"version":3,"sources":["keditor-edm-component-button-0.0.0.js"],"names":["$","KEditor","keditor","edmEditor","flog","log","components","settingEnabled","settingTitle","initSettingForm","form","ajax","url","type","dataType","success","resp","html","find","initDefaultComponentControls","buttonColorPicker","initSimpleColorPicker","color","buttonWrapper","getSettingComponent","attr","setStyles","txtBorderRadius","on","this","value","each","input","dataCss","initPaddingControl","txtText","text","trim","txtLink","href","mselect","mselectAll","pagePath","options","basePath","onSelectFile","relativeUrl","fileType","hash","isAsset","selectedUrl","val","window","location","host","trigger","buttonTextColorPicker","button","txtFontSize","cbbFontFamily","btn","name","e","preventDefault","hasClass","removeClass","addClass","get","style","btnsAlign","table","removeAttr","showSettingForm","component","showDefaultComponentControls","buttonInner","css","borderRadius","replace","propName","fontSize","toLowerCase","btnBold","fontWeight","btnItalic","align","filter","jQuery"],"mappings":"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","file":"keditor-edm-component-button-0.0.0.min.js","sourcesContent":["(function ($) {\r\n    var KEditor = $.keditor;\r\n    var edmEditor = $.edmEditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['button'] = {\r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Button Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"button\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/theme/apps/keditor-lib/edmComponentButtonSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    form = form.find('.form-horizontal');\r\n                    edmEditor.initDefaultComponentControls(form, keditor);\r\n                    \r\n                    var buttonColorPicker = form.find('.button-color-picker');\r\n                    edmEditor.initSimpleColorPicker(buttonColorPicker, function (color) {\r\n                        var buttonWrapper = keditor.getSettingComponent().find('.button-wrapper');\r\n                        buttonWrapper.attr('bgcolor', color);\r\n                        edmEditor.setStyles('background-color', color, buttonWrapper);\r\n                    });\r\n                    \r\n                    var txtBorderRadius = form.find('#button-border-radius');\r\n                    txtBorderRadius.on('change', function () {\r\n                        edmEditor.setStyles('border-radius', this.value + 'px', keditor.getSettingComponent().find('.button-wrapper'));\r\n                    });\r\n                    \r\n                    form.find('.button-inner-padding').each(function () {\r\n                        var input = $(this);\r\n                        var dataCss = input.attr('data-css');\r\n                        \r\n                        edmEditor.initPaddingControl(input, function (value) {\r\n                            edmEditor.setStyles(dataCss, value + 'px', keditor.getSettingComponent().find('.button-inner'));\r\n                        });\r\n                    });\r\n                    \r\n                    var txtText = form.find('#button-text');\r\n                    txtText.on('change', function () {\r\n                        var text = this.value || '';\r\n                        text = text.trim();\r\n                        \r\n                        keditor.getSettingComponent().find('.button-wrapper a').text(text);\r\n                    });\r\n                    \r\n                    var txtLink = form.find('#button-link');\r\n                    txtLink.on('change', function () {\r\n                        var href = this.value || '';\r\n                        href = href.trim();\r\n                        \r\n                        keditor.getSettingComponent().find('.button-wrapper a').attr(\"href\", href);\r\n                    });\r\n                    \r\n                    form.find('.btn-browse-file').mselect({\r\n                        mselectAll: true,\r\n                        pagePath: keditor.options.pagePath,\r\n                        basePath: keditor.options.basePath,\r\n                        onSelectFile: function (url, relativeUrl, fileType, hash, isAsset) {\r\n                            flog('onSelectFile', url, relativeUrl, fileType, hash, isAsset);\r\n                            var selectedUrl = isAsset ? url : ('/_hashes/files/' + hash);\r\n                            txtLink.val('http://' + window.location.host + selectedUrl).trigger('change');\r\n                        }\r\n                    });\r\n                    \r\n                    var buttonTextColorPicker = form.find('.button-color-text-picker');\r\n                    edmEditor.initSimpleColorPicker(buttonTextColorPicker, function (color) {\r\n                        var button = keditor.getSettingComponent().find('.button-wrapper a');\r\n                        edmEditor.setStyles('color', color, button);\r\n                    });\r\n                    \r\n                    var txtFontSize = form.find('#button-font-size');\r\n                    txtFontSize.on('change', function () {\r\n                        edmEditor.setStyles('font-size', (this.value > 0 ? this.value : 0) + 'px', keditor.getSettingComponent().find('.button-wrapper .button-inner'));\r\n                    });\r\n                    \r\n                    var cbbFontFamily = form.find('#button-font-family');\r\n                    cbbFontFamily.on('change', function () {\r\n                        edmEditor.setStyles('font-family', this.value, keditor.getSettingComponent().find('.button-wrapper .button-inner'));\r\n                    });\r\n                    \r\n                    form.find('.btn-style').each(function () {\r\n                        var btn = $(this);\r\n                        var name = btn.attr('data-prop');\r\n                        \r\n                        btn.on('click', function (e) {\r\n                            e.preventDefault();\r\n                            \r\n                            var value = btn.attr('data-value');\r\n                            if (btn.hasClass('active')) {\r\n                                btn.removeClass('active');\r\n                                value = '';\r\n                            } else {\r\n                                btn.addClass('active');\r\n                            }\r\n                            \r\n                            keditor.getSettingComponent().find('.button-wrapper a').get(0).style[name] = value;\r\n                        });\r\n                    });\r\n                    \r\n                    var btnsAlign = form.find('.btn-align');\r\n                    btnsAlign.each(function () {\r\n                        var btn = $(this);\r\n                        var value = btn.attr('data-value');\r\n                        \r\n                        btn.on('click', function (e) {\r\n                            e.preventDefault();\r\n                            \r\n                            if (!btn.hasClass('active')) {\r\n                                var table = keditor.getSettingComponent().find('.button-wrapper');\r\n                                \r\n                                btnsAlign.removeClass('active');\r\n                                btn.addClass('active');\r\n                                \r\n                                if (value === 'full') {\r\n                                    table.attr('width', '100%').attr('align', 'center');\r\n                                } else {\r\n                                    table.removeAttr('width').attr('align', value);\r\n                                }\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"button\" component', component);\r\n            \r\n            edmEditor.showDefaultComponentControls(form, component, keditor);\r\n            \r\n            var buttonWrapper = component.find('.button-wrapper');\r\n            var buttonInner = buttonWrapper.find('.button-inner');\r\n            var button = buttonInner.find('a');\r\n            \r\n            var buttonColorPicker = form.find('.button-color-picker');\r\n            buttonColorPicker.val(buttonWrapper.css('background-color') || '').trigger('update');\r\n            \r\n            var txtBorderRadius = form.find('#button-border-radius');\r\n            var borderRadius = buttonWrapper.css('border-radius');\r\n            txtBorderRadius.val(borderRadius ? borderRadius.replace('px', '') : '');\r\n            \r\n            form.find('.button-inner-padding').each(function () {\r\n                var input = $(this);\r\n                var propName = input.attr('data-css');\r\n                var value = buttonInner.css(propName);\r\n                \r\n                input.val(value ? value.replace('px', '') : '0');\r\n            });\r\n            \r\n            var txtText = form.find('#button-text');\r\n            txtText.val(button.text());\r\n            \r\n            var txtLink = form.find('#button-link');\r\n            txtLink.val(button.attr(\"href\"));\r\n            \r\n            var buttonTextColorPicker = form.find('.button-color-text-picker');\r\n            buttonTextColorPicker.val(button.css('color') || '').trigger('update');\r\n            \r\n            var txtFontSize = form.find('#button-font-size');\r\n            var fontSize = buttonInner.css('font-size');\r\n            txtFontSize.val(fontSize ? fontSize.replace('px', '') : '');\r\n            \r\n            var cbbFontFamily = form.find('#button-font-family');\r\n            cbbFontFamily.val(buttonInner.css('font-family').toLowerCase().replace(/,\\s/g, ',').replace(/\"/g, ''));\r\n            \r\n            var btnBold = form.find('.btn-bold');\r\n            var fontWeight = button.css('font-weight');\r\n            btnBold[fontWeight === '700' || fontWeight === 'bold' ? 'addClass' : 'removeClass']('active');\r\n            \r\n            var btnItalic = form.find('.btn-italic');\r\n            btnItalic[button.css('font-style') === 'italic' ? 'addClass' : 'removeClass']('active');\r\n            \r\n            var align = buttonWrapper.attr('align');\r\n            if (buttonWrapper.attr('width') === '100%') {\r\n                align = 'full';\r\n            }\r\n            form.find('.btn-align').removeClass('active').filter('[data-value=' + align + ']').addClass('active');\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n"]}