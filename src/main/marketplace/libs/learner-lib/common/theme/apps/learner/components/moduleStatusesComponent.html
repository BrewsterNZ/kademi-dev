#if( !$height )
#set( $height = 300 )
#end

#if( !$title )
#set( $title = "Module Statuses Table" )
#end

#set ($queryTableId = "query-component-tbody-" + $formatter.randomGuid)
#set ($queryCompId = "query-component-" + $formatter.randomGuid)
#set ($resp = $applications.get("learner-lib").call("buildTableModuleStatuses", $programCode, $courseCode, $moduleCode, $complete))
<div class="panel panel-default panel-query-table" id="$queryCompId" style="height: $!{height}px; min-height: 0; overflow-y: auto" data-items-per-page="$itemsPerPage" data-queryname="$query" data-querytype="$queryType">
    <div class="panel-heading">
        <i class="fa fa-table"></i> $title
    </div>
    <div class="panel-body">
        <div class="table-responsive">
            <table class="table table-striped table-condensed">
                <thead>
                <tr>
                   <th>Complete</th>
                   <th>Program code</th>
                   <th>Course code</th>
                   <th>Module code</th>
                   <th>Name</th>
                   <th>Start date</th>
                   <th>Progress</th>
                   <th>Expiry date</th>
                </tr>
                </thead>
                <tbody id="$queryTableId">
                    #if ($resp.hits.totalHits < 1)
                    <tr>
                        <td colspan="99">No result</td>
                    </tr>
                    #end
                    #foreach($hit in $resp.hits.hits)
                        <tr>
                            <td>$hit.source.complete</td>
                            <td>$hit.source.programCode</td>
                            <td>$hit.source.courseCode</td>
                            <td>$hit.source.moduleCode</td>
                            <td>$applications.userApp.findUserResourceById($hit.source.profile.toString()).extProfileBean.formattedName()</td>
                            <td>$!formatter.formatDate($formatter.parseDate($hit.source.createdDate))</td>
                            <td>$hit.source.percentComplete%</td>
                            <td>$!formatter.formatDate($formatter.parseDate($hit.source.expiryDate))</td>
                        </tr>
                    #end
                </tbody>
            </table>
        </div>
    </div>
    <div class="panel-footer">
        <ul class="pagination">
        </ul>
    </div>

</div>


