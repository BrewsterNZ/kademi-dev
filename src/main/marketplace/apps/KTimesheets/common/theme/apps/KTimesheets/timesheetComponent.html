<h1>Hello world</h1>

#set( $timesheet = $services.timesheetManager.timesheet )


<table class="table table-striped timesheet-table">
    #set( $days = $formatter.getDaysBetween($services.queryManager.commonStartDate, $formatter.addDays($services.queryManager.commonFinishDate,1)) )
    <thead>
        <tr>
            <th>Item</th>

            #foreach( $day in $days )
            <th>$formatter.formatDate($day)</th>
            #end
        </tr>
    </thead>
    <tbody>
        #foreach( $item in $timesheet.workItems )
        <tr>
            <td>
                #if( $item.class.simpleName == "Task" )
                <a href="/tasks/$item.id">$item.title</a>
                #elseif( $item.class.simpleName == "Lead" )
                <a href="/leads/$item.id">$item.title</a>
                #else
                $item
                #end
                <input type="hidden" class="form-control timesheet-item" name="item" value="$item" />
            </td>
            #foreach( $day in $days )
            <td>
                <input type="numeric" class="form-control timesheet-hours" name="hours" step="0.1" value="$!timesheet.getHours($day, $item)" data-day="$formatter.formatDate($day)"/>
            </td>
            #end
        </tr>
        #end


        <tr>
            <td>
                <input type="text" class="form-control timesheet-item" name="item" />
            </td>
            #foreach( $day in $days )
            <td>
                <input type="numeric" class="form-control timesheet-hours" name="hours" step="0.1" data-day="$formatter.formatDate($day)" />
            </td>
            #end
        </tr>
    </tbody>
</table>

<table class="table">
#foreach( $entry in $timesheet.entries )
<tr>
    <td>
        $!entry.task / $!entry.lead / $!entry.label
    </td>
    <td>$entry.workedDate</td>
    <td>$entry.hours</td>
</tr>
#end
</table>