/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var i=t.keditor,a=i.log;i.components.audio={init:function(i,e,o,r){a('init "audio" component',o),this.component=o;var s=o.find("img[data-src]"),n="";s.attr("id")?n=s.attr("id"):(n=r.generateId("component-audio"),s.attr("id",n)),s.parent().hasClass("audio-wrapper")||s.wrap('<div class="audio-wrapper"></div>'),this.src=s.attr("data-src"),this.width=s.attr("data-width"),this.autostart="true"===s.attr("data-autostart");var d=this;t.getScriptOnce("/static/jwplayer/6.10/jwplayer.js",function(){jwplayer.key="cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=",d.buildJWAudioPlayerPreview(n)})},getContent:function(t,i){a('getContent "audio" component',t);var e=t.find("img[data-src]"),o=e.attr("id"),r='<img data-componentId="'+o+'" src="/theme/apps/content/preview/audio.png" data-autostart="'+this.autostart+'" data-width="'+this.width+'" data-src="'+this.src+'" data-kaudio="'+this.src+'" />';return r},settingEnabled:!0,settingTitle:"Audio settings",initSettingForm:function(t,i){a('init "audio" settings',t),t.append('<form class="form-horizontal"><div class="form-group"><label for="audioFileInput" class="col-sm-12">Audio file</label><div class="col-sm-12"><div class="audio-toolbar"><a href="#" class="btn-audioFileInput btn btn-sm btn-primary"><i class="fa fa-upload"></i></a><input id="audioFileInput" type="file" style="display: none"></div></div></div><div class="form-group"><label for="audio-autoplay" class="col-sm-12">Autoplay</label><div class="col-sm-12"><input type="checkbox" id="audio-autoplay" /></div></div><div class="form-group"><label for="audio-width" class="col-sm-12">Width (px)</label><div class="col-sm-12"><input type="number" id="audio-width" min="200" max="500" class="form-control" value="300" /></div></div></form>')},showSettingForm:function(t,i,e){a('showSettingForm "audio" component',t,i);var o=this,r=t.find(".btn-audioFileInput");r.mselect({contentTypes:["audio"],bs3Modal:!0,pagePath:window.location.pathname.replace("contenteditor",""),onSelectFile:function(t){o.src=t,o.refreshAudioPlayerPreview()}});var s=i.find("img[data-src]"),n=s.attr("id"),d=t.find("#audio-autoplay");this.autostart&&d.prop("checked",!0),d.on("click",function(t){o.autostart=this.checked,o.buildJWAudioPlayerPreview(n)});var l=t.find("#audio-width");l.val(this.width),l.on("change",function(){o.width=this.value,o.resizeAudioPlayerPreview()})},buildJWAudioPlayerPreview:function(t){var i=this.width,a=this.src,e=this.autostart,o=jwplayer(t);o.setup({file:a,width:i,height:30,autostart:e,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",primary:"flash"}),o.onReady(function(){log("jwplayer preview init done")})},refreshAudioPlayerPreview:function(){var t=this,i=jwplayer(t.componentId),a=t.src;i.load([{file:a}]),i.play()},resizeAudioPlayerPreview:function(){var t=this,i=jwplayer(t.componentId),a=t.width;i.resize(a,30)}}}(jQuery);
//# sourceMappingURL=keditor-component-audio-0.0.0.min.js.map
