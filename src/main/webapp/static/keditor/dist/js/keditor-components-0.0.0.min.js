!function(e){var t=e.keditor,o=t.log;t.components.audio={init:function(t,a,i,n){o('init "audio" component',i),this.component=i;var s=i.find("img[data-src]"),r="";s.attr("id")?r=s.attr("id"):(r=n.generateId("component-audio"),s.attr("id",r)),s.parent().hasClass("audio-wrapper")||s.wrap('<div class="audio-wrapper"></div>'),this.src=s.attr("data-src"),this.width=s.attr("data-width"),this.autostart="true"===s.attr("data-autostart");var l=this;e.getScriptOnce("/static/jwplayer/6.10/jwplayer.js",function(){jwplayer.key="cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=",l.buildJWAudioPlayerPreview(r)})},getContent:function(e,t){o('getContent "audio" component',e);var a=e.find("img[data-src]"),i=a.attr("id"),n='<img data-componentId="'+i+'" src="/theme/apps/content/preview/audio.png" data-autostart="'+this.autostart+'" data-width="'+this.width+'" data-src="'+this.src+'" data-kaudio="'+this.src+'" />';return n},settingEnabled:!0,settingTitle:"Audio settings",initSettingForm:function(e,t){o('init "audio" settings',e),e.append('<form class="form-horizontal"><div class="form-group"><label for="audioFileInput" class="col-sm-12">Audio file</label><div class="col-sm-12"><div class="audio-toolbar"><a href="#" class="btn-audioFileInput btn btn-sm btn-primary"><i class="fa fa-upload"></i></a><input id="audioFileInput" type="file" style="display: none"></div></div></div><div class="form-group"><label for="audio-autoplay" class="col-sm-12">Autoplay</label><div class="col-sm-12"><input type="checkbox" id="audio-autoplay" /></div></div><div class="form-group"><label for="audio-width" class="col-sm-12">Width (px)</label><div class="col-sm-12"><input type="number" id="audio-width" min="200" max="500" class="form-control" value="300" /></div></div></form>')},showSettingForm:function(e,t,a){o('showSettingForm "audio" component',e,t);var i=this,n=e.find(".btn-audioFileInput");n.mselect({contentTypes:["audio"],bs3Modal:!0,pagePath:window.location.pathname.replace("contenteditor",""),onSelectFile:function(e){i.src=e,i.refreshAudioPlayerPreview()}});var s=t.find("img[data-src]"),r=s.attr("id"),l=e.find("#audio-autoplay");this.autostart&&l.prop("checked",!0),l.on("click",function(e){i.autostart=this.checked,i.buildJWAudioPlayerPreview(r)});var d=e.find("#audio-width");d.val(this.width),d.on("change",function(){i.width=this.value,i.resizeAudioPlayerPreview()})},buildJWAudioPlayerPreview:function(e){var t=this.width,o=this.src,a=this.autostart,i=jwplayer(e);i.setup({file:o,width:t,height:30,autostart:a,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",primary:"flash"}),i.onReady(function(){log("jwplayer preview init done")})},refreshAudioPlayerPreview:function(){var e=this,t=jwplayer(e.componentId),o=e.src;t.load([{file:o}]),t.play()},resizeAudioPlayerPreview:function(){var e=this,t=jwplayer(e.componentId),o=e.width;t.resize(o,30)}}}(jQuery),function(e){var t=e.keditor,o=t.log;t.components.carousel={init:function(e,t,a,i){o('init "carousel" component',a);var n=a.children(".keditor-component-content"),s=n.find(".carousel");if(!s.attr("id")){var r=i.generateId("component-carousel");s.attr("id",r),s.find(".carousel-indicators li").attr("data-target",r),s.find(".carousel-control").attr("href","#"+r)}},getContent:function(e,t){var o=e.children(".keditor-component-content");return o.html()},settingEnabled:!0,settingTitle:"Carousel settings",initSettingForm:function(t,a){t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <div class="carouselImageWrap"></div>       </div>   </div>   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary carouselAddImage"><i class="fa fa-plus"></i> Add Image</button>       </div>   </div>   <div class="form-group">       <label for="photo-responsive" class="col-sm-12">Cycle continuously</label>       <div class="col-sm-12">           <input type="checkbox" class="carouselWrap" />       </div>   </div>   <div class="form-group">       <label for="photo-align" class="col-sm-12">Pause</label>       <div class="col-sm-12">           <select class="form-control carouselPause">               <option selected value="">No</option>               <option value="hover">Hover</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Interval</label>       <div class="col-sm-12">           <input type="number" class="form-control carouselInterval" value="5000" />       </div>   </div></form>');var i=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1),n=t.find(".carouselAddImage"),s=t.find(".carouselImageWrap"),r=this;n.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:i,basePath:i,onSelectFile:function(e,i,n,s){o("keditor carousel selected a file",e,s),r.addImageToList(t,e,s),r.addImageToCarousel(a.getSettingComponent(),e,s)}}),s.sortable({handle:".btn-sort-image",items:"> .carouselImageItem",axis:"y",tolerance:"pointer",sort:function(){e(this).removeClass("ui-state-default")},update:function(){r.rearrangeItems(a.getSettingComponent(),t)}}),e(document.body).on("click",".carouselImageItem a",function(t){t.preventDefault();var o=e(this).siblings("[data-hash]").attr("data-hash");r.refreshCarousel(a.getSettingComponent(),o),e(this).parent().remove()}),t.find(".carouselPause").on("change",function(e){e.preventDefault();var t=a.getSettingComponent().find(".carousel");t.attr("data-pause",this.value)}),t.find(".carouselInterval").on("change",function(e){e.preventDefault();var t=a.getSettingComponent().find(".carousel");t.attr("data-interval",this.value)}),t.find(".carouselWrap").on("click",function(e){var t=a.getSettingComponent().find(".carousel");this.checked?t.attr("data-wrap","true"):t.attr("data-wrap","false")})},showSettingForm:function(t,o,a){var i=this;t.find(".carouselImageWrap").html(""),o.find(".carousel-inner > .item").each(function(o,a){var n=e(a).find("img").attr("src"),s=e(a).attr("data-hash");i.addImageToList(t,n,s)});var n=o.find(".carousel").attr("data-wrap"),s=o.find(".carousel").attr("data-pause"),r=o.find(".carousel").attr("data-interval");t.find(".carouselPause").val(s),t.find(".carouselInterval").val(r),t.find(".carouselWrap").prop("checked","true"===n)},addImageToCarousel:function(e,t,o){var a=e.find(".carousel"),i=a.find(".carousel-indicators").children().length,n=0===i?"active":"";a.find(".carousel-indicators").append('<li data-target="'+a.attr("id")+'" data-slide-to="'+i+'" class="'+n+'"></li>'),a.find(".carousel-inner").append('<div data-hash="'+o+'" class="item '+n+'">   <img src="'+t+'" alt="" width="100%" height="" />   <div class="carousel-caption"></div></div>')},addImageToList:function(e,t,o){e.find(".carouselImageWrap").append('<div class="carouselImageItem">   <img class="img-responsive" src="'+t+'" data-hash="'+o+'" />   <div class="btn-group btn-group-sm">       <a class="btn btn-info btn-sort-image" href="#"><i class="fa fa-sort"></i></a>       <a title="Delete this image" class="btn btn-danger" href="#"><i class="fa fa-trash"></i></a>   </div></div>')},refreshCarousel:function(e,t){e.find("[data-hash="+t+"]").remove(),e.find(".carousel-inner .item.active").length||e.find(".carousel-inner .item:first-child").addClass("active"),e.find(".carousel-indicators li:last-child").remove()},rearrangeItems:function(t,o){var a=this,i=t.find(".carousel");i.find(".carousel-inner").html(""),i.find(".carousel-indicators").html(""),o.find(".carouselImageWrap").find(".carouselImageItem").each(function(){var o=e(this),i=o.find("img");a.addImageToCarousel(t,i.attr("src"),i.attr("data-hash"))})}}}(jQuery),function(e){var t=e.keditor,o=t.log;t.components.googlemap={init:function(t,o,a,i){var n=a.find("script");n.length&&n.remove(),a.removeAttr("data-firstLoad");var s=a.attr("data-place"),r=a.attr("data-maptype");s&&"manually"===r&&e(window).on("load",function(){a.find(".btn-component-setting").trigger("click")})},getContent:function(e,t){o('getContent "googlemap" component',e);var a=e.children(".keditor-component-content");a.find(".googlemap-cover").remove();e.attr("data-place"),e.attr("data-maptype");e.find(".kgooglemap").html("");var i='<script>$(function(){if(!$(document.body).hasClass("content-editor-page")){var apiKey="AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs";var s=document.createElement("script");s.type="text/javascript";s.async=true;s.defer=true;s.src="https://maps.googleapis.com/maps/api/js?key="+apiKey+"&callback=kgooglemapInit&libraries=places";$("head").append(s);window.kgooglemapInit=function(){var mapdiv=$(".kgooglemap").not(".hide");mapdiv.each(function(){var parent=$(this).parents("[data-type=component-googlemap]");if(parent.attr("data-maptype")!=="manually")return;var map=new google.maps.Map(this,{zoom:13,mapTypeId:"roadmap"});var place=parent.attr("data-place");var input=parent.find("input")[0];input.value=place;var searchBox=new google.maps.places.SearchBox(input);map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);setTimeout(function(){google.maps.event.trigger(input,"focus");google.maps.event.trigger(input,"keydown",{keyCode:13});},500);map.addListener("bounds_changed",function(){searchBox.setBounds(map.getBounds());});var markers=[];searchBox.addListener("places_changed",function(){var places=searchBox.getPlaces();if(places.length==0){return;}markers.forEach(function(marker){marker.setMap(null);});markers=[];var bounds=new google.maps.LatLngBounds();places.forEach(function(place){if(!place.geometry){console.log("Returned place contains no geometry");return;}var icon={url:place.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};markers.push(new google.maps.Marker({map:map,icon:icon,title:place.name,position:place.geometry.location}));if(place.geometry.viewport){bounds.union(place.geometry.viewport);}else{bounds.extend(place.geometry.location);}});map.fitBounds(bounds);});})}}});</script>';return e.find(".embed-responsive").append(i),a.html()},settingEnabled:!0,settingTitle:"Google Map Settings",initSettingForm:function(t,a){o('initSettingForm "googlemap" component');var i="AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs",n='<script src="https://maps.googleapis.com/maps/api/js?key='+i+'&callback=initKeditorMapSetting&libraries=places" async defer></script>';window.google&&window.google.maps&&google.maps.places&&(n=""),t.append(n+'<form class="form-horizontal" onsubmit="return false;">   <div class="form-group">       <label class="col-sm-12">Map type</label>       <div class="radio-inline">           <label class="radio-inline"><input checked type="radio" name="mapType" class="mapType" value="embed"> Embed</label>           <label class="radio-inline"><input type="radio" name="mapType" class="mapType" value="manually"> Manually</label>       </div>   </div>   <div class="form-group embed">       <div class="col-sm-12">           <textarea class="form-control" name="mapEmbedCode" placeholder="Embed code"></textarea>       </div>   </div>   <div class="form-group manually hide">       <div class="col-sm-12">           <input class="form-control" name="mapAddress" placeholder="Enter address" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-googlemap-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-googlemap-43">4:3</button>       </div>   </div></form>'),t.find(".mapType").on("click",function(o){if(this.checked){e("."+this.value).removeClass("hide");var i=t.find(".mapType").not(this).val();e("."+i).addClass("hide");var n=a.getSettingComponent();if(n.attr("data-maptype",this.value),"manually"===this.value)if(n.find("iframe").addClass("hide"),n.find(".kgooglemap").removeClass("hide"),n.find(".kgooglemap").data("map"))google.maps.event.trigger(n.find(".kgooglemap").data("map"),"resize");else{s.initAutocomplete(n,t);var r=t.find("[name=mapAddress]")[0],l=setInterval(function(){n.find(".kgooglemap").data("map")&&(clearInterval(l),google.maps.event.trigger(r,"focus"),google.maps.event.trigger(r,"keydown",{keyCode:13}))},100)}else n.find("iframe").removeClass("hide"),n.find(".kgooglemap").addClass("hide")}});var s=this;t.find("[name=mapEmbedCode]").on("change",function(){var t=e(this.value),o=t.attr("src");t.length>0&&o&&o.length>0?a.getSettingComponent().find(".embed-responsive-item").attr("src",o):alert("Your Google Map embed code is invalid!")});var r=t.find(".btn-googlemap-169"),l=t.find(".btn-googlemap-43");r.on("click",function(t){t.preventDefault(),e(this).addClass("btn-primary").removeClass("btn-default"),l.removeClass("btn-primary").addClass("btn-default"),a.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9");var o=a.getSettingComponent();"manually"===o.attr("maptype")&&o.find(".kgooglemap").data("map")&&google.maps.event.trigger(o.find(".kgooglemap").data("map"),"resize")}),l.on("click",function(t){t.preventDefault(),e(this).addClass("btn-primary").removeClass("btn-default"),r.removeClass("btn-primary").addClass("btn-default"),a.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3");var o=a.getSettingComponent();"manually"===o.attr("maptype")&&o.find(".kgooglemap").data("map")&&google.maps.event.trigger(o.find(".kgooglemap").data("map"),"resize")})},showSettingForm:function(e,t,o){var a=this,i=t.attr("data-maptype"),n=t.attr("data-place"),s=t.find(".embed-responsive").hasClass("embed-responsive-16by9"),r=t.find(".embed-responsive").hasClass("embed-responsive-4by3");r&&e.find(".btn-googlemap-43").addClass("btn-primary").removeClass("btn-default"),s&&e.find(".btn-googlemap-169").addClass("btn-primary").removeClass("btn-default"),e.find(".mapType[value="+i+"]").prop("checked",!0);var l=t.find("iframe").attr("src"),d='<iframe class="embed-responsive-item" src="'+l+'"></iframe>';n||(n="Hanoi, Vietnam"),e.find("[name=mapAddress]").val(n),e.find("[name=mapEmbedCode]").val(d);var c=t.attr("data-firstLoad");if("manually"===i){if(e.find(".manually").removeClass("hide").siblings(".embed").addClass("hide"),!c&&n)var p=setInterval(function(){window.googleMapInitialized&&(clearInterval(p),a.initAutocomplete(t,e),setTimeout(function(){var o=e.find("[name=mapAddress]")[0];google.maps.event.trigger(o,"focus"),google.maps.event.trigger(o,"keydown",{keyCode:13}),t.attr("data-firstLoad","false")},1e3))},100)}else e.find(".manually").addClass("hide").siblings(".embed").removeClass("hide")},initAutocomplete:function(e,t){if(!window.googleMapInitialized)return void alert("google map is not initialized");var o=e.find(".kgooglemap")[0],a=new google.maps.Map(o,{zoom:13,mapTypeId:"roadmap"}),i=t.find("[name=mapAddress]")[0],n=new google.maps.places.SearchBox(i);a.addListener("bounds_changed",function(){n.setBounds(a.getBounds())});var s=[];n.addListener("places_changed",function(){var t=n.getPlaces();if(0!=t.length){s.forEach(function(e){e.setMap(null)}),s=[];var o=new google.maps.LatLngBounds;t.forEach(function(e){if(!e.geometry)return void console.log("Returned place contains no geometry");var t={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};s.push(new google.maps.Marker({map:a,icon:t,title:e.name,position:e.geometry.location})),e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location)}),a.fitBounds(o),e.attr("data-place",i.value)}}),e.find(".kgooglemap").data("map",a)}},window.initKeditorMapSetting=function(){window.googleMapInitialized=!0}}(jQuery),function(e){var t=e.keditor,o=t.log;t.components.photo={init:function(e,t,a,i){o('init "photo" component',a);var n=a.children(".keditor-component-content"),s=n.find("img");s.css("display","inline-block")},settingEnabled:!0,settingTitle:"Photo Settings",initSettingForm:function(e,t){o('initSettingForm "photo" component');var a=this,i=t.options;e.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary" id="photo-edit">Change Photo</button>       </div>   </div>   <div class="form-group">       <label for="photo-align" class="col-sm-12">Align</label>       <div class="col-sm-12">           <select id="photo-align" class="form-control">               <option value="left">Left</option>               <option value="center">Center</option>               <option value="right">Right</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-style" class="col-sm-12">Style</label>       <div class="col-sm-12">           <select id="photo-style" class="form-control">               <option value="">None</option>               <option value="img-rounded">Rounded</option>               <option value="img-circle">Circle</option>               <option value="img-thumbnail">Thumbnail</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-responsive" class="col-sm-12">Responsive</label>       <div class="col-sm-12">           <input type="checkbox" id="photo-responsive" />       </div>   </div>   <div class="form-group">       <label for="photo-width" class="col-sm-12">Width</label>       <div class="col-sm-12">           <input type="number" id="photo-width" class="form-control" />       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Height</label>       <div class="col-sm-12">           <input type="number" id="photo-height" class="form-control" />       </div>   </div></form>');var n=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1),s=e.find("#photo-edit");s.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:n,basePath:n,onSelectFile:function(o){var n=t.getSettingComponent().find("img");n.attr("src",o),a.showSettingForm(e,t.getSettingComponent(),i)}});var r=e.find("#photo-align");r.on("change",function(){var e=t.getSettingComponent().find(".photo-panel");e.css("text-align",this.value)});var l=e.find("#photo-responsive");l.on("click",function(){t.getSettingComponent().find("img")[this.checked?"addClass":"removeClass"]("img-responsive")});var d=e.find("#photo-style");d.on("change",function(){var e=t.getSettingComponent().find("img"),o=this.value;e.removeClass("img-rounded img-circle img-thumbnail"),o&&e.addClass(o)});var c=e.find("#photo-width"),p=e.find("#photo-height");c.on("change",function(){var e=t.getSettingComponent().find("img"),o=+this.value,i=Math.round(o/a.ratio);0>=o&&(o=a.width,i=a.height,this.value=o),e.css({width:o,height:i}),p.val(i)}),p.on("change",function(){var e=t.getSettingComponent().find("img"),o=+this.value,i=Math.round(o*a.ratio);0>=o&&(i=a.width,o=a.height,this.value=o),e.css({height:o,width:i}),c.val(i)})},showSettingForm:function(t,a,i){o('showSettingForm "photo" component',a);var n=this,s=t.find("#photo-align"),r=t.find("#photo-responsive"),l=t.find("#photo-width"),d=t.find("#photo-height"),c=t.find("#photo-style"),p=a.find(".photo-panel"),m=p.find("img"),u=p.css("text-align");"right"===u&&"center"===u||(u="left"),m.hasClass("img-rounded")?c.val("img-rounded"):m.hasClass("img-circle")?c.val("img-circle"):m.hasClass("img-thumbnail")?c.val("img-thumbnail"):c.val(""),s.val(u),r.prop("checked",m.hasClass("img-responsive")),l.val(m.width()),d.val(m.height()),e("<img />").attr("src",m.attr("src")).load(function(){n.ratio=this.width/this.height,n.width=this.width,n.height=this.height})}}}(jQuery),function(e){var t=e.keditor,o=t.log;CKEDITOR.disableAutoInline=!0,t.components.text={options:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"editing",groups:["find","selection","spellchecker","editing"]},{name:"forms",groups:["forms"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},"/",{name:"clipboard",groups:["clipboard","undo"]},{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"tools",groups:["tools"]},{name:"others",groups:["others"]}],title:!1,allowedContent:!0,bodyId:"editor",templates_replaceContent:!1,enterMode:"P",forceEnterMode:!0,format_tags:"p;h1;h2;h3;h4;h5;h6",removePlugins:"table,magicline,tabletools",removeButtons:"Save,NewPage,Preview,Print,Templates,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Form,HiddenField,ImageButton,Button,Select,Textarea,TextField,Radio,Checkbox,Outdent,Indent,Blockquote,CreateDiv,Language,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,BGColor,Maximize,About,ShowBlocks,BidiLtr,BidiRtl,Flash,Image,Subscript,Superscript,Anchor",minimumChangeMilliseconds:100},init:function(e,t,a,i){o('init "text" component',a);var n=this,s=i.options,r=a.children(".keditor-component-content");r.prop("contenteditable",!0),r.on("input",function(o){"function"==typeof s.onComponentChanged&&s.onComponentChanged.call(e,o,a),"function"==typeof s.onContainerChanged&&s.onContainerChanged.call(e,o,t),"function"==typeof s.onContentChanged&&s.onContentChanged.call(e,o)});var l=r.ckeditor(n.options).editor;l.on("instanceReady",function(){o("CKEditor is ready",a),"function"==typeof s.onComponentReady&&s.onComponentReady.call(e,a,l)})},getContent:function(e,t){o('getContent "text" component',e);var a=e.find(".keditor-component-content"),i=a.attr("id"),n=CKEDITOR.instances[i];return n?n.getData():a.html()},destroy:function(e,t){o('destroy "text" component',e);var a=e.find(".keditor-component-content").attr("id"),i=CKEDITOR.instances[a];i&&i.destroy()}}}(jQuery),function(e){var t=e.keditor,o=t.log;t.components.video={init:function(t,a,i,n){o('init "video" component',i),this.component=i;var s=i.find("img[data-video-src]");s.attr("id")?this.componentId=s.attr("id"):(this.componentId=n.generateId("component-video"),s.attr("id",this.componentId)),s.parent().hasClass("video-wrapper")||s.wrap('<div class="video-wrapper"></div>'),this.src=s.attr("data-video-src"),this.aspectratio=s.attr("data-aspectratio"),this.repeat="true"===s.attr("data-repeat"),this.controls="true"===s.attr("data-controls"),this.autostart="true"===s.attr("data-autostart");var r=this;e.getScript("/static/jwplayer/6.10/jwplayer.js",function(){jwplayer.key="cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=",r.buildJWVideoPlayerPreview()})},getContent:function(e,t){o('getContent "video" component, component');var a=this.src+"/alt-640-360.png",i='<img id="'+this.componentId+'" class="video-jw" src="'+a+'" data-autostart="'+this.autostart+'" data-aspectratio="'+this.aspectratio+'" data-video-src="'+this.src+'" data-repeat="'+this.repeat+'" data-controls="'+this.controls+'" />';return i},settingEnabled:!0,settingTitle:"Video Settings",initSettingForm:function(e,t){o('init "video" settings',e);e.append('<form class="form-horizontal"><div class="form-group"><label for="videoFileInput" class="col-sm-12">Video file</label><div class="col-sm-12"><div class="video-toolbar"><a href="#" class="btn-videoFileInput btn btn-sm btn-primary"><i class="fa fa-upload"></i></a><input id="videoFileInput" type="file" style="display: none"></div></div></div><div class="form-group"><label for="video-autoplay" class="col-sm-12">Autoplay</label><div class="col-sm-12"><input type="checkbox" id="video-autoplay" /></div></div><div class="form-group"><label for="video-loop" class="col-sm-12">Repeat</label><div class="col-sm-12"><input type="checkbox" id="video-loop" /></div></div><div class="form-group"><label for="video-showcontrols" class="col-sm-12">Show Controls</label><div class="col-sm-12"><input type="checkbox" id="video-showcontrols" checked /></div></div><div class="form-group"><label for="" class="col-sm-12">Ratio</label><div class="col-sm-12"><input type="radio" name="video-radio" class="video-ratio" value="4:3" checked /> 4:3</div><div class="col-sm-12"><input type="radio" name="video-radio" class="video-ratio" value="16:9" /> 16:9</div></div></form>')},showSettingForm:function(e,t,a){o('showSettingForm "video" component',e,t);var i=this,n=e.find(".btn-videoFileInput");n.mselect({contentTypes:["video"],bs3Modal:!0,pagePath:window.location.pathname.replace("contenteditor",""),onSelectFile:function(e){i.src=e,i.refreshVideoPlayerPreview()}});var s=e.find("#video-autoplay");this.autostart&&s.prop("checked",!0),s.on("click",function(e){i.autostart=this.checked,i.buildJWVideoPlayerPreview()});var r=e.find("#video-loop");this.repeat&&r.prop("checked",!0),r.on("click",function(e){i.repeat=this.checked,i.buildJWVideoPlayerPreview()});var l=e.find(".video-ratio");e.find('.video-ratio[value="'+this.aspectratio+'"]').prop("checked",!0),l.on("click",function(e){this.checked&&(i.aspectratio=this.value,i.buildJWVideoPlayerPreview())});var d=e.find("#video-showcontrols");this.controls&&d.prop("checked",!0),d.on("click",function(e){i.controls=this.checked,i.buildJWVideoPlayerPreview()})},buildJWVideoPlayerPreview:function(){var e=this.src,t=this.autostart,a=this.repeat,i=this.aspectratio,n=this.controls,s=jwplayer(this.componentId),r=e+"/alt-640-360.png";o("buildJWPlayer",e,"aspectratio=",i),s.setup({autostart:t,repeat:a,controls:n,aspectratio:i,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",width:"100%",androidhls:!0,playlist:[{image:r,sources:[{file:e},{file:e+"/../alt-640-360.webm"},{file:e+"/../alt-640-360.m4v"}]}],primary:"flash"}),s.onReady(function(){o("jwplayer preview init done")})},refreshVideoPlayerPreview:function(){var e=jwplayer(this.componentId),t=this.src;e.load([{file:t}]),e.play()}}}(jQuery),function(e){var t=e.keditor,o=t.log;t.components.vimeo={getContent:function(e,t){o('getContent "vimeo" component',e);var a=e.children(".keditor-component-content");return a.find(".vimeo-cover").remove(),a.html()},settingEnabled:!0,settingTitle:"Vimeo Settings",initSettingForm:function(e,t){o('initSettingForm "vimeo" component'),e.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary btn-vimeo-edit">Change Video</button>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="vimeo-autoplay" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-vimeo-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-vimeo-43">4:3</button>       </div>   </div></form>');var a=e.find(".btn-vimeo-edit");a.on("click",function(e){e.preventDefault();var o=prompt("Please enter Vimeo URL in here:"),a=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,i=o.match(a);i&&i[1]?t.getSettingComponent().find(".embed-responsive-item").attr("src","https://player.vimeo.com/video/"+i[1]+"?byline=0&portrait=0&badge=0"):alert("Your Vimeo URL is invalid!")});var i=e.find(".btn-vimeo-169");i.on("click",function(e){e.preventDefault(),t.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9")});var n=e.find(".btn-vimeo-43");n.on("click",function(e){e.preventDefault(),t.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3")});var s=e.find("#vimeo-autoplay");s.on("click",function(){var e=t.getSettingComponent().find(".embed-responsive-item"),a=e.attr("src"),i=a.replace(/(\?.+)+/,"")+"?byline=0&portrait=0&badge=0&autoplay="+(s.is(":checked")?1:0);o("Current url: "+a,"New url: "+i),e.attr("src",i)})},showSettingForm:function(e,t,a){o('showSettingForm "vimeo" component',t);var i=t.find(".embed-responsive-item"),n=e.find("#vimeo-autoplay"),s=i.attr("src");n.prop("checked",-1!==s.indexOf("autoplay=1"))}}}(jQuery),function(e){var t=e.keditor,o=t.log;t.components.youtube={getContent:function(e,t){o('getContent "youtube" component',e);var a=e.children(".keditor-component-content");return a.find(".youtube-cover").remove(),a.html()},settingEnabled:!0,settingTitle:"Youtube Settings",initSettingForm:function(e,t){o('initSettingForm "youtube" component'),e.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary btn-youtube-edit">Change Video</button>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="youtube-autoplay" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-youtube-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-youtube-43">4:3</button>       </div>   </div></form>');var a=e.find(".btn-youtube-edit");a.on("click",function(e){e.preventDefault();var o=prompt("Please enter Youtube URL in here:"),a=/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"'>]+)/,i=o.match(a);i&&i[1]?t.getSettingComponent().find(".embed-responsive-item").attr("src","https://www.youtube.com/embed/"+i[1]):alert("Your Youtube URL is invalid!")});var i=e.find(".btn-youtube-169");i.on("click",function(e){e.preventDefault(),t.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9")});var n=e.find(".btn-youtube-43");n.on("click",function(e){e.preventDefault(),t.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3")});var s=e.find("#youtube-autoplay");s.on("click",function(){var e=t.getSettingComponent().find(".embed-responsive-item"),a=e.attr("src"),i=a.replace(/(\?.+)+/,"")+"?autoplay="+(s.is(":checked")?1:0);o("Current url: "+a,"New url: "+i),e.attr("src",i)})},showSettingForm:function(e,t,a){o('showSettingForm "youtube" component',t);var i=t.find(".embed-responsive-item"),n=e.find("#youtube-autoplay"),s=i.attr("src");n.prop("checked",-1!==s.indexOf("autoplay=1"))}}}(jQuery);
//# sourceMappingURL=keditor-components-0.0.0.min.js.map
