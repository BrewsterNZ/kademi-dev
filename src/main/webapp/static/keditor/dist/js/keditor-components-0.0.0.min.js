/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var e=t.keditor,o=e.log;e.components.accordion={settingEnabled:!1,init:function(e,n,a,i){var r=i.options,s=i.generateId("accordion"),l=a.children(".keditor-component-content");l.find(".accordionWrap .panel-group").attr("id",s),l.find(".accordionWrap a[data-toggle]").attr("data-parent","#"+s);var d=l.find(".panel");d.each(function(e,o){var n=t(o),a=i.generateId("heading"+e),r=i.generateId("collapse"+e);n.find(".panel-heading").attr("id",a),n.find(".panel-collapse").attr("aria-labelledby",a).attr("id",r);var s=n.find("a[data-toggle]").html();-1===s.indexOf("<div>")&&n.find("a[data-toggle]").attr("href","#"+r).html("<div>"+s+"</div>")}),l.find(".accordionWrap .panel-collapse").collapse("show"),l.find(".panel-footer, .btnAddAccordionItem").removeClass("hide"),l.find(".panel-title a div").prop("contenteditable",!0),l.find(".panel-collapse .panel-body").prop("contenteditable",!0),l.find(".panel-title a div, .panel-collapse .panel-body").on("input",function(t){"function"==typeof r.onComponentChanged&&r.onComponentChanged.call(e,t,a),"function"==typeof r.onContainerChanged&&r.onContainerChanged.call(e,t,n),"function"==typeof r.onContentChanged&&r.onContentChanged.call(e,t)});var c=l.find(".panel-title a div, .panel-collapse .panel-body").ckeditor(r.ckeditorOptions).editor;c.on("instanceReady",function(){o("CKEditor is ready",a),"function"==typeof r.onComponentReady&&r.onComponentReady.call(e,a,c)}),t(document).off("click",".btnDeleteAccordionItem").on("click",".btnDeleteAccordionItem",function(e){if(e.preventDefault(),confirm("Are you sure you want to delete this item?")){var o=l.find(".panel").length;o>1?t(this).parents(".panel").remove():Msg.error("You cant delete the last item")}}),t(document).off("click",".btnAddAccordionItem").on("click",".btnAddAccordionItem",function(t){t.preventDefault();var n=l.find(".panel").first().clone(),s=i.generateId("heading"),d=i.generateId("collapse");n.find(".panel-heading").attr("id",s),n.find(".panel-collapse").attr("aria-labelledby",s).attr("id",d),n.find("a[data-toggle]").attr("href","#"+d),l.find(".accordionWrap .panel-group").append(n);var c=n.find(".panel-title a div, .panel-collapse .panel-body").ckeditor(r.ckeditorOptions).editor;c.on("instanceReady",function(){o("CKEditor is ready",a),"function"==typeof r.onComponentReady&&r.onComponentReady.call(e,a,c)})})},getContent:function(e,o){var n=e.children(".keditor-component-content");return n.find(".panel-title a div").each(function(){var e=t(this).html();t(this).parent("a").html(e)}),n.find(".panel-collapse .panel-body").each(function(){var e=t(this).html();t(this).replaceWith('<div class="panel-body">'+e+"</div>")}),n.find(".panel-footer, .btnAddAccordionItem").addClass("hide"),n.html()},destroy:function(t,e){o('destroy "text" component',t);var n=t.find(".keditor-component-content").attr("id"),a=CKEDITOR.instances[n];a&&a.destroy()}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.audio={init:function(e,n,a,i){o('init "audio" component',a),this.component=a;var r=a.find("img[data-src]"),s="";r.attr("id")?s=r.attr("id"):(s=i.generateId("component-audio"),r.attr("id",s)),r.parent().hasClass("audio-wrapper")||r.wrap('<div class="audio-wrapper"></div>'),this.src=r.attr("data-src"),this.width=r.attr("data-width"),this.autostart="true"===r.attr("data-autostart");var l=this;t.getScriptOnce("/static/jwplayer/6.10/jwplayer.js",function(){jwplayer.key="cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=",l.buildJWAudioPlayerPreview(s)})},getContent:function(t,e){o('getContent "audio" component',t);var n=t.find("img[data-src]"),a=n.attr("id"),i='<img data-componentId="'+a+'" src="/theme/apps/content/preview/audio.png" data-autostart="'+this.autostart+'" data-width="'+this.width+'" data-src="'+this.src+'" data-kaudio="'+this.src+'" />';return i},settingEnabled:!0,settingTitle:"Audio settings",initSettingForm:function(t,e){o('init "audio" settings',t),t.append('<form class="form-horizontal"><div class="form-group"><label for="audioFileInput" class="col-sm-12">Audio file</label><div class="col-sm-12"><div class="audio-toolbar"><a href="#" class="btn-audioFileInput btn btn-sm btn-primary"><i class="fa fa-upload"></i></a><input id="audioFileInput" type="file" style="display: none"></div></div></div><div class="form-group"><label for="audio-autoplay" class="col-sm-12">Autoplay</label><div class="col-sm-12"><input type="checkbox" id="audio-autoplay" /></div></div><div class="form-group"><label for="audio-width" class="col-sm-12">Width (px)</label><div class="col-sm-12"><input type="number" id="audio-width" min="200" max="500" class="form-control" value="300" /></div></div></form>')},showSettingForm:function(t,e,n){o('showSettingForm "audio" component',t,e);var a=this,i=t.find(".btn-audioFileInput");i.mselect({contentTypes:["audio"],bs3Modal:!0,pagePath:window.location.pathname.replace("contenteditor",""),onSelectFile:function(t){a.src=t,a.refreshAudioPlayerPreview()}});var r=e.find("img[data-src]"),s=r.attr("id"),l=t.find("#audio-autoplay");this.autostart&&l.prop("checked",!0),l.on("click",function(t){a.autostart=this.checked,a.buildJWAudioPlayerPreview(s)});var d=t.find("#audio-width");d.val(this.width),d.on("change",function(){a.width=this.value,a.resizeAudioPlayerPreview()})},buildJWAudioPlayerPreview:function(t){var e=this.width,o=this.src,n=this.autostart,a=jwplayer(t);a.setup({file:o,width:e,height:30,autostart:n,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",primary:"flash"}),a.onReady(function(){log("jwplayer preview init done")})},refreshAudioPlayerPreview:function(){var t=this,e=jwplayer(t.componentId),o=t.src;e.load([{file:o}]),e.play()},resizeAudioPlayerPreview:function(){var t=this,e=jwplayer(t.componentId),o=t.width;e.resize(o,30)}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.carousel={init:function(t,e,n,a){o('init "carousel" component',n);var i=n.children(".keditor-component-content"),r=i.find(".carousel"),s=a.generateId("component-carousel");r.attr("id",s),r.find(".carousel-indicators li").attr("data-target",s),r.find(".carousel-control").attr("href","#"+s)},getContent:function(t,e){var o=t.children(".keditor-component-content");return o.html()},settingEnabled:!0,settingTitle:"Carousel settings",initSettingForm:function(e,n){e.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <div class="carouselImageWrap"></div>       </div>   </div>   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary carouselAddImage"><i class="fa fa-plus"></i> Add Image</button>       </div>   </div>   <div class="form-group">       <label for="photo-responsive" class="col-sm-12">Cycle continuously</label>       <div class="col-sm-12">           <input type="checkbox" class="carouselWrap" />       </div>   </div>   <div class="form-group">       <label for="photo-align" class="col-sm-12">Pause</label>       <div class="col-sm-12">           <select class="form-control carouselPause">               <option selected value="">No</option>               <option value="hover">Hover</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Interval</label>       <div class="col-sm-12">           <input type="number" class="form-control carouselInterval" value="5000" />       </div>   </div></form>');var a=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1),i=e.find(".carouselAddImage"),r=e.find(".carouselImageWrap"),s=this;i.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:a,basePath:a,onSelectFile:function(t,a,i,r){o("keditor carousel selected a file",t,r),s.addImageToList(e,t,r),s.addImageToCarousel(n.getSettingComponent(),t,r)}}),r.sortable({handle:".btn-sort-image",items:"> .carouselImageItem",axis:"y",tolerance:"pointer",sort:function(){t(this).removeClass("ui-state-default")},update:function(){s.rearrangeItems(n.getSettingComponent(),e)}}),t(document.body).on("click",".carouselImageItem a.btn-remove-image",function(e){if(e.preventDefault(),confirm("Are you sure that you want to delete this image?")){var o=t(this),a=o.closest(".btn-group").siblings("[data-hash]").attr("data-hash");s.refreshCarousel(n.getSettingComponent(),a),o.closest(".carouselImageItem").remove()}}),e.find(".carouselPause").on("change",function(t){t.preventDefault();var e=n.getSettingComponent().find(".carousel");e.attr("data-pause",this.value)}),e.find(".carouselInterval").on("change",function(t){t.preventDefault();var e=n.getSettingComponent().find(".carousel");e.attr("data-interval",this.value)}),e.find(".carouselWrap").on("click",function(t){var e=n.getSettingComponent().find(".carousel");this.checked?e.attr("data-wrap","true"):e.attr("data-wrap","false")})},showSettingForm:function(e,o,n){var a=this;e.find(".carouselImageWrap").html(""),o.find(".carousel-inner > .item").each(function(o,n){var i=t(n).find("img").attr("src"),r=t(n).attr("data-hash");a.addImageToList(e,i,r)});var i=o.find(".carousel").attr("data-wrap"),r=o.find(".carousel").attr("data-pause"),s=o.find(".carousel").attr("data-interval");e.find(".carouselPause").val(r),e.find(".carouselInterval").val(s),e.find(".carouselWrap").prop("checked","true"===i)},addImageToCarousel:function(t,e,o){var n=t.find(".carousel"),a=n.find(".carousel-indicators").children().length,i=0===a?"active":"";n.find(".carousel-indicators").append('<li data-target="'+n.attr("id")+'" data-slide-to="'+a+'" class="'+i+'"></li>'),n.find(".carousel-inner").append('<div data-hash="'+o+'" class="item '+i+'">   <img src="'+e+'" alt="" width="100%" height="" />   <div class="carousel-caption"></div></div>')},addImageToList:function(t,e,o){t.find(".carouselImageWrap").append('<div class="carouselImageItem">   <img class="img-responsive" src="'+e+'" data-hash="'+o+'" />   <div class="btn-group btn-group-sm">       <a class="btn btn-info btn-sort-image" href="#"><i class="fa fa-sort"></i></a>       <a title="Delete this image" class="btn btn-danger btn-remove-image" href="#"><i class="fa fa-trash"></i></a>   </div></div>')},refreshCarousel:function(t,e){t.find("[data-hash="+e+"]").remove(),t.find(".carousel-inner .item.active").length||t.find(".carousel-inner .item:first-child").addClass("active"),t.find(".carousel-indicators li:last-child").remove()},rearrangeItems:function(e,o){var n=this,a=e.find(".carousel");a.find(".carousel-inner").html(""),a.find(".carousel-indicators").html(""),o.find(".carouselImageWrap").find(".carouselImageItem").each(function(){var o=t(this),a=o.find("img");n.addImageToCarousel(e,a.attr("src"),a.attr("data-hash"))})}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.googlemap={init:function(e,o,n,a){var i=n.find("script");i.length&&i.remove(),n.removeAttr("data-firstLoad");var r=n.attr("data-place"),s=n.attr("data-maptype");r&&"manually"===s&&t(window).on("load",function(){n.find(".btn-component-setting").trigger("click")})},getContent:function(t,e){o('getContent "googlemap" component',t);var n=t.children(".keditor-component-content");n.find(".googlemap-cover").remove();t.attr("data-place"),t.attr("data-maptype");t.find(".kgooglemap").html("");var a='<script>$(function(){if(!$(document.body).hasClass("content-editor-page")){var apiKey="AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs";var s=document.createElement("script");s.type="text/javascript";s.async=true;s.defer=true;s.src="https://maps.googleapis.com/maps/api/js?key="+apiKey+"&callback=kgooglemapInit&libraries=places";$("head").append(s);window.kgooglemapInit=function(){var mapdiv=$(".kgooglemap").not(".hide");mapdiv.each(function(){var parent=$(this).parents("[data-type=component-googlemap]");if(parent.attr("data-maptype")!=="manually")return;var map=new google.maps.Map(this,{zoom:13,mapTypeId:"roadmap"});var place=parent.attr("data-place");var input=parent.find("input")[0];input.value=place;var searchBox=new google.maps.places.SearchBox(input);map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);setTimeout(function(){google.maps.event.trigger(input,"focus");google.maps.event.trigger(input,"keydown",{keyCode:13});},500);map.addListener("bounds_changed",function(){searchBox.setBounds(map.getBounds());});var markers=[];searchBox.addListener("places_changed",function(){var places=searchBox.getPlaces();if(places.length==0){return;}markers.forEach(function(marker){marker.setMap(null);});markers=[];var bounds=new google.maps.LatLngBounds();places.forEach(function(place){if(!place.geometry){console.log("Returned place contains no geometry");return;}var icon={url:place.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};markers.push(new google.maps.Marker({map:map,icon:icon,title:place.name,position:place.geometry.location}));if(place.geometry.viewport){bounds.union(place.geometry.viewport);}else{bounds.extend(place.geometry.location);}});map.fitBounds(bounds);});})}}});</script>';return t.find(".embed-responsive").append(a),n.html()},settingEnabled:!0,settingTitle:"Google Map Settings",initSettingForm:function(e,n){o('initSettingForm "googlemap" component');var a="AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs",i='<script src="https://maps.googleapis.com/maps/api/js?key='+a+'&callback=initKeditorMapSetting&libraries=places" async defer></script>';window.google&&window.google.maps&&google.maps.places&&(i=""),e.append(i+'<form class="form-horizontal" onsubmit="return false;">   <div class="form-group">       <label class="col-sm-12">Map type</label>       <div class="radio-inline">           <label class="radio-inline"><input checked type="radio" name="mapType" class="mapType" value="embed"> Embed</label>           <label class="radio-inline"><input type="radio" name="mapType" class="mapType" value="manually"> Manually</label>       </div>   </div>   <div class="form-group embed">       <div class="col-sm-12">           <textarea class="form-control" name="mapEmbedCode" placeholder="Embed code"></textarea>       </div>   </div>   <div class="form-group manually hide">       <div class="col-sm-12">           <input class="form-control" name="mapAddress" placeholder="Enter address" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-googlemap-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-googlemap-43">4:3</button>       </div>   </div></form>'),e.find(".mapType").on("click",function(o){if(this.checked){t("."+this.value).removeClass("hide");var a=e.find(".mapType").not(this).val();t("."+a).addClass("hide");var i=n.getSettingComponent();if(i.attr("data-maptype",this.value),"manually"===this.value)if(i.find("iframe").addClass("hide"),i.find(".kgooglemap").removeClass("hide"),i.find(".kgooglemap").data("map"))google.maps.event.trigger(i.find(".kgooglemap").data("map"),"resize");else{r.initAutocomplete(i,e);var s=e.find("[name=mapAddress]")[0],l=setInterval(function(){i.find(".kgooglemap").data("map")&&(clearInterval(l),google.maps.event.trigger(s,"focus"),google.maps.event.trigger(s,"keydown",{keyCode:13}))},100)}else i.find("iframe").removeClass("hide"),i.find(".kgooglemap").addClass("hide")}});var r=this;e.find("[name=mapEmbedCode]").on("change",function(){var e=t(this.value),o=e.attr("src");e.length>0&&o&&o.length>0?n.getSettingComponent().find(".embed-responsive-item").attr("src",o):alert("Your Google Map embed code is invalid!")});var s=e.find(".btn-googlemap-169"),l=e.find(".btn-googlemap-43");s.on("click",function(e){e.preventDefault(),t(this).addClass("btn-primary").removeClass("btn-default"),l.removeClass("btn-primary").addClass("btn-default"),n.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9");var o=n.getSettingComponent();"manually"===o.attr("maptype")&&o.find(".kgooglemap").data("map")&&google.maps.event.trigger(o.find(".kgooglemap").data("map"),"resize")}),l.on("click",function(e){e.preventDefault(),t(this).addClass("btn-primary").removeClass("btn-default"),s.removeClass("btn-primary").addClass("btn-default"),n.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3");var o=n.getSettingComponent();"manually"===o.attr("maptype")&&o.find(".kgooglemap").data("map")&&google.maps.event.trigger(o.find(".kgooglemap").data("map"),"resize")})},showSettingForm:function(t,e,o){var n=this,a=e.attr("data-maptype"),i=e.attr("data-place"),r=e.find(".embed-responsive").hasClass("embed-responsive-16by9"),s=e.find(".embed-responsive").hasClass("embed-responsive-4by3");s&&t.find(".btn-googlemap-43").addClass("btn-primary").removeClass("btn-default"),r&&t.find(".btn-googlemap-169").addClass("btn-primary").removeClass("btn-default"),t.find(".mapType[value="+a+"]").prop("checked",!0);var l=e.find("iframe").attr("src"),d='<iframe class="embed-responsive-item" src="'+l+'"></iframe>';i||(i="Hanoi, Vietnam"),t.find("[name=mapAddress]").val(i),t.find("[name=mapEmbedCode]").val(d);var c=e.attr("data-firstLoad");if("manually"===a){if(t.find(".manually").removeClass("hide").siblings(".embed").addClass("hide"),!c&&i)var p=setInterval(function(){window.googleMapInitialized&&(clearInterval(p),n.initAutocomplete(e,t),setTimeout(function(){var o=t.find("[name=mapAddress]")[0];google.maps.event.trigger(o,"focus"),google.maps.event.trigger(o,"keydown",{keyCode:13}),e.attr("data-firstLoad","false")},1e3))},100)}else t.find(".manually").addClass("hide").siblings(".embed").removeClass("hide")},initAutocomplete:function(t,e){if(!window.googleMapInitialized)return void alert("google map is not initialized");var o=t.find(".kgooglemap")[0],n=new google.maps.Map(o,{zoom:13,mapTypeId:"roadmap"}),a=e.find("[name=mapAddress]")[0],i=new google.maps.places.SearchBox(a);n.addListener("bounds_changed",function(){i.setBounds(n.getBounds())});var r=[];i.addListener("places_changed",function(){var e=i.getPlaces();if(0!=e.length){r.forEach(function(t){t.setMap(null)}),r=[];var o=new google.maps.LatLngBounds;e.forEach(function(t){if(!t.geometry)return void console.log("Returned place contains no geometry");var e={url:t.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};r.push(new google.maps.Marker({map:n,icon:e,title:t.name,position:t.geometry.location})),t.geometry.viewport?o.union(t.geometry.viewport):o.extend(t.geometry.location)}),n.fitBounds(o),t.attr("data-place",a.value)}}),t.find(".kgooglemap").data("map",n)}},window.initKeditorMapSetting=function(){window.googleMapInitialized=!0}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.jumbotron={settingEnabled:!0,settingTitle:"Jumbotron Settings",init:function(t,e,n,a){var i=this,r=i.options,s=n.children(".keditor-component-content");s.prop("contenteditable",!0),s.on("input",function(o){"function"==typeof r.onComponentChanged&&r.onComponentChanged.call(t,o,n),"function"==typeof r.onContainerChanged&&r.onContainerChanged.call(t,o,e),"function"==typeof r.onContentChanged&&r.onContentChanged.call(t,o)});var l=s.ckeditor(a.options.ckeditorOptions).editor;l.on("instanceReady",function(){o("CKEditor is ready",n),"function"==typeof r.onComponentReady&&r.onComponentReady.call(t,n,l)})},getContent:function(t,e){o('getContent "jumbotron" component',t);var n=t.find(".keditor-component-content"),a=n.attr("id"),i=CKEDITOR.instances[a];return i?i.getData():n.html()},initSettingForm:function(e,n){o('initSettingForm "jumbotron" component'),e.append('<form class="form-horizontal">    <div class="form-group">       <div class="col-md-12">           <label>Background Color</label>           <div class="input-group button-color-picker">               <span class="input-group-addon"><i></i></span>               <input type="text" value="" name="button-color" class="form-control" />           </div>       </div>    </div>    <div class="form-group">       <div class="col-md-12">           <label>Is inverse</label><br />           <input type="checkbox" value="" class="chk-inverse" />       </div>    </div>    <div class="form-group">       <label class="col-sm-12">Rounded</label>       <div class="col-sm-12">           <div class="radio"><label><input type="radio" name="rounded" value="true" checked> Yes</label></div>           <div class="radio"><label><input type="radio" name="rounded" value="false"> No</label></div>       </div>    </div>   <div class="form-group">       <div class="col-md-12"><label>Inner Padding (in px)</label>           <div class="row row-sm text-center">               <div class="col-xs-4 col-xs-offset-4">                   <input type="number" value="" name="padding-top" class="paddingSettings form-control"/>                   <small>top</small>               </div>           </div>           <div class="row row-sm text-center">               <div class="col-xs-4">                   <input type="number" value="" name="padding-left" class="paddingSettings form-control"/>                    <small>left</small>               </div>               <div class="col-xs-4 col-xs-offset-4">                   <input type="number" value="" name="padding-right" class="paddingSettings form-control"/>                   <small>right</small>               </div>           </div>            <div class="row row-sm text-center">               <div class="col-xs-4 col-xs-offset-4">                   <input type="number" value="" name="padding-bottom" class="paddingSettings form-control"/>                   <small>bottom</small>               </div>           </div>       </div>   </div>   <div class="form-group">       <div class="col-md-12"><label>Margins (in px)</label>           <div class="row row-sm text-center">               <div class="col-xs-4 col-xs-offset-4">                   <input type="number" value="" name="margin-top" class="marginSettings form-control"/>                   <small>top</small>               </div>           </div>           <div class="row row-sm text-center">               <div class="col-xs-4">                   <input type="number" value="" name="margin-left" class="marginSettings form-control"/>                    <small>left</small>               </div>               <div class="col-xs-4 col-xs-offset-4">                   <input type="number" value="" name="margin-right" class="marginSettings form-control"/>                   <small>right</small>               </div>           </div>            <div class="row row-sm text-center">               <div class="col-xs-4 col-xs-offset-4">                   <input type="number" value="" name="margin-bottom" class="marginSettings form-control"/>                   <small>bottom</small>               </div>           </div>       </div>   </div></form>'),e.find(".chk-inverse").on("click",function(){var t=n.getSettingComponent();t.find(".jumbotron")[this.checked?"addClass":"removeClass"]("jumbotron-inverse")}),e.find("[name=rounded]").on("click",function(t){var e=n.getSettingComponent();"false"==this.value?e.find(".jumbotron").css("border-radius","0"):e.find(".jumbotron").css("border-radius","")});var a=e.find(".button-color-picker");initColorPicker(a,function(t){var o=n.getSettingComponent();t&&"transparent"!==t?(o.find(".jumbotron").css("background-color",t),o.attr("data-bgcolor",t)):(o.find(".jumbotron").css("background-color",""),e.find(".button-color").val(""))});var i=e.find(".paddingSettings");i.on("change",function(){var e=this.value||"",o=n.getSettingComponent(),a=t(this).attr("name");""===e.trim()?o.find(".jumbotron").css(a,""):(isNaN(e)&&(e=0,this.value=e),o.find(".jumbotron").css(a,e+"px"))});var r=e.find(".marginSettings");r.on("change",function(){var e=this.value||"",o=n.getSettingComponent(),a=t(this).attr("name");""===e.trim()?o.find(".jumbotron").css(a,""):(isNaN(e)&&(e=0,this.value=e),o.find(".jumbotron").css(a,e+"px"))})},showSettingForm:function(e,n,a){o('showSettingForm "jumbotron" component',n),e.find("[name=button-color]").val(n.attr("data-bgcolor")).trigger("change"),e.find(".paddingSettings").each(function(){t(this).val(n.find(".jumbotron").css(t(this).attr("name")).replace("px",""))}),e.find(".marginSettings").each(function(){t(this).val(n.find(".jumbotron").css(t(this).attr("name")).replace("px",""))}),e.find("[name=showButton][value=false]").prop("checked",n.find("a").hasClass("hide")),e.find("[name=rounded][value=false]").prop("checked","0"===n.find(".jumbotron").css("border-radius").replace("px","")),e.find(".chk-inverse").prop("checked",n.find(".jumbotron").hasClass("jumbotron-inverse"))},destroy:function(t,e){o('destroy "text" component',t);var n=t.find(".keditor-component-content").attr("id"),a=CKEDITOR.instances[n];a&&a.destroy()}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.ksvgmap={init:function(e,n,a,i){var r=a.find("script");r.length&&r.remove(),a.attr("data-height")&&a.find(".ksvgmap").css("height",+a.attr("data-height")),t.getScriptOnce("/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js",function(){t.getScriptOnce("/static/jquery-jvectormap/jquery-jvectormap-au-mill.js",function(){a.find(".ksvgmap").vectorMap({map:"au_mill",backgroundColor:"#fff",zoomButtons:!1,focusOn:{x:.5,y:.5,scale:1},regionStyle:{initial:{fill:"#efefef"},hover:{fill:"#00aa90"}},onRegionTipShow:function(t,e,o){a.attr("data-"+o)&&e.html(e.html()+" - "+a.attr("data-"+o))}});var t=setInterval(function(){try{var e=a.find(".ksvgmap").vectorMap("get","mapObject");e.updateSize(),clearInterval(t)}catch(n){o("trying to get jvectormap object")}},50)})})},getContent:function(e,n){o('getContent "svgmap" component',e);var a=e.children(".keditor-component-content"),i='<script>$(function(){$(document.body).hasClass("content-editor-page")||$.getScriptOnce("/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js",function(){$.getScriptOnce("/static/jquery-jvectormap/jquery-jvectormap-au-mill.js",function(){$(".ksvgmap").each(function(){var a=$(this).parents("[data-type=component-ksvgmap]");a.hasClass("ksvgInit")||(a.addClass("ksvgInit"),$(this).vectorMap({map:"au_mill",backgroundColor:"#fff",zoomButtons:!1,scale:5,regionStyle:{initial:{fill:"#efefef"},hover:{fill:"#00aa90"}},onRegionTipShow:function(b,c,d){a.attr("data-"+d)&&c.html("<span class=\'vectormap-tip-region-name\'>"+c.html()+"</span><span class=\'vectormap-tip-separator\'> - </span><span class=\'vectormap-tip-region-data\'>"+a.attr("data-"+d)+"</span>")}}))})})})});</script>',r='<link rel="stylesheet" href="/static/jquery-jvectormap/jquery-jvectormap-2.0.3.css">';e.find(".jvectormap-container").remove();var s=t(document.body).find('[data-type="component-ksvgmap"]:not(.keditor-snippet)');return s.length>0&&t(s[s.length-1]).attr("id")===e.attr("id")&&(t(r).insertBefore(e.find(".ksvgmap")),t(i).insertAfter(e.find(".ksvgmap"))),a.html()},settingEnabled:!0,settingTitle:"SVGMap Settings",initSettingForm:function(t,e){o('initSettingForm "svgmap" component'),t.append('<form class="form-horizontal" onsubmit="return false;">   <div class="form-group">       <label class="col-sm-12">Section</label>       <div class="col-sm-12">           <select class="form-control state">               <option value="AU-QLD">Queensland</option>               <option value="AU-NSW">New South Wales</option>               <option value="AU-ACT">Australian Capital Territory</option>               <option value="AU-VIC">Victoria</option>               <option value="AU-TAS">Tasmania</option>               <option value="AU-SA">South Australia</option>               <option value="AU-NT">Northern Territory</option>               <option value="AU-WA">Western Australia</option>           </select>       </div>   </div>   <div class="form-group embed">       <label class="col-sm-12">Section Message</label>       <div class="col-sm-12">           <textarea rows="2" class="form-control stateMessage" placeholder="State Message"></textarea>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Height(px)</label>       <div class="col-sm-12">           <input type="number" class="form-control height" value="300" placeholder="Height" />       </div>   </div></form>');var n=e.getSettingComponent();t.find(".state").on("change",function(e){var o=n.attr("data-"+this.value);t.find(".stateMessage").val(o)}),t.find(".stateMessage").on("change",function(e){var o=t.find(".state").val();n.attr("data-"+o,this.value)}),t.find(".height").on("change",function(t){n.attr("data-height",this.value),n.find(".ksvgmap").css("height",this.value);var e=n.find(".ksvgmap").vectorMap("get","mapObject");e.updateSize()})},showSettingForm:function(t,e,o){var n=e.attr("data-height"),a=t.find(".state").val();t.find(".height").val(n),t.find(".stateMessage").val(e.attr("data-"+a))}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.photo={init:function(t,e,n,a){o('init "photo" component',n);var i=n.children(".keditor-component-content"),r=i.find("img");r.css("display","inline-block");var s=a.options;"function"==typeof s.onComponentReady&&s.onComponentReady.call(t,n)},settingEnabled:!0,settingTitle:"Photo Settings",initSettingForm:function(t,e){o('initSettingForm "photo" component');var n=this,a=e.options;t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary" id="photo-edit">Change Photo</button>       </div>   </div>   <div class="form-group">       <label for="photo-align" class="col-sm-12">Align</label>       <div class="col-sm-12">           <select id="photo-align" class="form-control">               <option value="left">Left</option>               <option value="center">Center</option>               <option value="right">Right</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-style" class="col-sm-12">Style</label>       <div class="col-sm-12">           <select id="photo-style" class="form-control">               <option value="">None</option>               <option value="img-rounded">Rounded</option>               <option value="img-circle">Circle</option>               <option value="img-thumbnail">Thumbnail</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-responsive" class="col-sm-12">Responsive</label>       <div class="col-sm-12">           <input type="checkbox" id="photo-responsive" />       </div>   </div>   <div class="form-group">       <label for="photo-width" class="col-sm-12">Width</label>       <div class="col-sm-12">           <input type="number" id="photo-width" class="form-control" />       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Height</label>       <div class="col-sm-12">           <input type="number" id="photo-height" class="form-control" />       </div>   </div>   <div class="form-group">       <label for="photo-width" class="col-sm-12">Linkable</label>       <div class="col-sm-12">           <input type="checkbox" id="photo-linkable" />       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Link</label>       <div class="col-sm-12">           <input type="text" id="photo-link" class="form-control" disabled="disabled" />           <span class="help-block" style="display: none;">Link is invalid</span>       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Open link in</label>       <div class="col-sm-12">           <select class="form-control" id="photo-target" disabled="disabled">               <option value="" selected="selected">Current tab/window</option>               <option value="_blank">New tab/window</option>           </select>       </div>   </div></form>');
var i=t.find("#photo-link");i.on("change",function(){var t=this.value.trim(),o=new RegExp("^[a-zA-Z0-9_/%:/./-]+$"),n=i.next(),a=i.closest(".form-group");o.test(t)?(e.getSettingComponent().find("a").attr("href",t),n.hide(),a.removeClass("has-error")):(n.show(),a.addClass("has-error"))});var r=t.find("#photo-target");r.on("change",function(){e.getSettingComponent().find("a").attr("target",this.value)});var s=t.find("#photo-linkable");s.on("click",function(){var t=e.getSettingComponent().find("img");s.is(":checked")?(i.prop("disabled",!1),r.prop("disabled",!1),t.wrap('<a href=""></a>')):(i.prop("disabled",!0),r.prop("disabled",!0),t.unwrap("a"))});var l=t.find("#photo-edit");l.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:a.pagePath,basePath:a.basePath,onSelectFile:function(o,i,r,s){var l=e.getSettingComponent().find("img");l.attr("src","/_hashes/files/"+s),n.showSettingForm(t,e.getSettingComponent(),a)}});var d=t.find("#photo-align");d.on("change",function(){var t=e.getSettingComponent().find(".photo-panel");t.css("text-align",this.value)});var c=t.find("#photo-responsive");c.on("click",function(){e.getSettingComponent().find("img")[this.checked?"addClass":"removeClass"]("img-responsive")});var p=t.find("#photo-style");p.on("change",function(){var t=e.getSettingComponent().find("img"),o=this.value;t.removeClass("img-rounded img-circle img-thumbnail"),o&&t.addClass(o)});var m=t.find("#photo-width"),u=t.find("#photo-height");m.on("change",function(){var t=e.getSettingComponent().find("img"),o=+this.value,a=Math.round(o/n.ratio);0>=o&&(o=n.width,a=n.height,this.value=o),t.css({width:o,height:a}),u.val(a)}),u.on("change",function(){var t=e.getSettingComponent().find("img"),o=+this.value,a=Math.round(o*n.ratio);0>=o&&(a=n.width,o=n.height,this.value=o),t.css({height:o,width:a}),m.val(a)})},showSettingForm:function(e,n,a){o('showSettingForm "photo" component',n);var i=this,r=e.find("#photo-align"),s=e.find("#photo-responsive"),l=e.find("#photo-width"),d=e.find("#photo-height"),c=e.find("#photo-style"),p=e.find("#photo-link"),m=e.find("#photo-target"),u=e.find("#photo-linkable");p.next().hide(),p.closest(".form-group").removeClass("has-error");var v=n.find(".photo-panel"),g=v.find("img"),f=g.parent("a");f.length>0?(u.prop("checked",!0),p.prop("disabled",!1).val(f.attr("href")),m.prop("disabled",!1).val(f.attr("target"))):(u.prop("checked",!1),p.prop("disabled",!0).val(""),m.prop("disabled",!0).val(""));var h=v.css("text-align");"right"===h&&"center"===h||(h="left"),g.hasClass("img-rounded")?c.val("img-rounded"):g.hasClass("img-circle")?c.val("img-circle"):g.hasClass("img-thumbnail")?c.val("img-thumbnail"):c.val(""),r.val(h),s.prop("checked",g.hasClass("img-responsive")),l.val(g.width()),d.val(g.height()),t("<img />").attr("src",g.attr("src")).load(function(){i.ratio=this.width/this.height,i.width=this.width,i.height=this.height})}}}(jQuery),function(t){var e=t.keditor,o=e.log;CKEDITOR.disableAutoInline=!0,CKEDITOR.dtd.$removeEmpty.i=!1,e.components.text={init:function(e,n,a,i){o('init "text" component',a);var r=i.options,s=a.find(".keditor-component-content"),l=s.find(".keditor-component-text-content-inner");if(0===l.length){var d=s.html();l=t('<div class="keditor-component-text-content-inner clearfix"></div>'),s.html(l),l.html(d),l.wrap('<div class="keditor-component-text-content"></div>')}l.attr("id")||l.attr("id",i.generateId("component-text-content-inner")),l.prop("contenteditable",!0),l.on("input",function(t){"function"==typeof r.onComponentChanged&&r.onComponentChanged.call(e,t,a),"function"==typeof r.onContainerChanged&&r.onContainerChanged.call(e,t,n),"function"==typeof r.onContentChanged&&r.onContentChanged.call(e,t)});var c=l.ckeditor(i.options.ckeditorOptions).editor;c.on("instanceReady",function(){o("CKEditor is ready",a),"function"==typeof r.onComponentReady&&r.onComponentReady.call(e,a,c)})},getContent:function(t,e){o('getContent "text" component',t);var n=t.find(".keditor-component-content"),a=n.find(".keditor-component-text-content"),i=a.children().attr("id"),r=CKEDITOR.instances[i];return r&&a.html('<div class="keditor-component-text-content-inner clearfix">'+r.getData()+"</div>"),n.html()},destroy:function(t,e){o('destroy "text" component',t);var n=t.find(".keditor-component-content").attr("id"),a=CKEDITOR.instances[n];a&&a.destroy()},settingEnabled:!0,settingTitle:"Text Settings",initSettingForm:function(e,n){return o('initSettingForm "text" component'),t.ajax({url:"/static/keditor/componentTextSettings.html",type:"get",dataType:"HTML",success:function(o){e.html(o);var a=window.location.pathname.replace("contenteditor","");n.options.basePath&&(a=n.options.basePath),e.find(".background-image-edit").mselect({contentTypes:["image"],bs3Modal:!0,pagePath:a,basePath:a,onSelectFile:function(t,o,a,i){var r=n.getSettingComponent().find(".keditor-component-text-content"),s="http://"+window.location.host+"/_hashes/files/"+i;r.css("background-image",'url("'+s+'")'),e.find(".background-image-previewer").attr("src",s)}}),e.find(".background-image-delete").on("click",function(t){t.preventDefault();var o=n.getSettingComponent().find(".keditor-component-text-content");o.css("background-image",""),e.find(".background-image-previewer").attr("src","/static/images/photo_holder.png")});var i=e.find(".color-picker");initColorPicker(i,function(t){var e=n.getSettingComponent().find(".keditor-component-text-content");t&&"transparent"!==t?e.css("background-color",t):e.css("background-color","")}),e.find(".select-bg-repeat").on("change",function(){var t=n.getSettingComponent().find(".keditor-component-text-content");t.css("background-repeat",this.value)}),e.find(".select-bg-size").on("change",function(){var t=n.getSettingComponent().find(".keditor-component-text-content");t.css("background-size",this.value)}),e.find(".select-bg-position").on("change",function(){var t=n.getSettingComponent().find(".keditor-component-text-content");t.css("background-position",this.value)}),e.find(".txt-padding").each(function(){var e=t(this),o=e.attr("data-style-name");e.on("change",function(){var t=this.value||"",e=n.getSettingComponent().find(".keditor-component-text-content").get(0);""===t.trim()?e.style[o]="":(isNaN(t)&&(t=0,this.value=t),e.style[o]=t+"px")})}),e.find(".txt-margin").each(function(){var e=t(this),o=e.attr("data-style-name");e.on("change",function(){var t=this.value||"",e=n.getSettingComponent().find(".keditor-component-text-content").get(0);""===t.trim()?e.style[o]="":(isNaN(t)&&(t=0,this.value=t),e.style[o]=t+"px")})}),e.find(".txt-height").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var e=n.getSettingComponent().find(".keditor-component-text-content");e.css("height",t)}),e.find(".txt-max-height").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var e=n.getSettingComponent().find(".keditor-component-text-content");e.css("max-height",t+"px")}),e.find(".txt-width").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var e=n.getSettingComponent().find(".keditor-component-text-content");e.css("width",t)}),e.find(".txt-max-width").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var e=n.getSettingComponent().find(".keditor-component-text-content");e.css("max-width",t+"px")})}})},showSettingForm:function(e,n,a){o('showSettingForm "text" component',n);var i=n.find(".keditor-component-text-content").get(0),r=i.style.backgroundImage;r=(r||"").replace(/^url\(['"]+(.+)['"]+\)$/,"$1"),e.find(".background-image-previewer").attr("src","none"!==r&&""!==r?r:"/static/images/photo_holder.png"),e.find(".select-bg-repeat").val(i.style.backgroundRepeat||"repeat"),e.find(".select-bg-position").val(i.style.backgroundPosition||"0% 0%"),e.find(".select-bg-size").val(i.style.backgroundSize||"auto");var s=e.find(".color-picker");s.colorpicker("setValue",i.style.backgroundColor||"transparent"),e.find(".txt-padding").each(function(){var e=t(this),o=e.attr("data-style-name");e.val((i.style[o]||"").replace("px",""))}),e.find(".txt-margin").each(function(){var e=t(this),o=e.attr("data-style-name");e.val((i.style[o]||"").replace("px",""))}),e.find(".txt-height").val((i.style.height||"").replace("px","")),e.find(".txt-max-height").val((i.style.maxHeight||"").replace("px","")),e.find(".txt-width").val((i.style.width||"").replace("px","")),e.find(".txt-maxWith").val((i.style.maxWidth||"").replace("px",""))}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.video={init:function(e,n,a,i){o('init "video" component',a);var r=this,s=a.find("img[data-video-src]");s.attr("id",i.generateId("component-video"));var l=s.parent();l.hasClass("video-wrapper")||(s.wrap('<div class="video-wrapper"></div>'),l=s.parent()),l.attr("data-id",s.attr("id")),l.attr("data-autostart",s.attr("data-autostart")),l.attr("data-aspectratio",s.attr("data-aspectratio")),l.attr("data-video-src",s.attr("data-video-src")),l.attr("data-repeat",s.attr("data-repeat")),l.attr("data-controls",s.attr("data-controls")),t.getScriptOnce("/static/jwplayer/6.10/jwplayer.js",function(){jwplayer.key="cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=",r.buildJWVideoPlayerPreview(a)})},getContent:function(t){o('getContent "video" component, component');var e=t.find(".video-wrapper"),n='<img class="video-jw" ';return n+='       id="'+this.componentId+'" ',n+='       src="'+e.attr("data-video-src")+'/alt-640-360.png" ',n+='       data-autostart="'+e.attr("data-autostart")+'" ',n+='       data-aspectratio="'+e.attr("data-aspectratio")+'" ',n+='       data-video-src="'+e.attr("data-video-src")+'" ',n+='       data-repeat="'+e.attr("data-repeat")+'" ',n+='       data-controls="'+e.attr("data-controls")+'" />',e.html(n),t.find(".keditor-component-content").html()},settingEnabled:!0,settingTitle:"Video Settings",initSettingForm:function(t,e){o('init "video" settings',t);var n=this;t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <div class="video-toolbar">               <a href="#" class="btn-videoFileInput btn btn-sm btn-primary btn-block"><i class="fa fa-upload"></i> Change your video</a>               <input id="videoFileInput" type="file" style="display: none">           </div>       </div>   </div>   <div class="form-group">       <label for="video-autoplay" class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="video-autoplay" />       </div>   </div>   <div class="form-group">       <label for="video-loop" class="col-sm-12">Repeat</label>       <div class="col-sm-12">           <input type="checkbox" id="video-loop" />       </div>   </div>   <div class="form-group">       <label for="video-showcontrols" class="col-sm-12">Show Controls</label>       <div class="col-sm-12">           <input type="checkbox" id="video-showcontrols" checked />       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Ratio</label>       <div class="col-sm-12">           <input type="radio" name="video-radio" class="video-ratio" value="4:3" checked /> 4:3       </div>       <div class="col-sm-12">           <input type="radio" name="video-radio" class="video-ratio" value="16:9" /> 16:9       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Enable border</label>       <div class="col-sm-12">           <input type="checkbox" class="chk-border" value="" />       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Border color</label>       <div class="col-sm-12">           <div class="input-group color-picker">               <span class="input-group-addon"><i></i></span>               <input type="text" value="" class="txt-border-color form-control" disabled />           </div>       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Border width</label>       <div class="col-sm-12">           <input type="number" class="border-width form-control" disabled />       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Border style</label>       <div class="col-sm-12">           <select class="form-control select-border-style selectpicker" disabled title=" - Select Border Style - ">               <option data-content="<div class=border-style-solid></div>" value="solid">Solid</option>               <option data-content="<div class=border-style-dotted></div>" value="dotted">Dotted</option>               <option data-content="<div class=border-style-dashed></div>" value="dashed">Dased</option>               <option data-content="<div class=border-style-double></div>" value="double">Double</option>           </select>       </div>   </div></form>');var a=t.find(".select-border-style");a.selectpicker().on("changed.bs.select",function(){n.borderStyle=this.value,e.getSettingComponent().find(".video-wrapper").css("border-style",this.value)});var i=t.find(".border-width");i.on("change",function(){var t=this.value;(isNaN(t)||0>t)&&(t=1,this.value=t),n.borderWidth=t,e.getSettingComponent().find(".video-wrapper").css("border-width",t)});var r=t.find(".color-picker"),s=r.find("input"),l=r.find(".input-group-addon i");r.colorpicker({format:"hex",container:r.parent(),component:".input-group-addon",align:"left",colorSelectors:{transparent:"transparent"}}).on("changeColor.colorpicker",function(t){var o=t.color.toHex();s.val()&&0!==s.val().trim().length||(o="",l.css("background-color","")),n.borderColor=o,e.getSettingComponent().find(".video-wrapper").css("border-color",o)}),t.find(".chk-border").on("click",function(){a.prop("disabled",!this.checked).selectpicker("refresh"),i.prop("disabled",!this.checked),r.colorpicker(this.checked?"enable":"disable"),this.checked||(e.getSettingComponent().find(".video-wrapper").css("border",""),a.selectpicker("val",""),i.val(""),r.colorpicker("setValue","transparent"))});var d=t.find(".btn-videoFileInput");d.mselect({contentTypes:["video"],bs3Modal:!0,pagePath:window.location.pathname.replace("contenteditor",""),onSelectFile:function(t){e.getSettingComponent().find(".video-wrapper").attr("data-video-src",t),n.refreshVideoPlayerPreview(e)}});var c=t.find("#video-autoplay");c.on("click",function(){e.getSettingComponent().find(".video-wrapper").attr("data-autostart",this.checked),n.buildJWVideoPlayerPreview(e)});var p=t.find("#video-loop");p.on("click",function(){e.getSettingComponent().find(".video-wrapper").attr("data-repeat",this.checked),n.buildJWVideoPlayerPreview(e)});var m=t.find(".video-ratio");m.on("click",function(t){this.checked&&(e.getSettingComponent().find(".video-wrapper").attr("data-aspectratio",this.value),n.buildJWVideoPlayerPreview(e))});var u=t.find("#video-showcontrols");u.on("click",function(t){e.getSettingComponent().find(".video-wrapper").attr("data-controls",this.checked),n.buildJWVideoPlayerPreview(e)})},showSettingForm:function(t,e,n){o('showSettingForm "video" component',t,e);var a=e.find(".video-wrapper"),i=a.css("border-width")||"",r="0px"!==i,s=t.find(".chk-border"),l=t.find(".border-width"),d=t.find(".color-picker"),c=t.find(".select-border-style");s.prop("checked",r),c.prop("disabled",!r).selectpicker("refresh").selectpicker("val",a.css("border-style")),l.prop("disabled",!r).val(r?i.replace("px",""):""),d.colorpicker(r?"enable":"disable").colorpicker("setValue",r?a.css("border-color"):""),t.find("#video-autoplay").prop("checked","true"===a.attr("data-autostart")),t.find("#video-loop").prop("checked","true"===a.attr("data-repeat")),t.find(".video-ratio").filter('[value="'+a.attr("data-aspectratio")+'"]').prop("checked",!0),t.find("#video-showcontrols").prop("checked","true"===a.attr("data-controls"))},buildJWVideoPlayerPreview:function(t){t.jquery||(t=t.getSettingComponent());var e=t.find(".video-wrapper"),n=e.attr("data-video-src"),a=e.attr("data-autostart"),i=e.attr("data-repeat"),r=e.attr("data-aspectratio"),s=e.attr("data-controls"),l=jwplayer(e.attr("data-id")),d=n+"/alt-640-360.png";o("buildJWPlayer",n,"aspectratio=",r),l.setup({autostart:a,repeat:i,controls:s,aspectratio:r,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",width:"100%",androidhls:!0,playlist:[{image:d,sources:[{file:n},{file:n+"/../alt-640-360.webm"},{file:n+"/../alt-640-360.m4v"}]}],primary:"flash"}),l.onReady(function(){o("jwplayer preview init done")})},refreshVideoPlayerPreview:function(t){var e=t.getSettingComponent().find(".video-wrapper"),o=jwplayer(e.attr("data-id")),n=e.attr("data-video-src");o.load([{file:n}]),o.play()}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.vimeo={getContent:function(t,e){o('getContent "vimeo" component',t);var n=t.children(".keditor-component-content");return n.find(".vimeo-cover").remove(),n.html()},settingEnabled:!0,settingTitle:"Vimeo Settings",initSettingForm:function(t,e){o('initSettingForm "vimeo" component'),t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary btn-vimeo-edit">Change Video</button>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="vimeo-autoplay" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-vimeo-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-vimeo-43">4:3</button>       </div>   </div></form>');var n=t.find(".btn-vimeo-edit");n.on("click",function(t){t.preventDefault();var o=prompt("Please enter Vimeo URL in here:"),n=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,a=o.match(n);a&&a[1]?e.getSettingComponent().find(".embed-responsive-item").attr("src","https://player.vimeo.com/video/"+a[1]+"?byline=0&portrait=0&badge=0"):alert("Your Vimeo URL is invalid!")});var a=t.find(".btn-vimeo-169");a.on("click",function(t){t.preventDefault(),e.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9")});var i=t.find(".btn-vimeo-43");i.on("click",function(t){t.preventDefault(),e.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3")});var r=t.find("#vimeo-autoplay");r.on("click",function(){var t=e.getSettingComponent().find(".embed-responsive-item"),n=t.attr("src"),a=n.replace(/(\?.+)+/,"")+"?byline=0&portrait=0&badge=0&autoplay="+(r.is(":checked")?1:0);o("Current url: "+n,"New url: "+a),t.attr("src",a)})},showSettingForm:function(t,e,n){o('showSettingForm "vimeo" component',e);var a=e.find(".embed-responsive-item"),i=t.find("#vimeo-autoplay"),r=a.attr("src");i.prop("checked",-1!==r.indexOf("autoplay=1"))}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.youtube={getContent:function(t,e){o('getContent "youtube" component',t);var n=t.children(".keditor-component-content");return n.find(".youtube-cover").remove(),n.html()},settingEnabled:!0,settingTitle:"Youtube Settings",initSettingForm:function(t,e){o('initSettingForm "youtube" component'),t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary btn-youtube-edit">Change Video</button>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="youtube-autoplay" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-youtube-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-youtube-43">4:3</button>       </div>   </div></form>');var n=t.find(".btn-youtube-edit");n.on("click",function(t){t.preventDefault();var o=prompt("Please enter Youtube URL in here:"),n=/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"'>]+)/,a=o.match(n);a&&a[1]?e.getSettingComponent().find(".embed-responsive-item").attr("src","https://www.youtube.com/embed/"+a[1]):alert("Your Youtube URL is invalid!")});var a=t.find(".btn-youtube-169");a.on("click",function(t){t.preventDefault(),e.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9")});var i=t.find(".btn-youtube-43");i.on("click",function(t){t.preventDefault(),e.getSettingComponent().find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3")});var r=t.find("#youtube-autoplay");r.on("click",function(){var t=e.getSettingComponent().find(".embed-responsive-item"),n=t.attr("src"),a=n.replace(/(\?.+)+/,"")+"?autoplay="+(r.is(":checked")?1:0);o("Current url: "+n,"New url: "+a),t.attr("src",a)})},showSettingForm:function(t,e,n){o('showSettingForm "youtube" component',e);var a=e.find(".embed-responsive-item"),i=t.find("#youtube-autoplay"),r=a.attr("src");i.prop("checked",-1!==r.indexOf("autoplay=1"))}}}(jQuery);
//# sourceMappingURL=keditor-components-0.0.0.min.js.map
