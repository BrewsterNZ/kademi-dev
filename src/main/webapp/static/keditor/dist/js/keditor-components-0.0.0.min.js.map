{"version":3,"sources":["keditor-components-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","settingEnabled","init","contentArea","container","component","options","id","generateId","componentContent","children","find","attr","panels","each","index","item","p","itemId","panelCollapseId","title","html","indexOf","collapse","removeClass","prop","on","e","onComponentChanged","call","onContainerChanged","onContentChanged","editor","ckeditor","ckeditorOptions","onComponentReady","document","off","preventDefault","confirm","panelsCount","length","this","parents","remove","Msg","error","clone","first","append","getContent","h","parent","replaceWith","addClass","destroy","CKEDITOR","instances","jQuery","img","componentId","hasClass","wrap","src","width","autostart","instance","getScriptOnce","jwplayer","key","buildJWAudioPlayerPreview","settingTitle","initSettingForm","form","ajax","url","type","dataType","success","resp","showSettingForm","btnAudioFileInput","mselect","contentTypes","bs3Modal","pagePath","window","location","pathname","replace","onSelectFile","refreshAudioPlayerPreview","autoplayToggle","checked","audioWidth","val","value","resizeAudioPlayerPreview","playerInstance","setup","file","height","flashplayer","html5player","primary","onReady","load","play","resize","carousel","basePath","substr","lastIndexOf","carouselAddImage","carouselImageWrap","self","relUrl","hash","addImageToList","addImageToCarousel","getSettingComponent","sortable","handle","items","axis","tolerance","sort","update","rearrangeItems","body","btn","closest","siblings","refreshCarousel","comp","isWrap","pause","interval","cls","carouselImageItem","script","removeAttr","place","maptype","trigger","apiKey","mapjs","google","maps","places","not","data","event","initAutocomplete","input","i","setInterval","clearInterval","keyCode","iframe","alert","btn169","btn43","ratio169","ratio43","firstLoad","googleMapInitialized","setTimeout","mapdiv","map","Map","zoom","mapTypeId","searchBox","SearchBox","addListener","setBounds","getBounds","markers","getPlaces","forEach","marker","setMap","bounds","LatLngBounds","geometry","console","icon","size","Size","origin","Point","anchor","scaledSize","push","Marker","name","position","viewport","union","extend","fitBounds","initKeditorMapSetting","contentEditor","getData","css","buttonColorPicker","initSimpleColorPicker","color","paddingSettings","paddingValue","paddingProp","trim","isNaN","marginSettings","vectorMap","backgroundColor","zoomButtons","focusOn","x","y","scale","regionStyle","initial","fill","hover","onRegionTipShow","el","code","updateSize","arr","insertBefore","insertAfter","currentState","defaultState","txtLink","link","pattern","RegExp","span","next","formGroup","test","hide","show","cbbTarget","chkLinkable","is","unwrap","photoEdit","relativeUrl","fileType","inputAlign","panel","inputVAlign","inputResponsive","cbbStyle","inputWidth","inputHeight","newWidth","newHeight","Math","round","ratio","a","algin","valign","disableAutoInline","dtd","$removeEmpty","ckeditorPlace","contentHtml","componentTextContent","target","imageUrl","host","colorPicker","txt","styleName","get","style","marginValue","maxHeight","maxWidth","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","wrapper","buildJWVideoPlayerPreview","selectPicker","selectpicker","borderStyle","txtBorderWidth","borderWidth","previewer","colorpicker","format","align","colorSelectors","transparent","colorHex","toHex","borderColor","btnVideoFileInput","refreshVideoPlayerPreview","loopToggle","showcontrolsToggle","isBorderEnabled","chkBorder","filter","jquery","repeat","aspectratio","controls","posterHref","androidhls","playlist","image","sources","btnEdit","inputData","prompt","vimeoRegex","match","chkAutoplay","embedItem","currentUrl","newUrl","youtubeRegex"],"mappings":"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","file":"keditor-components-0.0.0.min.js","sourcesContent":["/**\r\n * KEditor Jumbotron Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['accordion'] = {\r\n        settingEnabled: false,\r\n\r\n        init: function (contentArea, container, component, keditor) {\r\n            var options = keditor.options;\r\n            var id = keditor.generateId('accordion');\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.accordionWrap .panel-group').attr('id', id);\r\n            componentContent.find('.accordionWrap a[data-toggle]').attr('data-parent', '#' + id);\r\n\r\n\r\n            var panels = componentContent.find('.panel');\r\n            panels.each(function (index, item) {\r\n                var p = $(item);\r\n                var itemId = keditor.generateId('heading' + index);\r\n                var panelCollapseId = keditor.generateId('collapse' + index);\r\n                p.find('.panel-heading').attr('id', itemId);\r\n                p.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\r\n                var title = p.find('a[data-toggle]').html();\r\n                if (title.indexOf('<div>') === -1) {\r\n                    p.find('a[data-toggle]').attr('href', '#' + panelCollapseId).html('<div>' + title + '</div>');\r\n                }\r\n            });\r\n\r\n            componentContent.find('.accordionWrap .panel-collapse').collapse('show');\r\n            componentContent.find('.panel-footer, .btnAddAccordionItem').removeClass('hide');\r\n            componentContent.find('.panel-title a div').prop('contenteditable', true);\r\n            componentContent.find('.panel-collapse .panel-body').prop('contenteditable', true);\r\n\r\n            componentContent.find('.panel-title a div, .panel-collapse .panel-body').on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(contentArea, e, component);\r\n                }\r\n\r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(contentArea, e, container);\r\n                }\r\n\r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(contentArea, e);\r\n                }\r\n            });\r\n\r\n            var editor = componentContent.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n\r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n\r\n            $(document).off('click', '.btnDeleteAccordionItem').on('click', '.btnDeleteAccordionItem', function (e) {\r\n                e.preventDefault();\r\n\r\n                if (confirm('Are you sure you want to delete this item?')) {\r\n                    var panelsCount = componentContent.find('.panel').length;\r\n                    if (panelsCount > 1) {\r\n                        $(this).parents('.panel').remove();\r\n                    } else {\r\n                        Msg.error('You cant delete the last item');\r\n                    }\r\n                }\r\n            });\r\n\r\n            $(document).off('click', '.btnAddAccordionItem').on('click', '.btnAddAccordionItem', function (e) {\r\n                e.preventDefault();\r\n                var clone = componentContent.find('.panel').first().clone();\r\n                var itemId = keditor.generateId('heading');\r\n                var panelCollapseId = keditor.generateId('collapse');\r\n                clone.find('.panel-heading').attr('id', itemId);\r\n                clone.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\r\n                clone.find('a[data-toggle]').attr('href', '#' + panelCollapseId);\r\n                componentContent.find('.accordionWrap .panel-group').append(clone);\r\n                var editor = clone.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\r\n                editor.on('instanceReady', function () {\r\n                    flog('CKEditor is ready', component);\r\n\r\n                    if (typeof options.onComponentReady === 'function') {\r\n                        options.onComponentReady.call(contentArea, component, editor);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        getContent: function (component, keditor) {\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.panel-title a div').each(function () {\r\n                var h = $(this).html();\r\n                $(this).parent('a').html(h);\r\n            });\r\n            componentContent.find('.panel-collapse .panel-body').each(function () {\r\n                var h = $(this).html();\r\n                $(this).replaceWith('<div class=\"panel-body\">' + h + '</div>');\r\n            });\r\n            componentContent.find('.panel-footer, .btnAddAccordionItem').addClass('hide');\r\n            return componentContent.html();\r\n        },\r\n\r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n\r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n\r\n/**\r\n * KEditor Audio Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['audio'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"audio\" component', component);\r\n            \r\n            this.component = component;\r\n            var img = component.find('img[data-src]');\r\n            var componentId = '';\r\n            if (!img.attr('id')) {\r\n                componentId = keditor.generateId('component-audio');\r\n                img.attr('id', componentId);\r\n            } else {\r\n                componentId = img.attr('id');\r\n            }\r\n            if (!img.parent().hasClass('audio-wrapper')) {\r\n                img.wrap('<div class=\"audio-wrapper\"></div>');\r\n            }\r\n            this.src = img.attr('data-src');\r\n            this.width = img.attr('data-width');\r\n            this.autostart = img.attr('data-autostart') === 'true';\r\n            var instance = this;\r\n            $.getScriptOnce('/static/jwplayer/6.10/jwplayer.js', function () {\r\n                jwplayer.key = 'cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=';\r\n                instance.buildJWAudioPlayerPreview(componentId);\r\n            });\r\n            \r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"audio\" component', component);\r\n            \r\n            var img = component.find('img[data-src]');\r\n            var componentId = img.attr('id');\r\n            \r\n            var html = '<img data-componentId=\"' + componentId + '\" src=\"/theme/apps/content/preview/audio.png\" data-autostart=\"' + this.autostart + '\" data-width=\"' + this.width + '\" data-src=\"' + this.src + '\" data-kaudio=\"' + this.src + '\" />';\r\n            return html;\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Audio settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"audio\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentAudioSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"audio\" component', form, component);\r\n            \r\n            var instance = this;\r\n            var btnAudioFileInput = form.find('.btn-audioFileInput');\r\n            btnAudioFileInput.mselect({\r\n                contentTypes: ['audio'],\r\n                bs3Modal: true,\r\n                pagePath: window.location.pathname.replace('contenteditor', ''),\r\n                onSelectFile: function (url) {\r\n                    instance.src = url;\r\n                    instance.refreshAudioPlayerPreview();\r\n                }\r\n            });\r\n            \r\n            var img = component.find('img[data-src]');\r\n            var componentId = img.attr('id');\r\n            \r\n            var autoplayToggle = form.find('#audio-autoplay');\r\n            if (this.autostart) {\r\n                autoplayToggle.prop('checked', true);\r\n            }\r\n            autoplayToggle.on('click', function (e) {\r\n                instance.autostart = this.checked;\r\n                instance.buildJWAudioPlayerPreview(componentId);\r\n            });\r\n            \r\n            var audioWidth = form.find('#audio-width');\r\n            audioWidth.val(this.width);\r\n            audioWidth.on('change', function () {\r\n                instance.width = this.value;\r\n                instance.resizeAudioPlayerPreview();\r\n            });\r\n        },\r\n        \r\n        buildJWAudioPlayerPreview: function (componentId) {\r\n            var width = this.width;\r\n            var src = this.src;\r\n            var autostart = this.autostart;\r\n            var playerInstance = jwplayer(componentId);\r\n            playerInstance.setup({\r\n                file: src,\r\n                width: width,\r\n                height: 30,\r\n                autostart: autostart,\r\n                flashplayer: \"/static/jwplayer/6.10/jwplayer.flash.swf\",\r\n                html5player: \"/static/jwplayer/6.10/jwplayer.html5.js\",\r\n                primary: \"flash\"\r\n            });\r\n            playerInstance.onReady(function () {\r\n                log('jwplayer preview init done');\r\n            });\r\n        },\r\n        \r\n        refreshAudioPlayerPreview: function () {\r\n            var instance = this;\r\n            var playerInstance = jwplayer(instance.componentId);\r\n            var src = instance.src;\r\n            playerInstance.load([{\r\n                file: src\r\n            }]);\r\n            playerInstance.play();\r\n        },\r\n        \r\n        resizeAudioPlayerPreview: function () {\r\n            var instance = this;\r\n            var playerInstance = jwplayer(instance.componentId);\r\n            var width = instance.width;\r\n            \r\n            playerInstance.resize(width, 30);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n/**\r\n * Created by Anh on 7/27/2016.\r\n */\r\n/**\r\n * KEditor Carousel Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['carousel'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"carousel\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var carousel = componentContent.find('.carousel');\r\n            var id = keditor.generateId('component-carousel');\r\n            carousel.attr('id', id);\r\n            carousel.find('.carousel-indicators li').attr('data-target', id);\r\n            carousel.find('.carousel-control').attr('href', '#' + id);\r\n        },\r\n        getContent: function (component, keditor) {\r\n            var componentContent = component.children('.keditor-component-content');\r\n            return componentContent.html();\r\n        },\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Carousel settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"carousel\" settings', form);\r\n    \r\n            return $.ajax({\r\n                url: '/static/keditor/componentCarouselSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n    \r\n                    var basePath = window.location.pathname.substr(0, window.location.pathname.lastIndexOf('/') + 1);\r\n                    var carouselAddImage = form.find('.carouselAddImage');\r\n                    var carouselImageWrap = form.find('.carouselImageWrap');\r\n                    var self = this;\r\n    \r\n                    carouselAddImage.mselect({\r\n                        contentTypes: ['image'],\r\n                        bs3Modal: true,\r\n                        pagePath: basePath,\r\n                        basePath: basePath,\r\n                        onSelectFile: function (url, relUrl, type, hash) {\r\n                            flog('keditor carousel selected a file', url, hash);\r\n                            self.addImageToList(form, url, hash);\r\n                            self.addImageToCarousel(keditor.getSettingComponent(), url, hash);\r\n                        }\r\n                    });\r\n    \r\n                    carouselImageWrap.sortable({\r\n                        handle: '.btn-sort-image',\r\n                        items: '> .carouselImageItem',\r\n                        axis: 'y',\r\n                        tolerance: 'pointer',\r\n                        sort: function () {\r\n                            $(this).removeClass('ui-state-default');\r\n                        },\r\n                        update: function () {\r\n                            self.rearrangeItems(keditor.getSettingComponent(),form);\r\n                        }\r\n                    });\r\n    \r\n                    $(document.body).on('click', '.carouselImageItem a.btn-remove-image', function (e) {\r\n                        e.preventDefault();\r\n        \r\n                        if (confirm('Are you sure that you want to delete this image?')) {\r\n                            var btn = $(this);\r\n                            var hash = btn.closest('.btn-group').siblings('[data-hash]').attr('data-hash');\r\n            \r\n                            self.refreshCarousel(keditor.getSettingComponent(), hash);\r\n                            btn.closest('.carouselImageItem').remove();\r\n                        }\r\n                    });\r\n    \r\n                    form.find('.carouselPause').on('change', function (e) {\r\n                        e.preventDefault();\r\n                        var comp = keditor.getSettingComponent().find('.carousel');\r\n                        comp.attr('data-pause', this.value);\r\n                    });\r\n    \r\n                    form.find('.carouselInterval').on('change', function (e) {\r\n                        e.preventDefault();\r\n                        var comp = keditor.getSettingComponent().find('.carousel');\r\n                        comp.attr('data-interval', this.value);\r\n                    });\r\n    \r\n                    form.find('.carouselWrap').on('click', function (e) {\r\n                        var comp = keditor.getSettingComponent().find('.carousel');\r\n                        if (this.checked) {\r\n                            comp.attr('data-wrap', 'true');\r\n                        } else {\r\n                            comp.attr('data-wrap', 'false');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            var self = this;\r\n            form.find('.carouselImageWrap').html('');\r\n            component.find('.carousel-inner > .item').each(function (index, item) {\r\n                var url = $(item).find('img').attr('src');\r\n                var hash = $(item).attr('data-hash');\r\n                self.addImageToList(form, url, hash);\r\n            });\r\n\r\n            var isWrap = component.find('.carousel').attr('data-wrap');\r\n            var pause = component.find('.carousel').attr('data-pause');\r\n            var interval = component.find('.carousel').attr('data-interval');\r\n\r\n            form.find('.carouselPause').val(pause);\r\n            form.find('.carouselInterval').val(interval);\r\n            form.find('.carouselWrap').prop('checked', isWrap === 'true');\r\n        },\r\n\r\n        addImageToCarousel: function (component, url, hash) {\r\n            var carousel = component.find('.carousel');\r\n            var index = carousel.find('.carousel-indicators').children().length;\r\n            var cls = index === 0 ? 'active' : '';\r\n            carousel.find('.carousel-indicators').append('<li data-target=\"' + carousel.attr('id') + '\" data-slide-to=\"' + index + '\" class=\"' + cls + '\"></li>');\r\n\r\n            carousel.find('.carousel-inner').append(\r\n                '<div data-hash=\"' + hash + '\" class=\"item ' + cls + '\">' +\r\n                '   <img src=\"' + url + '\" alt=\"\" width=\"100%\" height=\"\" />' +\r\n                '   <div class=\"carousel-caption\"></div>' +\r\n                '</div>'\r\n            );\r\n        },\r\n\r\n        addImageToList: function (form, src, hash) {\r\n            form.find('.carouselImageWrap').append(\r\n                '<div class=\"carouselImageItem\">' +\r\n                '   <img class=\"img-responsive\" src=\"' + src + '\" data-hash=\"' + hash + '\" />' +\r\n                '   <div class=\"btn-group btn-group-sm\">' +\r\n                '       <a class=\"btn btn-info btn-sort-image\" href=\"#\"><i class=\"fa fa-sort\"></i></a>' +\r\n                '       <a title=\"Delete this image\" class=\"btn btn-danger btn-remove-image\" href=\"#\"><i class=\"fa fa-trash\"></i></a>' +\r\n                '   </div>' +\r\n                '</div>'\r\n            );\r\n        },\r\n\r\n        refreshCarousel: function (component, hash) {\r\n            component.find('[data-hash=' + hash + ']').remove();\r\n            if (!component.find('.carousel-inner .item.active').length) {\r\n                component.find('.carousel-inner .item:first-child').addClass('active');\r\n            }\r\n            component.find('.carousel-indicators li:last-child').remove();\r\n        },\r\n\r\n        rearrangeItems: function (component, form) {\r\n            var self = this;\r\n            var carousel = component.find('.carousel');\r\n            carousel.find('.carousel-inner').html('');\r\n            carousel.find('.carousel-indicators').html('');\r\n\r\n            form.find('.carouselImageWrap').find('.carouselImageItem').each(function () {\r\n                var carouselImageItem = $(this);\r\n                var img = carouselImageItem.find('img');\r\n\r\n                self.addImageToCarousel(component, img.attr('src'), img.attr('data-hash'));\r\n            });\r\n        }\r\n    }\r\n\r\n})(jQuery);\r\n/**\r\n * KEditor Google Map Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['googlemap'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            var script = component.find('script');\r\n            if (script.length) {\r\n                script.remove();\r\n            }\r\n            component.removeAttr('data-firstLoad');\r\n            var place = component.attr('data-place');\r\n            var maptype = component.attr('data-maptype');\r\n            if (place && maptype === 'manually') {\r\n                $(window).on('load', function () {\r\n                    component.find('.btn-component-setting').trigger('click');\r\n                });\r\n            }\r\n        },\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"googlemap\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.googlemap-cover').remove();\r\n            var place = component.attr('data-place');\r\n            var maptype = component.attr('data-maptype');\r\n            component.find('.kgooglemap').html('');\r\n            var script = '<script>$(function(){if(!$(document.body).hasClass(\"content-editor-page\")){var apiKey=\"AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs\";var s=document.createElement(\"script\");s.type=\"text/javascript\";s.async=true;s.defer=true;s.src=\"https://maps.googleapis.com/maps/api/js?key=\"+apiKey+\"&callback=kgooglemapInit&libraries=places\";$(\"head\").append(s);window.kgooglemapInit=function(){var mapdiv=$(\".kgooglemap\").not(\".hide\");mapdiv.each(function(){var parent=$(this).parents(\"[data-type=component-googlemap]\");if(parent.attr(\"data-maptype\")!==\"manually\")return;var map=new google.maps.Map(this,{zoom:13,mapTypeId:\"roadmap\"});var place=parent.attr(\"data-place\");var input=parent.find(\"input\")[0];input.value=place;var searchBox=new google.maps.places.SearchBox(input);map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);setTimeout(function(){google.maps.event.trigger(input,\"focus\");google.maps.event.trigger(input,\"keydown\",{keyCode:13});},500);map.addListener(\"bounds_changed\",function(){searchBox.setBounds(map.getBounds());});var markers=[];searchBox.addListener(\"places_changed\",function(){var places=searchBox.getPlaces();if(places.length==0){return;}markers.forEach(function(marker){marker.setMap(null);});markers=[];var bounds=new google.maps.LatLngBounds();places.forEach(function(place){if(!place.geometry){console.log(\"Returned place contains no geometry\");return;}var icon={url:place.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};markers.push(new google.maps.Marker({map:map,icon:icon,title:place.name,position:place.geometry.location}));if(place.geometry.viewport){bounds.union(place.geometry.viewport);}else{bounds.extend(place.geometry.location);}});map.fitBounds(bounds);});})}}});</script>';\r\n            component.find('.embed-responsive').append(script);\r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Google Map Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"googlemap\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentGoogleMapSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    var apiKey = 'AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs';\r\n                    var mapjs = '<script src=\"https://maps.googleapis.com/maps/api/js?key=' + apiKey + '&callback=initKeditorMapSetting&libraries=places\" async defer></script>';\r\n                    if (window.google && window.google.maps && google.maps.places) {\r\n                        mapjs = '';\r\n                    }\r\n                    \r\n                    form.append(\r\n                        mapjs + resp\r\n                    );\r\n                    \r\n                    form.find('.mapType').on('click', function (e) {\r\n                        if (this.checked) {\r\n                            $('.' + this.value).removeClass('hide');\r\n                            var cls = form.find('.mapType').not(this).val();\r\n                            $('.' + cls).addClass('hide');\r\n                            var comp = keditor.getSettingComponent();\r\n                            comp.attr('data-maptype', this.value);\r\n                            if (this.value === 'manually') {\r\n                                comp.find('iframe').addClass('hide');\r\n                                comp.find('.kgooglemap').removeClass('hide');\r\n                                if (comp.find('.kgooglemap').data('map')) {\r\n                                    google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\r\n                                } else {\r\n                                    self.initAutocomplete(comp, form);\r\n                                    var input = form.find('[name=mapAddress]')[0];\r\n                                    var i = setInterval(function () {\r\n                                        if (comp.find('.kgooglemap').data('map')) {\r\n                                            clearInterval(i);\r\n                                            google.maps.event.trigger(input, 'focus')\r\n                                            google.maps.event.trigger(input, 'keydown', {\r\n                                                keyCode: 13\r\n                                            });\r\n                                        }\r\n                                    }, 100);\r\n                                }\r\n                            } else {\r\n                                comp.find('iframe').removeClass('hide');\r\n                                comp.find('.kgooglemap').addClass('hide');\r\n                            }\r\n                        }\r\n                    });\r\n                    \r\n                    var self = this;\r\n                    form.find('[name=mapEmbedCode]').on('change', function () {\r\n                        var iframe = $(this.value);\r\n                        var src = iframe.attr('src');\r\n                        if (iframe.length > 0 && src && src.length > 0) {\r\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', src);\r\n                        } else {\r\n                            alert('Your Google Map embed code is invalid!');\r\n                        }\r\n                    });\r\n                    \r\n                    var btn169 = form.find('.btn-googlemap-169');\r\n                    var btn43 = form.find('.btn-googlemap-43');\r\n                    \r\n                    btn169.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        $(this).addClass('btn-primary').removeClass('btn-default');\r\n                        btn43.removeClass('btn-primary').addClass('btn-default');\r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n                        var comp = keditor.getSettingComponent();\r\n                        if (comp.attr('maptype') === 'manually') {\r\n                            if (comp.find('.kgooglemap').data('map')) {\r\n                                google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\r\n                            }\r\n                        }\r\n                    });\r\n                    \r\n                    btn43.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        $(this).addClass('btn-primary').removeClass('btn-default');\r\n                        btn169.removeClass('btn-primary').addClass('btn-default');\r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n                        var comp = keditor.getSettingComponent();\r\n                        if (comp.attr('maptype') === 'manually') {\r\n                            if (comp.find('.kgooglemap').data('map')) {\r\n                                google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        showSettingForm: function (form, component, keditor) {\r\n            var self = this;\r\n            var maptype = component.attr('data-maptype');\r\n            var place = component.attr('data-place');\r\n            var ratio169 = component.find('.embed-responsive').hasClass('embed-responsive-16by9');\r\n            var ratio43 = component.find('.embed-responsive').hasClass('embed-responsive-4by3');\r\n            if (ratio43) {\r\n                form.find('.btn-googlemap-43').addClass('btn-primary').removeClass('btn-default');\r\n            }\r\n            if (ratio169) {\r\n                form.find('.btn-googlemap-169').addClass('btn-primary').removeClass('btn-default');\r\n            }\r\n            form.find('.mapType[value=' + maptype + ']').prop('checked', true);\r\n            var src = component.find('iframe').attr('src');\r\n            var iframe = '<iframe class=\"embed-responsive-item\" src=\"' + src + '\"></iframe>';\r\n            if (!place) {\r\n                place = 'Hanoi, Vietnam';\r\n            }\r\n            form.find('[name=mapAddress]').val(place);\r\n            form.find('[name=mapEmbedCode]').val(iframe);\r\n            var firstLoad = component.attr('data-firstLoad');\r\n            if (maptype === 'manually') {\r\n                form.find('.manually').removeClass('hide').siblings('.embed').addClass('hide');\r\n                \r\n                if (!firstLoad && place) {\r\n                    var i = setInterval(function () {\r\n                        if (window.googleMapInitialized) {\r\n                            clearInterval(i);\r\n                            self.initAutocomplete(component, form);\r\n                            setTimeout(function () {\r\n                                var input = form.find('[name=mapAddress]')[0];\r\n                                google.maps.event.trigger(input, 'focus')\r\n                                google.maps.event.trigger(input, 'keydown', {\r\n                                    keyCode: 13\r\n                                });\r\n                                component.attr('data-firstLoad', 'false');\r\n                            }, 1000);\r\n                        }\r\n                    }, 100);\r\n                }\r\n            } else {\r\n                form.find('.manually').addClass('hide').siblings('.embed').removeClass('hide');\r\n            }\r\n        },\r\n        \r\n        initAutocomplete: function (component, form) {\r\n            if (!window.googleMapInitialized) {\r\n                alert('google map is not initialized');\r\n                return;\r\n            }\r\n            var mapdiv = component.find('.kgooglemap')[0];\r\n            var map = new google.maps.Map(mapdiv, {\r\n                zoom: 13,\r\n                mapTypeId: 'roadmap'\r\n            });\r\n            // Create the search box and link it to the UI element.\r\n            var input = form.find('[name=mapAddress]')[0];\r\n            var searchBox = new google.maps.places.SearchBox(input);\r\n            //map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\r\n            \r\n            // Bias the SearchBox results towards current map's viewport.\r\n            map.addListener('bounds_changed', function () {\r\n                searchBox.setBounds(map.getBounds());\r\n            });\r\n            \r\n            var markers = [];\r\n            // Listen for the event fired when the user selects a prediction and retrieve\r\n            // more details for that place.\r\n            \r\n            searchBox.addListener('places_changed', function () {\r\n                var places = searchBox.getPlaces();\r\n                \r\n                if (places.length == 0) {\r\n                    return;\r\n                }\r\n                \r\n                // Clear out the old markers.\r\n                markers.forEach(function (marker) {\r\n                    marker.setMap(null);\r\n                });\r\n                markers = [];\r\n                // For each place, get the icon, name and location.\r\n                var bounds = new google.maps.LatLngBounds();\r\n                places.forEach(function (place) {\r\n                    if (!place.geometry) {\r\n                        console.log(\"Returned place contains no geometry\");\r\n                        return;\r\n                    }\r\n                    \r\n                    var icon = {\r\n                        url: place.icon,\r\n                        size: new google.maps.Size(71, 71),\r\n                        origin: new google.maps.Point(0, 0),\r\n                        anchor: new google.maps.Point(17, 34),\r\n                        scaledSize: new google.maps.Size(25, 25)\r\n                    };\r\n                    \r\n                    // Create a marker for each place.\r\n                    markers.push(new google.maps.Marker({\r\n                        map: map,\r\n                        icon: icon,\r\n                        title: place.name,\r\n                        position: place.geometry.location\r\n                    }));\r\n                    \r\n                    if (place.geometry.viewport) {\r\n                        // Only geocodes have viewport.\r\n                        bounds.union(place.geometry.viewport);\r\n                    } else {\r\n                        bounds.extend(place.geometry.location);\r\n                    }\r\n                });\r\n                map.fitBounds(bounds);\r\n                component.attr('data-place', input.value);\r\n            });\r\n            \r\n            component.find('.kgooglemap').data('map', map);\r\n        }\r\n    };\r\n    \r\n    window.initKeditorMapSetting = function () {\r\n        window.googleMapInitialized = true;\r\n    }\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Jumbotron Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var contentEditor = $.contentEditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['jumbotron'] = {\r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Jumbotron Settings',\r\n        init: function (contentArea, container, component, keditor) {\r\n            var self = this;\r\n            var options = keditor.options;\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.prop('contenteditable', true);\r\n            \r\n            componentContent.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(contentArea, e, component);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(contentArea, e, container);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(contentArea, e);\r\n                }\r\n            });\r\n            \r\n            var editor = componentContent.ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n                \r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"jumbotron\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var id = componentContent.attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                return editor.getData();\r\n            } else {\r\n                return componentContent.html();\r\n            }\r\n        },\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"jumbotron\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentJumbotronSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    form.find('.chk-inverse').on('click', function () {\r\n                        var comp = keditor.getSettingComponent();\r\n                        comp.find('.jumbotron')[this.checked ? 'addClass' : 'removeClass']('jumbotron-inverse');\r\n                    });\r\n                    \r\n                    form.find('[name=rounded]').on('click', function (e) {\r\n                        var comp = keditor.getSettingComponent();\r\n                        if (this.value == 'false') {\r\n                            comp.find('.jumbotron').css('border-radius', '0');\r\n                        } else {\r\n                            comp.find('.jumbotron').css('border-radius', '');\r\n                        }\r\n                    });\r\n                    \r\n                    var buttonColorPicker = form.find('.button-color-picker');\r\n                    contentEditor.initSimpleColorPicker(buttonColorPicker, function (color) {\r\n                        var comp = keditor.getSettingComponent();\r\n                        comp.find('.jumbotron').css('background-color', color);\r\n                        comp.attr('data-bgcolor', color);\r\n                    });\r\n                    \r\n                    var paddingSettings = form.find('.paddingSettings');\r\n                    paddingSettings.on('change', function () {\r\n                        var paddingValue = this.value || '';\r\n                        var component = keditor.getSettingComponent();\r\n                        var paddingProp = $(this).attr('name');\r\n                        if (paddingValue.trim() === '') {\r\n                            component.find('.jumbotron').css(paddingProp, '');\r\n                        } else {\r\n                            if (isNaN(paddingValue)) {\r\n                                paddingValue = 0;\r\n                                this.value = paddingValue;\r\n                            }\r\n                            component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\r\n                        }\r\n                    });\r\n                    \r\n                    var marginSettings = form.find('.marginSettings');\r\n                    marginSettings.on('change', function () {\r\n                        var paddingValue = this.value || '';\r\n                        var component = keditor.getSettingComponent();\r\n                        var paddingProp = $(this).attr('name');\r\n                        if (paddingValue.trim() === '') {\r\n                            component.find('.jumbotron').css(paddingProp, '');\r\n                        } else {\r\n                            if (isNaN(paddingValue)) {\r\n                                paddingValue = 0;\r\n                                this.value = paddingValue;\r\n                            }\r\n                            component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"jumbotron\" component', component);\r\n            form.find('[name=button-color]').val(component.attr('data-bgcolor')).trigger('update');\r\n            form.find('.paddingSettings').each(function () {\r\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px', ''));\r\n            });\r\n            form.find('.marginSettings').each(function () {\r\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px', ''));\r\n            });\r\n            form.find('[name=showButton][value=false]').prop('checked', component.find('a').hasClass('hide'));\r\n            form.find('[name=rounded][value=false]').prop('checked', component.find('.jumbotron').css('border-radius').replace('px', '') === '0');\r\n            form.find('.chk-inverse').prop('checked', component.find('.jumbotron').hasClass('jumbotron-inverse'));\r\n        },\r\n        \r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n            \r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n\r\n/**\r\n * KEditor SVG Map Component (Australia)\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['ksvgmap'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            var script = component.find('script');\r\n            if (script.length) {\r\n                script.remove();\r\n            }\r\n            if (component.attr('data-height')) {\r\n                component.find('.ksvgmap').css('height', +component.attr('data-height'));\r\n            }\r\n            $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js', function () {\r\n                $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-au-mill.js', function () {\r\n                    component.find('.ksvgmap').vectorMap({\r\n                        map: 'au_mill',\r\n                        backgroundColor: '#fff',\r\n                        zoomButtons: false,\r\n                        focusOn: {\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            scale: 1\r\n                        },\r\n                        regionStyle: {\r\n                            initial: {\r\n                                fill: '#efefef'\r\n                            },\r\n                            hover: {\r\n                                fill: \"#00aa90\"\r\n                            }\r\n                        },\r\n                        onRegionTipShow: function (e, el, code) {\r\n                            if (component.attr('data-' + code))\r\n                                el.html(el.html() + ' - ' + component.attr('data-' + code));\r\n                        }\r\n                    });\r\n                    var i = setInterval(function () {\r\n                        try {\r\n                            var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\r\n                            map.updateSize();\r\n                            clearInterval(i);\r\n                        } catch (e) {\r\n                            flog('trying to get jvectormap object');\r\n                        }\r\n                    }, 50);\r\n                });\r\n            });\r\n        },\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"svgmap\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var script = '<script>$(function(){$(document.body).hasClass(\"content-editor-page\")||$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js\",function(){$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-au-mill.js\",function(){$(\".ksvgmap\").each(function(){var a=$(this).parents(\"[data-type=component-ksvgmap]\");a.hasClass(\"ksvgInit\")||(a.addClass(\"ksvgInit\"),$(this).vectorMap({map:\"au_mill\",backgroundColor:\"#fff\",zoomButtons:!1,scale:5,regionStyle:{initial:{fill:\"#efefef\"},hover:{fill:\"#00aa90\"}},onRegionTipShow:function(b,c,d){a.attr(\"data-\"+d)&&c.html(\"<span class=\\'vectormap-tip-region-name\\'>\"+c.html()+\"</span><span class=\\'vectormap-tip-separator\\'> - </span><span class=\\'vectormap-tip-region-data\\'>\"+a.attr(\"data-\"+d)+\"</span>\")}}))})})})});</script>';\r\n            var css = '<link rel=\"stylesheet\" href=\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.css\">';\r\n            component.find('.jvectormap-container').remove();\r\n            var arr = $(document.body).find('[data-type=\"component-ksvgmap\"]:not(.keditor-snippet)');\r\n            if (arr.length > 0) {\r\n                if ($(arr[arr.length - 1]).attr('id') === component.attr('id')) {\r\n                    $(css).insertBefore(component.find('.ksvgmap'));\r\n                    $(script).insertAfter(component.find('.ksvgmap'));\r\n                }\r\n            }\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'SVGMap Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"svgmap\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentKsvgMapSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var component = keditor.getSettingComponent();\r\n                    form.find('.state').on('change', function (e) {\r\n                        var val = component.attr('data-' + this.value);\r\n                        form.find('.stateMessage').val(val);\r\n                    });\r\n                    form.find('.stateMessage').on('change', function (e) {\r\n                        var currentState = form.find('.state').val();\r\n                        component.attr('data-' + currentState, this.value);\r\n                    });\r\n                    form.find('.height').on('change', function (e) {\r\n                        component.attr('data-height', this.value);\r\n                        component.find('.ksvgmap').css('height', this.value);\r\n                        var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\r\n                        map.updateSize();\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        showSettingForm: function (form, component, keditor) {\r\n            var height = component.attr('data-height');\r\n            var defaultState = form.find('.state').val();\r\n            form.find('.height').val(height);\r\n            form.find('.stateMessage').val(component.attr('data-' + defaultState));\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Photo Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['photo'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"photo\" component', component);\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            var img = componentContent.find('img');\r\n            \r\n            img.css('display', 'inline-block');\r\n            if (!img.css('vertical-align')) {\r\n                img.css('vertical-align', 'middle');\r\n            }\r\n            \r\n            var options = keditor.options;\r\n            if (typeof options.onComponentReady === 'function') {\r\n                options.onComponentReady.call(contentArea, component);\r\n            }\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Photo Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"photo\" settings', form);\r\n            \r\n            var self = this;\r\n            var options = keditor.options;\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentPhotoSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var txtLink = form.find('#photo-link');\r\n                    txtLink.on('change', function () {\r\n                        var link = this.value.trim();\r\n                        var pattern = new RegExp('^[a-zA-Z0-9_/%:/./-]+$');\r\n                        var span = txtLink.next();\r\n                        var formGroup = txtLink.closest('.form-group');\r\n                        \r\n                        if (pattern.test(link)) {\r\n                            keditor.getSettingComponent().find('a').attr('href', link);\r\n                            span.hide();\r\n                            formGroup.removeClass('has-error');\r\n                        } else {\r\n                            span.show();\r\n                            formGroup.addClass('has-error');\r\n                        }\r\n                    });\r\n                    \r\n                    var cbbTarget = form.find('#photo-target');\r\n                    cbbTarget.on('change', function () {\r\n                        keditor.getSettingComponent().find('a').attr('target', this.value);\r\n                    });\r\n                    \r\n                    var chkLinkable = form.find('#photo-linkable');\r\n                    chkLinkable.on('click', function () {\r\n                        var img = keditor.getSettingComponent().find('img');\r\n                        \r\n                        if (chkLinkable.is(':checked')) {\r\n                            txtLink.prop('disabled', false);\r\n                            cbbTarget.prop('disabled', false);\r\n                            img.wrap('<a href=\"\"></a>');\r\n                        } else {\r\n                            txtLink.prop('disabled', true);\r\n                            cbbTarget.prop('disabled', true);\r\n                            img.unwrap('a');\r\n                        }\r\n                    });\r\n                    \r\n                    var photoEdit = form.find('#photo-edit');\r\n                    photoEdit.mselect({\r\n                        contentTypes: ['image'],\r\n                        bs3Modal: true,\r\n                        pagePath: options.pagePath,\r\n                        basePath: options.basePath,\r\n                        onSelectFile: function (url, relativeUrl, fileType, hash) {\r\n                            var img = keditor.getSettingComponent().find('img');\r\n                            img.attr('src', \"/_hashes/files/\" + hash);\r\n                            self.showSettingForm(form, keditor.getSettingComponent(), options);\r\n                        }\r\n                    });\r\n                    \r\n                    var inputAlign = form.find('#photo-align');\r\n                    inputAlign.on('change', function () {\r\n                        var panel = keditor.getSettingComponent().find('.photo-panel');\r\n                        panel.css('text-align', this.value);\r\n                    });\r\n                    \r\n                    var inputVAlign = form.find('#v-align');\r\n                    inputVAlign.on('change', function () {\r\n                        var panel = keditor.getSettingComponent().find('.photo-panel').find('img');\r\n                        panel.css('vertical-align', this.value);\r\n                    });\r\n                    \r\n                    var inputResponsive = form.find('#photo-responsive');\r\n                    inputResponsive.on('click', function () {\r\n                        keditor.getSettingComponent().find('img')[this.checked ? 'addClass' : 'removeClass']('img-responsive');\r\n                    });\r\n                    \r\n                    var cbbStyle = form.find('#photo-style');\r\n                    cbbStyle.on('change', function () {\r\n                        var img = keditor.getSettingComponent().find('img');\r\n                        var val = this.value;\r\n                        \r\n                        img.removeClass('img-rounded img-circle img-thumbnail');\r\n                        if (val) {\r\n                            img.addClass(val);\r\n                        }\r\n                    });\r\n                    \r\n                    var inputWidth = form.find('#photo-width');\r\n                    var inputHeight = form.find('#photo-height');\r\n                    inputWidth.on('change', function () {\r\n                        var img = keditor.getSettingComponent().find('img');\r\n                        var newWidth = +this.value;\r\n                        var newHeight = Math.round(newWidth / self.ratio);\r\n                        \r\n                        if (newWidth <= 0) {\r\n                            newWidth = self.width;\r\n                            newHeight = self.height;\r\n                            this.value = newWidth;\r\n                        }\r\n                        \r\n                        img.css({\r\n                            'width': newWidth,\r\n                            'height': newHeight\r\n                        });\r\n                        inputHeight.val(newHeight);\r\n                    });\r\n                    inputHeight.on('change', function () {\r\n                        var img = keditor.getSettingComponent().find('img');\r\n                        var newHeight = +this.value;\r\n                        var newWidth = Math.round(newHeight * self.ratio);\r\n                        \r\n                        if (newHeight <= 0) {\r\n                            newWidth = self.width;\r\n                            newHeight = self.height;\r\n                            this.value = newHeight;\r\n                        }\r\n                        \r\n                        img.css({\r\n                            'height': newHeight,\r\n                            'width': newWidth\r\n                        });\r\n                        inputWidth.val(newWidth);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"photo\" component', component);\r\n            \r\n            var self = this;\r\n            var inputAlign = form.find('#photo-align');\r\n            var inputVAlign = form.find('#v-align');\r\n            var inputResponsive = form.find('#photo-responsive');\r\n            var inputWidth = form.find('#photo-width');\r\n            var inputHeight = form.find('#photo-height');\r\n            var cbbStyle = form.find('#photo-style');\r\n            var txtLink = form.find('#photo-link');\r\n            var cbbTarget = form.find('#photo-target');\r\n            var chkLinkable = form.find('#photo-linkable');\r\n            \r\n            txtLink.next().hide();\r\n            txtLink.closest('.form-group').removeClass('has-error');\r\n            \r\n            var panel = component.find('.photo-panel');\r\n            var img = panel.find('img');\r\n            \r\n            var a = img.parent('a');\r\n            if (a.length > 0) {\r\n                chkLinkable.prop('checked', true);\r\n                txtLink.prop('disabled', false).val(a.attr('href'));\r\n                cbbTarget.prop('disabled', false).val(a.attr('target'));\r\n            } else {\r\n                chkLinkable.prop('checked', false);\r\n                txtLink.prop('disabled', true).val('');\r\n                cbbTarget.prop('disabled', true).val('');\r\n            }\r\n            \r\n            var algin = panel.css('text-align');\r\n            if (algin !== 'right' || algin !== 'center') {\r\n                algin = 'left';\r\n            }\r\n            \r\n            var valign = img.css('vertical-align');\r\n            \r\n            if (img.hasClass('img-rounded')) {\r\n                cbbStyle.val('img-rounded');\r\n            } else if (img.hasClass('img-circle')) {\r\n                cbbStyle.val('img-circle');\r\n            } else if (img.hasClass('img-thumbnail')) {\r\n                cbbStyle.val('img-thumbnail');\r\n            } else {\r\n                cbbStyle.val('');\r\n            }\r\n            inputAlign.val(algin);\r\n            inputVAlign.val(valign);\r\n            inputResponsive.prop('checked', img.hasClass('img-responsive'));\r\n            inputWidth.val(img.width());\r\n            inputHeight.val(img.height());\r\n            \r\n            $('<img />').attr('src', img.attr('src')).load(function () {\r\n                self.ratio = this.width / this.height;\r\n                self.width = this.width;\r\n                self.height = this.height;\r\n            });\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Text Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var contentEditor = $.contentEditor;\r\n    var flog = KEditor.log;\r\n    \r\n    CKEDITOR.disableAutoInline = true;\r\n    CKEDITOR.dtd.$removeEmpty['i'] = false;\r\n    \r\n    // Text component\r\n    // ---------------------------------------------------------------------\r\n    KEditor.components['text'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"text\" component', component);\r\n            \r\n            var options = keditor.options;\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var ckeditorPlace = componentContent.find('.keditor-component-text-content-inner');\r\n            \r\n            if (ckeditorPlace.length === 0) {\r\n                var contentHtml = componentContent.html();\r\n                ckeditorPlace = $('<div class=\"keditor-component-text-content-inner clearfix\"></div>');\r\n                componentContent.html(ckeditorPlace);\r\n                ckeditorPlace.html(contentHtml);\r\n                ckeditorPlace.wrap('<div class=\"keditor-component-text-content\"></div>');\r\n            }\r\n            \r\n            if (!ckeditorPlace.attr('id')) {\r\n                ckeditorPlace.attr('id', keditor.generateId('component-text-content-inner'));\r\n            }\r\n            \r\n            ckeditorPlace.prop('contenteditable', true);\r\n            ckeditorPlace.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(contentArea, e, component);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(contentArea, e, container);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(contentArea, e);\r\n                }\r\n            });\r\n            \r\n            var editor = ckeditorPlace.ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n                \r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"text\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var componentTextContent = componentContent.find('.keditor-component-text-content');\r\n            \r\n            var id = componentTextContent.children().attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                componentTextContent.html('<div class=\"keditor-component-text-content-inner clearfix\">' + editor.getData() + '</div>');\r\n            }\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n            \r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Text Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"text\" component');\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentTextSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    // =================================================================================\r\n                    // Backgrounds\r\n                    // =================================================================================\r\n                    var basePath = window.location.pathname.replace('contenteditor', '');\r\n                    if (keditor.options.basePath) {\r\n                        basePath = keditor.options.basePath;\r\n                    }\r\n                    form.find('.background-image-edit').mselect({\r\n                        contentTypes: ['image'],\r\n                        bs3Modal: true,\r\n                        pagePath: basePath,\r\n                        basePath: basePath,\r\n                        onSelectFile: function (url, relativeUrl, fileType, hash) {\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                            var imageUrl = 'http://' + window.location.host + '/_hashes/files/' + hash;\r\n                            target.css('background-image', 'url(\"' + imageUrl + '\")');\r\n                            form.find('.background-image-previewer').attr('src', imageUrl);\r\n                        }\r\n                    });\r\n                    form.find('.background-image-delete').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('background-image', '');\r\n                        form.find('.background-image-previewer').attr('src', '/static/images/photo_holder.png');\r\n                    });\r\n                    \r\n                    var colorPicker = form.find('.txt-bg-color');\r\n                    contentEditor.initSimpleColorPicker(colorPicker, function (color) {\r\n                        target.css('background-color', color);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-repeat').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-repeat', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-size').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-size', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-position').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-position', this.value);\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Padding\r\n                    // =================================================================================\r\n                    form.find('.txt-padding').each(function () {\r\n                        var txt = $(this);\r\n                        var styleName = txt.attr('data-style-name');\r\n                        \r\n                        txt.on('change', function () {\r\n                            var paddingValue = this.value || '';\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\r\n                            \r\n                            if (paddingValue.trim() === '') {\r\n                                target.style[styleName] = '';\r\n                            } else {\r\n                                if (isNaN(paddingValue)) {\r\n                                    paddingValue = 0;\r\n                                    this.value = paddingValue;\r\n                                }\r\n                                target.style[styleName] = paddingValue + 'px';\r\n                            }\r\n                        });\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Margin\r\n                    // =================================================================================\r\n                    form.find('.txt-margin').each(function () {\r\n                        var txt = $(this);\r\n                        var styleName = txt.attr('data-style-name');\r\n                        \r\n                        txt.on('change', function () {\r\n                            var marginValue = this.value || '';\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\r\n                            \r\n                            if (marginValue.trim() === '') {\r\n                                target.style[styleName] = '';\r\n                            } else {\r\n                                if (isNaN(marginValue)) {\r\n                                    marginValue = 0;\r\n                                    this.value = marginValue;\r\n                                }\r\n                                target.style[styleName] = marginValue + 'px';\r\n                            }\r\n                        });\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Width and Height\r\n                    // =================================================================================\r\n                    form.find('.txt-height').on('change', function () {\r\n                        var height = this.value || '';\r\n                        if (isNaN(height)) {\r\n                            height = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('height', height);\r\n                    });\r\n                    \r\n                    form.find('.txt-max-height').on('change', function () {\r\n                        var maxHeight = this.value || '';\r\n                        if (isNaN(maxHeight)) {\r\n                            maxHeight = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('max-height', maxHeight + 'px');\r\n                    });\r\n                    \r\n                    form.find('.txt-width').on('change', function () {\r\n                        var width = this.value || '';\r\n                        if (isNaN(width)) {\r\n                            width = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('width', width);\r\n                    });\r\n                    \r\n                    form.find('.txt-max-width').on('change', function () {\r\n                        var maxWidth = this.value || '';\r\n                        if (isNaN(maxWidth)) {\r\n                            maxWidth = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('max-width', maxWidth + 'px');\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"text\" component', component);\r\n            \r\n            var target = component.find('.keditor-component-text-content').get(0);\r\n            \r\n            var imageUrl = target.style.backgroundImage;\r\n            imageUrl = (imageUrl || '').replace(/^url\\(['\"]+(.+)['\"]+\\)$/, '$1');\r\n            form.find('.background-image-previewer').attr('src', imageUrl !== 'none' && imageUrl !== '' ? imageUrl : '/static/images/photo_holder.png');\r\n            \r\n            form.find('.select-bg-repeat').val(target.style.backgroundRepeat || 'repeat');\r\n            form.find('.select-bg-position').val(target.style.backgroundPosition || '0% 0%');\r\n            form.find('.select-bg-size').val(target.style.backgroundSize || 'auto');\r\n            \r\n            form.find('.txt-bg-color').val(target.style.backgroundColor || '').trigger('update')\r\n            \r\n            form.find('.txt-padding').each(function () {\r\n                var txt = $(this);\r\n                var styleName = txt.attr('data-style-name');\r\n                \r\n                txt.val((target.style[styleName] || '').replace('px', ''));\r\n            });\r\n            form.find('.txt-margin').each(function () {\r\n                var txt = $(this);\r\n                var styleName = txt.attr('data-style-name');\r\n                \r\n                txt.val((target.style[styleName] || '').replace('px', ''));\r\n            });\r\n            \r\n            form.find('.txt-height').val((target.style.height || '').replace('px', ''));\r\n            form.find('.txt-max-height').val((target.style.maxHeight || '').replace('px', ''));\r\n            form.find('.txt-width').val((target.style.width || '').replace('px', ''));\r\n            form.find('.txt-maxWith').val((target.style.maxWidth || '').replace('px', ''));\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Video Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['video'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"video\" component', component);\r\n            \r\n            var self = this;\r\n            \r\n            var img = component.find('img[data-video-src]');\r\n            img.attr('id', keditor.generateId('component-video'));\r\n            \r\n            var wrapper = img.parent();\r\n            if (!wrapper.hasClass('video-wrapper')) {\r\n                img.wrap('<div class=\"video-wrapper\"></div>');\r\n                wrapper = img.parent();\r\n            }\r\n            \r\n            wrapper.attr('data-id', img.attr('id'));\r\n            wrapper.attr('data-autostart', img.attr('data-autostart'));\r\n            wrapper.attr('data-aspectratio', img.attr('data-aspectratio'));\r\n            wrapper.attr('data-video-src', img.attr('data-video-src'));\r\n            wrapper.attr('data-repeat', img.attr('data-repeat'));\r\n            wrapper.attr('data-controls', img.attr('data-controls'));\r\n            \r\n            $.getScriptOnce('/static/jwplayer/6.10/jwplayer.js', function () {\r\n                jwplayer.key = 'cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=';\r\n                self.buildJWVideoPlayerPreview(component);\r\n            });\r\n        },\r\n        \r\n        getContent: function (component) {\r\n            flog('getContent \"video\" component, component');\r\n            \r\n            var wrapper = component.find('.video-wrapper');\r\n            var html = '<img class=\"video-jw\" ';\r\n            html += '       id=\"' + this.componentId + '\" ';\r\n            html += '       src=\"' + wrapper.attr('data-video-src') + '/alt-640-360.png\" ';\r\n            html += '       data-autostart=\"' + wrapper.attr('data-autostart') + '\" ';\r\n            html += '       data-aspectratio=\"' + wrapper.attr('data-aspectratio') + '\" ';\r\n            html += '       data-video-src=\"' + wrapper.attr('data-video-src') + '\" ';\r\n            html += '       data-repeat=\"' + wrapper.attr('data-repeat') + '\" ';\r\n            html += '       data-controls=\"' + wrapper.attr('data-controls') + '\" />';\r\n            wrapper.html(html);\r\n            \r\n            return component.find('.keditor-component-content').html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Video Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"video\" settings', form);\r\n            var self = this;\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentVideoSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var selectPicker = form.find('.select-border-style');\r\n                    selectPicker.selectpicker().on('changed.bs.select', function () {\r\n                        self.borderStyle = this.value;\r\n                        keditor.getSettingComponent().find('.video-wrapper').css('border-style', this.value);\r\n                    });\r\n                    \r\n                    var txtBorderWidth = form.find('.border-width');\r\n                    txtBorderWidth.on('change', function () {\r\n                        var width = this.value;\r\n                        if (isNaN(width) || width < 0) {\r\n                            width = 1;\r\n                            this.value = width;\r\n                        }\r\n                        \r\n                        self.borderWidth = width;\r\n                        keditor.getSettingComponent().find('.video-wrapper').css('border-width', width);\r\n                    });\r\n                    \r\n                    var colorPicker = form.find('.color-picker');\r\n                    var input = colorPicker.find('input');\r\n                    var previewer = colorPicker.find('.input-group-addon i');\r\n                    colorPicker.colorpicker({\r\n                        format: 'hex',\r\n                        container: colorPicker.parent(),\r\n                        component: '.input-group-addon',\r\n                        align: 'left',\r\n                        colorSelectors: {\r\n                            'transparent': 'transparent'\r\n                        }\r\n                    }).on('changeColor.colorpicker', function (e) {\r\n                        var colorHex = e.color.toHex();\r\n                        \r\n                        if (!input.val() || input.val().trim().length === 0) {\r\n                            colorHex = '';\r\n                            previewer.css('background-color', '');\r\n                        }\r\n                        \r\n                        self.borderColor = colorHex;\r\n                        keditor.getSettingComponent().find('.video-wrapper').css('border-color', colorHex);\r\n                    });\r\n                    \r\n                    form.find('.chk-border').on('click', function () {\r\n                        selectPicker.prop('disabled', !this.checked).selectpicker('refresh');\r\n                        txtBorderWidth.prop('disabled', !this.checked);\r\n                        colorPicker.colorpicker(this.checked ? 'enable' : 'disable');\r\n                        \r\n                        if (!this.checked) {\r\n                            keditor.getSettingComponent().find('.video-wrapper').css('border', '');\r\n                            selectPicker.selectpicker('val', '');\r\n                            txtBorderWidth.val('');\r\n                            colorPicker.colorpicker('setValue', 'transparent');\r\n                        }\r\n                    });\r\n                    \r\n                    var btnVideoFileInput = form.find('.btn-videoFileInput');\r\n                    btnVideoFileInput.mselect({\r\n                        contentTypes: ['video'],\r\n                        bs3Modal: true,\r\n                        pagePath: window.location.pathname.replace('contenteditor', ''),\r\n                        onSelectFile: function (url) {\r\n                            keditor.getSettingComponent().find('.video-wrapper').attr('data-video-src', url);\r\n                            self.refreshVideoPlayerPreview(keditor);\r\n                        }\r\n                    });\r\n                    \r\n                    var autoplayToggle = form.find('#video-autoplay');\r\n                    autoplayToggle.on('click', function () {\r\n                        keditor.getSettingComponent().find('.video-wrapper').attr('data-autostart', this.checked);\r\n                        self.buildJWVideoPlayerPreview(keditor);\r\n                    });\r\n                    \r\n                    var loopToggle = form.find('#video-loop');\r\n                    loopToggle.on('click', function () {\r\n                        keditor.getSettingComponent().find('.video-wrapper').attr('data-repeat', this.checked);\r\n                        self.buildJWVideoPlayerPreview(keditor);\r\n                    });\r\n                    \r\n                    var ratio = form.find('.video-ratio');\r\n                    ratio.on('click', function (e) {\r\n                        if (this.checked) {\r\n                            keditor.getSettingComponent().find('.video-wrapper').attr('data-aspectratio', this.value);\r\n                            self.buildJWVideoPlayerPreview(keditor);\r\n                        }\r\n                    });\r\n                    \r\n                    var showcontrolsToggle = form.find('#video-showcontrols');\r\n                    showcontrolsToggle.on('click', function (e) {\r\n                        keditor.getSettingComponent().find('.video-wrapper').attr('data-controls', this.checked);\r\n                        self.buildJWVideoPlayerPreview(keditor);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"video\" component', form, component);\r\n            \r\n            var wrapper = component.find('.video-wrapper');\r\n            var borderWidth = wrapper.css('border-width') || '';\r\n            var isBorderEnabled = borderWidth !== '0px';\r\n            \r\n            var chkBorder = form.find('.chk-border');\r\n            var txtBorderWidth = form.find('.border-width');\r\n            var colorPicker = form.find('.color-picker');\r\n            var selectPicker = form.find('.select-border-style');\r\n            \r\n            chkBorder.prop('checked', isBorderEnabled);\r\n            selectPicker.prop('disabled', !isBorderEnabled).selectpicker('refresh').selectpicker('val', wrapper.css('border-style'));\r\n            txtBorderWidth.prop('disabled', !isBorderEnabled).val(isBorderEnabled ? borderWidth.replace('px', '') : '');\r\n            colorPicker.colorpicker(isBorderEnabled ? 'enable' : 'disable').colorpicker('setValue', isBorderEnabled ? wrapper.css('border-color') : '');\r\n            \r\n            form.find('#video-autoplay').prop('checked', wrapper.attr('data-autostart') === 'true');\r\n            form.find('#video-loop').prop('checked', wrapper.attr('data-repeat') === 'true');\r\n            form.find('.video-ratio').filter('[value=\"' + wrapper.attr('data-aspectratio') + '\"]').prop('checked', true);\r\n            form.find('#video-showcontrols').prop('checked', wrapper.attr('data-controls') === 'true');\r\n        },\r\n        \r\n        buildJWVideoPlayerPreview: function (component) {\r\n            if (!component.jquery) {\r\n                component = component.getSettingComponent();\r\n            }\r\n            var wrapper = component.find('.video-wrapper');\r\n            var src = wrapper.attr('data-video-src');\r\n            var autostart = wrapper.attr('data-autostart');\r\n            var repeat = wrapper.attr('data-repeat');\r\n            var aspectratio = wrapper.attr('data-aspectratio');\r\n            var controls = wrapper.attr('data-controls');\r\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\r\n            var posterHref = src + '/alt-640-360.png';\r\n            \r\n            flog(\"buildJWPlayer\", src, \"aspectratio=\", aspectratio);\r\n            playerInstance.setup({\r\n                autostart: autostart,\r\n                repeat: repeat,\r\n                controls: controls,\r\n                aspectratio: aspectratio,\r\n                flashplayer: \"/static/jwplayer/6.10/jwplayer.flash.swf\",\r\n                html5player: \"/static/jwplayer/6.10/jwplayer.html5.js\",\r\n                width: \"100%\",\r\n                androidhls: true, //enable hls on android 4.1+\r\n                playlist: [{\r\n                    image: posterHref,\r\n                    sources: [{\r\n                        file: src\r\n                    }\r\n                        , {\r\n                            file: src + \"/../alt-640-360.webm\"\r\n                        }, {\r\n                            file: src + \"/../alt-640-360.m4v\"\r\n                        }]\r\n                }]\r\n                , primary: \"flash\"\r\n            });\r\n            \r\n            playerInstance.onReady(function () {\r\n                flog('jwplayer preview init done');\r\n            });\r\n        },\r\n        \r\n        refreshVideoPlayerPreview: function (keditor) {\r\n            var wrapper = keditor.getSettingComponent().find('.video-wrapper');\r\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\r\n            var src = wrapper.attr('data-video-src');\r\n            \r\n            playerInstance.load([{\r\n                file: src\r\n            }]);\r\n            playerInstance.play();\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Vimeo Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['vimeo'] = {\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"vimeo\" component', component);\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.vimeo-cover').remove();\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Vimeo Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"vimeo\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentVimeoSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var btnEdit = form.find('.btn-vimeo-edit');\r\n                    btnEdit.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var inputData = prompt('Please enter Vimeo URL in here:');\r\n                        var vimeoRegex = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\r\n                        var match = inputData.match(vimeoRegex);\r\n                        if (match && match[1]) {\r\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://player.vimeo.com/video/' + match[1] + '?byline=0&portrait=0&badge=0');\r\n                        } else {\r\n                            alert('Your Vimeo URL is invalid!');\r\n                        }\r\n                    });\r\n                    \r\n                    var btn169 = form.find('.btn-vimeo-169');\r\n                    btn169.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n                    });\r\n                    \r\n                    var btn43 = form.find('.btn-vimeo-43');\r\n                    btn43.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n                    });\r\n                    \r\n                    var chkAutoplay = form.find('#vimeo-autoplay');\r\n                    chkAutoplay.on('click', function () {\r\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\r\n                        var currentUrl = embedItem.attr('src');\r\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?byline=0&portrait=0&badge=0&autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\r\n                        \r\n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\r\n                        embedItem.attr('src', newUrl);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"vimeo\" component', component);\r\n            \r\n            var embedItem = component.find('.embed-responsive-item');\r\n            var chkAutoplay = form.find('#vimeo-autoplay');\r\n            var src = embedItem.attr('src');\r\n            \r\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Youtube Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    KEditor.components['youtube'] = {\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"youtube\" component', component);\r\n            \r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.youtube-cover').remove();\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Youtube Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"youtube\" settings', form);\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentYoutubeSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    var btnEdit = form.find('.btn-youtube-edit');\r\n                    btnEdit.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        var inputData = prompt('Please enter Youtube URL in here:');\r\n                        var youtubeRegex = /^(?:http(?:s)?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:(?:watch)?\\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\\/))([^\\?&\\\"'>]+)/;\r\n                        var match = inputData.match(youtubeRegex);\r\n                        if (match && match[1]) {\r\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://www.youtube.com/embed/' + match[1]);\r\n                        } else {\r\n                            alert('Your Youtube URL is invalid!');\r\n                        }\r\n                    });\r\n                    \r\n                    var btn169 = form.find('.btn-youtube-169');\r\n                    btn169.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n                    });\r\n                    \r\n                    var btn43 = form.find('.btn-youtube-43');\r\n                    btn43.on('click', function (e) {\r\n                        e.preventDefault();\r\n                        \r\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n                    });\r\n                    \r\n                    var chkAutoplay = form.find('#youtube-autoplay');\r\n                    chkAutoplay.on('click', function () {\r\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\r\n                        var currentUrl = embedItem.attr('src');\r\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\r\n                        \r\n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\r\n                        embedItem.attr('src', newUrl);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"youtube\" component', component);\r\n            \r\n            var embedItem = component.find('.embed-responsive-item');\r\n            var chkAutoplay = form.find('#youtube-autoplay');\r\n            var src = embedItem.attr('src');\r\n            \r\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n"],"sourceRoot":"/source/"}