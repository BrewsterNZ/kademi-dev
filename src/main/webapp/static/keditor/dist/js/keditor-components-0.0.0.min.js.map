{"version":3,"sources":["keditor-components-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","settingEnabled","init","contentArea","container","component","options","id","generateId","componentContent","children","find","attr","panels","each","index","item","p","itemId","panelCollapseId","title","html","indexOf","collapse","removeClass","prop","on","e","onComponentChanged","call","onContainerChanged","onContentChanged","editor","ckeditor","ckeditorOptions","onComponentReady","document","off","preventDefault","confirm","panelsCount","length","this","parents","remove","Msg","error","clone","first","append","getContent","h","parent","replaceWith","addClass","destroy","CKEDITOR","instances","jQuery","img","componentId","hasClass","wrap","src","width","autostart","instance","getScriptOnce","jwplayer","key","buildJWAudioPlayerPreview","settingTitle","initSettingForm","form","ajax","url","type","dataType","success","resp","showSettingForm","btnAudioFileInput","mselect","contentTypes","bs3Modal","pagePath","window","location","pathname","replace","onSelectFile","refreshAudioPlayerPreview","autoplayToggle","checked","audioWidth","val","value","resizeAudioPlayerPreview","playerInstance","setup","file","height","flashplayer","html5player","primary","onReady","load","play","resize","carousel","self","images","push","hash","css","i","image","addImageToCarousel","basePath","substr","lastIndexOf","carouselAddImage","carouselImageWrap","relUrl","addImageToList","getSettingComponent","sortable","handle","items","axis","tolerance","sort","update","rearrangeItems","body","btn","closest","siblings","refreshCarousel","isNaN","comp","isWrap","pause","interval","cls","backgroundUrl","carouselImageItem","script","removeAttr","place","maptype","trigger","apiKey","mapjs","google","maps","places","not","data","event","initAutocomplete","input","setInterval","clearInterval","keyCode","iframe","alert","btn169","btn43","ratio169","ratio43","firstLoad","googleMapInitialized","setTimeout","mapdiv","map","Map","zoom","mapTypeId","searchBox","SearchBox","addListener","setBounds","getBounds","markers","getPlaces","forEach","marker","setMap","bounds","LatLngBounds","geometry","console","icon","size","Size","origin","Point","anchor","scaledSize","Marker","name","position","viewport","union","extend","fitBounds","initKeditorMapSetting","contentEditor","getData","buttonColorPicker","initSimpleColorPicker","color","paddingSettings","paddingValue","paddingProp","trim","marginSettings","vectorMap","backgroundColor","zoomButtons","focusOn","x","y","scale","regionStyle","initial","fill","hover","onRegionTipShow","el","code","updateSize","arr","insertBefore","insertAfter","currentState","defaultState","txtLink","link","pattern","RegExp","span","next","formGroup","test","hide","show","cbbTarget","chkLinkable","is","unwrap","photoEdit","relativeUrl","fileType","inputAlign","panel","inputVAlign","inputResponsive","cbbStyle","inputWidth","inputHeight","newWidth","newHeight","Math","round","ratio","a","algin","valign","disableAutoInline","dtd","$removeEmpty","ckeditorPlace","contentHtml","componentTextContent","target","imageUrl","host","colorPicker","txt","styleName","get","style","marginValue","maxHeight","maxWidth","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","wrapper","buildJWVideoPlayerPreview","selectPicker","selectpicker","borderStyle","txtBorderWidth","borderWidth","previewer","colorpicker","format","align","colorSelectors","transparent","colorHex","toHex","borderColor","btnVideoFileInput","refreshVideoPlayerPreview","loopToggle","showcontrolsToggle","isBorderEnabled","chkBorder","filter","jquery","repeat","aspectratio","controls","posterHref","androidhls","playlist","sources","btnEdit","inputData","prompt","vimeoRegex","match","chkAutoplay","embedItem","currentUrl","newUrl","youtubeRegex"],"mappings":"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","file":"keditor-components-0.0.0.min.js","sourcesContent":["/**\n * KEditor Jumbotron Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n\n    KEditor.components['accordion'] = {\n        settingEnabled: false,\n\n        init: function (contentArea, container, component, keditor) {\n            var options = keditor.options;\n            var id = keditor.generateId('accordion');\n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.accordionWrap .panel-group').attr('id', id);\n            componentContent.find('.accordionWrap a[data-toggle]').attr('data-parent', '#' + id);\n\n\n            var panels = componentContent.find('.panel');\n            panels.each(function (index, item) {\n                var p = $(item);\n                var itemId = keditor.generateId('heading' + index);\n                var panelCollapseId = keditor.generateId('collapse' + index);\n                p.find('.panel-heading').attr('id', itemId);\n                p.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\n                var title = p.find('a[data-toggle]').html();\n                if (title.indexOf('<div>') === -1) {\n                    p.find('a[data-toggle]').attr('href', '#' + panelCollapseId).html('<div>' + title + '</div>');\n                }\n            });\n\n            componentContent.find('.accordionWrap .panel-collapse').collapse('show');\n            componentContent.find('.panel-footer, .btnAddAccordionItem').removeClass('hide');\n            componentContent.find('.panel-title a div').prop('contenteditable', true);\n            componentContent.find('.panel-collapse .panel-body').prop('contenteditable', true);\n\n            componentContent.find('.panel-title a div, .panel-collapse .panel-body').on('input', function (e) {\n                if (typeof options.onComponentChanged === 'function') {\n                    options.onComponentChanged.call(contentArea, e, component);\n                }\n\n                if (typeof options.onContainerChanged === 'function') {\n                    options.onContainerChanged.call(contentArea, e, container);\n                }\n\n                if (typeof options.onContentChanged === 'function') {\n                    options.onContentChanged.call(contentArea, e);\n                }\n            });\n\n            var editor = componentContent.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\n            editor.on('instanceReady', function () {\n                flog('CKEditor is ready', component);\n\n                if (typeof options.onComponentReady === 'function') {\n                    options.onComponentReady.call(contentArea, component, editor);\n                }\n            });\n\n            $(document).off('click', '.btnDeleteAccordionItem').on('click', '.btnDeleteAccordionItem', function (e) {\n                e.preventDefault();\n\n                if (confirm('Are you sure you want to delete this item?')) {\n                    var panelsCount = componentContent.find('.panel').length;\n                    if (panelsCount > 1) {\n                        $(this).parents('.panel').remove();\n                    } else {\n                        Msg.error('You cant delete the last item');\n                    }\n                }\n            });\n\n            $(document).off('click', '.btnAddAccordionItem').on('click', '.btnAddAccordionItem', function (e) {\n                e.preventDefault();\n                var clone = componentContent.find('.panel').first().clone();\n                var itemId = keditor.generateId('heading');\n                var panelCollapseId = keditor.generateId('collapse');\n                clone.find('.panel-heading').attr('id', itemId);\n                clone.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\n                clone.find('a[data-toggle]').attr('href', '#' + panelCollapseId);\n                componentContent.find('.accordionWrap .panel-group').append(clone);\n                var editor = clone.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\n                editor.on('instanceReady', function () {\n                    flog('CKEditor is ready', component);\n\n                    if (typeof options.onComponentReady === 'function') {\n                        options.onComponentReady.call(contentArea, component, editor);\n                    }\n                });\n            });\n        },\n\n        getContent: function (component, keditor) {\n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.panel-title a div').each(function () {\n                var h = $(this).html();\n                $(this).parent('a').html(h);\n            });\n            componentContent.find('.panel-collapse .panel-body').each(function () {\n                var h = $(this).html();\n                $(this).replaceWith('<div class=\"panel-body\">' + h + '</div>');\n            });\n            componentContent.find('.panel-footer, .btnAddAccordionItem').addClass('hide');\n            return componentContent.html();\n        },\n\n        destroy: function (component, keditor) {\n            flog('destroy \"text\" component', component);\n\n            var id = component.find('.keditor-component-content').attr('id');\n            var editor = CKEDITOR.instances[id];\n            if (editor) {\n                editor.destroy();\n            }\n        }\n    };\n})(jQuery);\n\n\r\n/**\n * KEditor Audio Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['audio'] = {\n        init: function (contentArea, container, component, keditor) {\n            flog('init \"audio\" component', component);\n            \n            this.component = component;\n            var img = component.find('img[data-src]');\n            var componentId = '';\n            if (!img.attr('id')) {\n                componentId = keditor.generateId('component-audio');\n                img.attr('id', componentId);\n            } else {\n                componentId = img.attr('id');\n            }\n            if (!img.parent().hasClass('audio-wrapper')) {\n                img.wrap('<div class=\"audio-wrapper\"></div>');\n            }\n            this.src = img.attr('data-src');\n            this.width = img.attr('data-width');\n            this.autostart = img.attr('data-autostart') === 'true';\n            var instance = this;\n            $.getScriptOnce('/static/jwplayer/6.10/jwplayer.js', function () {\n                jwplayer.key = 'cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=';\n                instance.buildJWAudioPlayerPreview(componentId);\n            });\n            \n        },\n        \n        getContent: function (component, keditor) {\n            flog('getContent \"audio\" component', component);\n            \n            var img = component.find('img[data-src]');\n            var componentId = img.attr('id');\n            \n            var html = '<img data-componentId=\"' + componentId + '\" src=\"/theme/apps/content/preview/audio.png\" data-autostart=\"' + this.autostart + '\" data-width=\"' + this.width + '\" data-src=\"' + this.src + '\" data-kaudio=\"' + this.src + '\" />';\n            return html;\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Audio settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"audio\" settings', form);\n            \n            return $.ajax({\n                url: '/static/keditor/componentAudioSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"audio\" component', form, component);\n            \n            var instance = this;\n            var btnAudioFileInput = form.find('.btn-audioFileInput');\n            btnAudioFileInput.mselect({\n                contentTypes: ['audio'],\n                bs3Modal: true,\n                pagePath: window.location.pathname.replace('contenteditor', ''),\n                onSelectFile: function (url) {\n                    instance.src = url;\n                    instance.refreshAudioPlayerPreview();\n                }\n            });\n            \n            var img = component.find('img[data-src]');\n            var componentId = img.attr('id');\n            \n            var autoplayToggle = form.find('#audio-autoplay');\n            if (this.autostart) {\n                autoplayToggle.prop('checked', true);\n            }\n            autoplayToggle.on('click', function (e) {\n                instance.autostart = this.checked;\n                instance.buildJWAudioPlayerPreview(componentId);\n            });\n            \n            var audioWidth = form.find('#audio-width');\n            audioWidth.val(this.width);\n            audioWidth.on('change', function () {\n                instance.width = this.value;\n                instance.resizeAudioPlayerPreview();\n            });\n        },\n        \n        buildJWAudioPlayerPreview: function (componentId) {\n            var width = this.width;\n            var src = this.src;\n            var autostart = this.autostart;\n            var playerInstance = jwplayer(componentId);\n            playerInstance.setup({\n                file: src,\n                width: width,\n                height: 30,\n                autostart: autostart,\n                flashplayer: \"/static/jwplayer/6.10/jwplayer.flash.swf\",\n                html5player: \"/static/jwplayer/6.10/jwplayer.html5.js\",\n                primary: \"flash\"\n            });\n            playerInstance.onReady(function () {\n                log('jwplayer preview init done');\n            });\n        },\n        \n        refreshAudioPlayerPreview: function () {\n            var instance = this;\n            var playerInstance = jwplayer(instance.componentId);\n            var src = instance.src;\n            playerInstance.load([{\n                file: src\n            }]);\n            playerInstance.play();\n        },\n        \n        resizeAudioPlayerPreview: function () {\n            var instance = this;\n            var playerInstance = jwplayer(instance.componentId);\n            var width = instance.width;\n            \n            playerInstance.resize(width, 30);\n        }\n    };\n    \n})(jQuery);\n\r\n/**\n * Created by Anh on 7/27/2016.\n */\n/**\n * KEditor Carousel Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['carousel'] = {\n        init: function (contentArea, container, component, keditor) {\n            flog('init \"carousel\" component', component);\n            var componentContent = component.children('.keditor-component-content');\n            var carousel = componentContent.find('.carousel');\n            \n            if (carousel.find('.carousel-img').length === 0) {\n                var self = this;\n                var images = [];\n                \n                carousel.addClass('carousel-fixed-height');\n                carousel.find('.carousel-inner .item').each(function () {\n                    var item = $(this);\n                    \n                    images.push({\n                        src: item.find('img').attr('src'),\n                        hash: item.attr('data-hash')\n                    });\n                });\n                \n                carousel.attr('data-height', 200).css('height', 200);\n                carousel.find('.carousel-inner').html('');\n                carousel.find('.carousel-indicators').html('');\n                \n                $.each(images, function (i, image) {\n                    self.addImageToCarousel(component, image.src, image.hash);\n                });\n            }\n            \n            var id = keditor.generateId('component-carousel');\n            carousel.attr('id', id);\n            carousel.find('.carousel-indicators li').attr('data-target', id);\n            carousel.find('.carousel-control').attr('href', '#' + id);\n        },\n        getContent: function (component, keditor) {\n            var componentContent = component.children('.keditor-component-content');\n            return componentContent.html();\n        },\n        settingEnabled: true,\n        \n        settingTitle: 'Carousel settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"carousel\" settings', form);\n            \n            var self = this;\n            return $.ajax({\n                url: '/static/keditor/componentCarouselSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var basePath = window.location.pathname.substr(0, window.location.pathname.lastIndexOf('/') + 1);\n                    var carouselAddImage = form.find('.carouselAddImage');\n                    var carouselImageWrap = form.find('.carouselImageWrap');\n                    \n                    carouselAddImage.mselect({\n                        contentTypes: ['image'],\n                        bs3Modal: true,\n                        pagePath: basePath,\n                        basePath: basePath,\n                        onSelectFile: function (url, relUrl, type, hash) {\n                            flog('keditor carousel selected a file', url, hash);\n                            self.addImageToList(form, url, hash);\n                            self.addImageToCarousel(keditor.getSettingComponent(), url, hash);\n                        }\n                    });\n                    \n                    carouselImageWrap.sortable({\n                        handle: '.btn-sort-image',\n                        items: '> .carouselImageItem',\n                        axis: 'y',\n                        tolerance: 'pointer',\n                        sort: function () {\n                            $(this).removeClass('ui-state-default');\n                        },\n                        update: function () {\n                            self.rearrangeItems(keditor.getSettingComponent(), form);\n                        }\n                    });\n                    \n                    $(document.body).on('click', '.carouselImageItem a.btn-remove-image', function (e) {\n                        e.preventDefault();\n                        \n                        if (confirm('Are you sure that you want to delete this image?')) {\n                            var btn = $(this);\n                            var hash = btn.closest('.btn-group').siblings('[data-hash]').attr('data-hash');\n                            \n                            self.refreshCarousel(keditor.getSettingComponent(), hash);\n                            btn.closest('.carouselImageItem').remove();\n                        }\n                    });\n                    \n                    form.find('.carouselHeight').on('change', function (e) {\n                        var value = this.value;\n                        \n                        if (isNaN(value) || +value < 200) {\n                            value = 200;\n                            this.value = 200;\n                        }\n                        \n                        var carousel = keditor.getSettingComponent().find('.carousel');\n                        carousel.attr('data-height', value);\n                        carousel.css('height', value);\n                    });\n                    \n                    form.find('.carouselPause').on('change', function (e) {\n                        e.preventDefault();\n                        var comp = keditor.getSettingComponent().find('.carousel');\n                        comp.attr('data-pause', this.value);\n                    });\n                    \n                    form.find('.carouselInterval').on('change', function (e) {\n                        e.preventDefault();\n                        var comp = keditor.getSettingComponent().find('.carousel');\n                        comp.attr('data-interval', this.value);\n                    });\n                    \n                    form.find('.carouselWrap').on('click', function (e) {\n                        var comp = keditor.getSettingComponent().find('.carousel');\n                        if (this.checked) {\n                            comp.attr('data-wrap', 'true');\n                        } else {\n                            comp.attr('data-wrap', 'false');\n                        }\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            var self = this;\n            form.find('.carouselImageWrap').html('');\n            component.find('.carousel-inner > .item').each(function (index, item) {\n                var url = $(item).find('.carousel-img').css('background-image');\n                url = url.replace(/^url\\(['\"]*(.+)[\"']*\\)$/, '$1');\n                var hash = $(item).attr('data-hash');\n                self.addImageToList(form, url, hash);\n            });\n            \n            var isWrap = component.find('.carousel').attr('data-wrap');\n            var pause = component.find('.carousel').attr('data-pause');\n            var interval = component.find('.carousel').attr('data-interval');\n            var height = component.find('.carousel').attr('data-height');\n            \n            form.find('.carouselPause').val(pause);\n            form.find('.carouselInterval').val(interval);\n            form.find('.carouselWrap').prop('checked', isWrap === 'true');\n            form.find('.carouselHeight').val(height);\n        },\n        \n        addImageToCarousel: function (component, url, hash) {\n            var carousel = component.find('.carousel');\n            var index = carousel.find('.carousel-indicators').children().length;\n            var cls = index === 0 ? 'active' : '';\n            var backgroundUrl = \"background-image: url('\" + url + \"')\";\n            carousel.find('.carousel-indicators').append('<li data-target=\"#' + carousel.attr('id') + '\" data-slide-to=\"' + index + '\" class=\"' + cls + '\"></li>');\n            \n            carousel.find('.carousel-inner').append(\n                '<div data-hash=\"' + hash + '\" class=\"item ' + cls + '\">' +\n                '   <div class=\"carousel-img\" style=\"' + backgroundUrl + '\"></div>' +\n                '   <div class=\"carousel-caption\"></div>' +\n                '</div>'\n            );\n        },\n        \n        addImageToList: function (form, src, hash) {\n            form.find('.carouselImageWrap').append(\n                '<div class=\"carouselImageItem\">' +\n                '   <img class=\"img-responsive\" src=\"' + src + '\" data-hash=\"' + hash + '\" />' +\n                '   <div class=\"btn-group btn-group-sm\">' +\n                '       <a class=\"btn btn-info btn-sort-image\" href=\"#\"><i class=\"fa fa-sort\"></i></a>' +\n                '       <a title=\"Delete this image\" class=\"btn btn-danger btn-remove-image\" href=\"#\"><i class=\"fa fa-trash\"></i></a>' +\n                '   </div>' +\n                '</div>'\n            );\n        },\n        \n        refreshCarousel: function (component, hash) {\n            component.find('[data-hash=' + hash + ']').remove();\n            if (!component.find('.carousel-inner .item.active').length) {\n                component.find('.carousel-inner .item:first-child').addClass('active');\n            }\n            component.find('.carousel-indicators li:last-child').remove();\n        },\n        \n        rearrangeItems: function (component, form) {\n            var self = this;\n            var carousel = component.find('.carousel');\n            carousel.find('.carousel-inner').html('');\n            carousel.find('.carousel-indicators').html('');\n            \n            form.find('.carouselImageWrap').find('.carouselImageItem').each(function () {\n                var carouselImageItem = $(this);\n                var img = carouselImageItem.find('img');\n                \n                self.addImageToCarousel(component, img.attr('src'), img.attr('data-hash'));\n            });\n        }\n    }\n    \n})(jQuery);\r\n/**\n * KEditor Google Map Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['googlemap'] = {\n        init: function (contentArea, container, component, keditor) {\n            var script = component.find('script');\n            if (script.length) {\n                script.remove();\n            }\n            component.removeAttr('data-firstLoad');\n            var place = component.attr('data-place');\n            var maptype = component.attr('data-maptype');\n            if (place && maptype === 'manually') {\n                $(window).on('load', function () {\n                    component.find('.btn-component-setting').trigger('click');\n                });\n            }\n        },\n        getContent: function (component, keditor) {\n            flog('getContent \"googlemap\" component', component);\n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.googlemap-cover').remove();\n            var place = component.attr('data-place');\n            var maptype = component.attr('data-maptype');\n            component.find('.kgooglemap').html('');\n            var script = '<script>$(function(){if(!$(document.body).hasClass(\"content-editor-page\")){var apiKey=\"AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs\";var s=document.createElement(\"script\");s.type=\"text/javascript\";s.async=true;s.defer=true;s.src=\"https://maps.googleapis.com/maps/api/js?key=\"+apiKey+\"&callback=kgooglemapInit&libraries=places\";$(\"head\").append(s);window.kgooglemapInit=function(){var mapdiv=$(\".kgooglemap\").not(\".hide\");mapdiv.each(function(){var parent=$(this).parents(\"[data-type=component-googlemap]\");if(parent.attr(\"data-maptype\")!==\"manually\")return;var map=new google.maps.Map(this,{zoom:13,mapTypeId:\"roadmap\"});var place=parent.attr(\"data-place\");var input=parent.find(\"input\")[0];input.value=place;var searchBox=new google.maps.places.SearchBox(input);map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);setTimeout(function(){google.maps.event.trigger(input,\"focus\");google.maps.event.trigger(input,\"keydown\",{keyCode:13});},500);map.addListener(\"bounds_changed\",function(){searchBox.setBounds(map.getBounds());});var markers=[];searchBox.addListener(\"places_changed\",function(){var places=searchBox.getPlaces();if(places.length==0){return;}markers.forEach(function(marker){marker.setMap(null);});markers=[];var bounds=new google.maps.LatLngBounds();places.forEach(function(place){if(!place.geometry){console.log(\"Returned place contains no geometry\");return;}var icon={url:place.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};markers.push(new google.maps.Marker({map:map,icon:icon,title:place.name,position:place.geometry.location}));if(place.geometry.viewport){bounds.union(place.geometry.viewport);}else{bounds.extend(place.geometry.location);}});map.fitBounds(bounds);});})}}});</script>';\n            component.find('.embed-responsive').append(script);\n            return componentContent.html();\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Google Map Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"googlemap\" settings', form);\n            var self = this;\n            \n            return $.ajax({\n                url: '/static/keditor/componentGoogleMapSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    var apiKey = 'AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs';\n                    var mapjs = '<script src=\"https://maps.googleapis.com/maps/api/js?key=' + apiKey + '&callback=initKeditorMapSetting&libraries=places\" async defer></script>';\n                    if (window.google && window.google.maps && google.maps.places) {\n                        mapjs = '';\n                    }\n                    \n                    form.append(\n                        mapjs + resp\n                    );\n                    \n                    form.find('.mapType').on('click', function (e) {\n                        if (this.checked) {\n                            $('.' + this.value).removeClass('hide');\n                            var cls = form.find('.mapType').not(this).val();\n                            $('.' + cls).addClass('hide');\n                            var comp = keditor.getSettingComponent();\n                            comp.attr('data-maptype', this.value);\n                            if (this.value === 'manually') {\n                                comp.find('iframe').addClass('hide');\n                                comp.find('.kgooglemap').removeClass('hide');\n                                if (comp.find('.kgooglemap').data('map')) {\n                                    google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\n                                } else {\n                                    self.initAutocomplete(comp, form);\n                                    var input = form.find('[name=mapAddress]')[0];\n                                    var i = setInterval(function () {\n                                        if (comp.find('.kgooglemap').data('map')) {\n                                            clearInterval(i);\n                                            google.maps.event.trigger(input, 'focus')\n                                            google.maps.event.trigger(input, 'keydown', {\n                                                keyCode: 13\n                                            });\n                                        }\n                                    }, 100);\n                                }\n                            } else {\n                                comp.find('iframe').removeClass('hide');\n                                comp.find('.kgooglemap').addClass('hide');\n                            }\n                        }\n                    });\n                    \n                    form.find('[name=mapEmbedCode]').on('change', function () {\n                        var iframe = $(this.value);\n                        var src = iframe.attr('src');\n                        if (iframe.length > 0 && src && src.length > 0) {\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', src);\n                        } else {\n                            alert('Your Google Map embed code is invalid!');\n                        }\n                    });\n                    \n                    var btn169 = form.find('.btn-googlemap-169');\n                    var btn43 = form.find('.btn-googlemap-43');\n                    \n                    btn169.on('click', function (e) {\n                        e.preventDefault();\n                        $(this).addClass('btn-primary').removeClass('btn-default');\n                        btn43.removeClass('btn-primary').addClass('btn-default');\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\n                        var comp = keditor.getSettingComponent();\n                        if (comp.attr('maptype') === 'manually') {\n                            if (comp.find('.kgooglemap').data('map')) {\n                                google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\n                            }\n                        }\n                    });\n                    \n                    btn43.on('click', function (e) {\n                        e.preventDefault();\n                        $(this).addClass('btn-primary').removeClass('btn-default');\n                        btn169.removeClass('btn-primary').addClass('btn-default');\n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\n                        var comp = keditor.getSettingComponent();\n                        if (comp.attr('maptype') === 'manually') {\n                            if (comp.find('.kgooglemap').data('map')) {\n                                google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\n                            }\n                        }\n                    });\n                }\n            });\n        },\n        showSettingForm: function (form, component, keditor) {\n            var self = this;\n            var maptype = component.attr('data-maptype');\n            var place = component.attr('data-place');\n            var ratio169 = component.find('.embed-responsive').hasClass('embed-responsive-16by9');\n            var ratio43 = component.find('.embed-responsive').hasClass('embed-responsive-4by3');\n            if (ratio43) {\n                form.find('.btn-googlemap-43').addClass('btn-primary').removeClass('btn-default');\n            }\n            if (ratio169) {\n                form.find('.btn-googlemap-169').addClass('btn-primary').removeClass('btn-default');\n            }\n            form.find('.mapType[value=' + maptype + ']').prop('checked', true);\n            var src = component.find('iframe').attr('src');\n            var iframe = '<iframe class=\"embed-responsive-item\" src=\"' + src + '\"></iframe>';\n            if (!place) {\n                place = 'Hanoi, Vietnam';\n            }\n            form.find('[name=mapAddress]').val(place);\n            form.find('[name=mapEmbedCode]').val(iframe);\n            var firstLoad = component.attr('data-firstLoad');\n            if (maptype === 'manually') {\n                form.find('.manually').removeClass('hide').siblings('.embed').addClass('hide');\n                \n                if (!firstLoad && place) {\n                    var i = setInterval(function () {\n                        if (window.googleMapInitialized) {\n                            clearInterval(i);\n                            self.initAutocomplete(component, form);\n                            setTimeout(function () {\n                                var input = form.find('[name=mapAddress]')[0];\n                                google.maps.event.trigger(input, 'focus')\n                                google.maps.event.trigger(input, 'keydown', {\n                                    keyCode: 13\n                                });\n                                component.attr('data-firstLoad', 'false');\n                            }, 1000);\n                        }\n                    }, 100);\n                }\n            } else {\n                form.find('.manually').addClass('hide').siblings('.embed').removeClass('hide');\n            }\n        },\n        \n        initAutocomplete: function (component, form) {\n            if (!window.googleMapInitialized) {\n                alert('google map is not initialized');\n                return;\n            }\n            var mapdiv = component.find('.kgooglemap')[0];\n            var map = new google.maps.Map(mapdiv, {\n                zoom: 13,\n                mapTypeId: 'roadmap'\n            });\n            // Create the search box and link it to the UI element.\n            var input = form.find('[name=mapAddress]')[0];\n            var searchBox = new google.maps.places.SearchBox(input);\n            //map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\n            \n            // Bias the SearchBox results towards current map's viewport.\n            map.addListener('bounds_changed', function () {\n                searchBox.setBounds(map.getBounds());\n            });\n            \n            var markers = [];\n            // Listen for the event fired when the user selects a prediction and retrieve\n            // more details for that place.\n            \n            searchBox.addListener('places_changed', function () {\n                var places = searchBox.getPlaces();\n                \n                if (places.length == 0) {\n                    return;\n                }\n                \n                // Clear out the old markers.\n                markers.forEach(function (marker) {\n                    marker.setMap(null);\n                });\n                markers = [];\n                // For each place, get the icon, name and location.\n                var bounds = new google.maps.LatLngBounds();\n                places.forEach(function (place) {\n                    if (!place.geometry) {\n                        console.log(\"Returned place contains no geometry\");\n                        return;\n                    }\n                    \n                    var icon = {\n                        url: place.icon,\n                        size: new google.maps.Size(71, 71),\n                        origin: new google.maps.Point(0, 0),\n                        anchor: new google.maps.Point(17, 34),\n                        scaledSize: new google.maps.Size(25, 25)\n                    };\n                    \n                    // Create a marker for each place.\n                    markers.push(new google.maps.Marker({\n                        map: map,\n                        icon: icon,\n                        title: place.name,\n                        position: place.geometry.location\n                    }));\n                    \n                    if (place.geometry.viewport) {\n                        // Only geocodes have viewport.\n                        bounds.union(place.geometry.viewport);\n                    } else {\n                        bounds.extend(place.geometry.location);\n                    }\n                });\n                map.fitBounds(bounds);\n                component.attr('data-place', input.value);\n            });\n            \n            component.find('.kgooglemap').data('map', map);\n        }\n    };\n    \n    window.initKeditorMapSetting = function () {\n        window.googleMapInitialized = true;\n    }\n})(jQuery);\n\r\n/**\n * KEditor Jumbotron Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var contentEditor = $.contentEditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['jumbotron'] = {\n        settingEnabled: true,\n        \n        settingTitle: 'Jumbotron Settings',\n        init: function (contentArea, container, component, keditor) {\n            var self = this;\n            var options = keditor.options;\n            \n            var componentContent = component.children('.keditor-component-content');\n            componentContent.prop('contenteditable', true);\n            \n            componentContent.on('input', function (e) {\n                if (typeof options.onComponentChanged === 'function') {\n                    options.onComponentChanged.call(contentArea, e, component);\n                }\n                \n                if (typeof options.onContainerChanged === 'function') {\n                    options.onContainerChanged.call(contentArea, e, container);\n                }\n                \n                if (typeof options.onContentChanged === 'function') {\n                    options.onContentChanged.call(contentArea, e);\n                }\n            });\n            \n            var editor = componentContent.ckeditor(options.ckeditorOptions).editor;\n            editor.on('instanceReady', function () {\n                flog('CKEditor is ready', component);\n                \n                if (typeof options.onComponentReady === 'function') {\n                    options.onComponentReady.call(contentArea, component, editor);\n                }\n            });\n        },\n        \n        getContent: function (component, keditor) {\n            flog('getContent \"jumbotron\" component', component);\n            \n            var componentContent = component.find('.keditor-component-content');\n            var id = componentContent.attr('id');\n            var editor = CKEDITOR.instances[id];\n            if (editor) {\n                return editor.getData();\n            } else {\n                return componentContent.html();\n            }\n        },\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"jumbotron\" settings', form);\n            \n            return $.ajax({\n                url: '/static/keditor/componentJumbotronSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    form.find('.chk-inverse').on('click', function () {\n                        var comp = keditor.getSettingComponent();\n                        comp.find('.jumbotron')[this.checked ? 'addClass' : 'removeClass']('jumbotron-inverse');\n                    });\n                    \n                    form.find('[name=rounded]').on('click', function (e) {\n                        var comp = keditor.getSettingComponent();\n                        if (this.value == 'false') {\n                            comp.find('.jumbotron').css('border-radius', '0');\n                        } else {\n                            comp.find('.jumbotron').css('border-radius', '');\n                        }\n                    });\n                    \n                    var buttonColorPicker = form.find('.button-color-picker');\n                    contentEditor.initSimpleColorPicker(buttonColorPicker, function (color) {\n                        var comp = keditor.getSettingComponent();\n                        comp.find('.jumbotron').css('background-color', color);\n                        comp.attr('data-bgcolor', color);\n                    });\n                    \n                    var paddingSettings = form.find('.paddingSettings');\n                    paddingSettings.on('change', function () {\n                        var paddingValue = this.value || '';\n                        var component = keditor.getSettingComponent();\n                        var paddingProp = $(this).attr('name');\n                        if (paddingValue.trim() === '') {\n                            component.find('.jumbotron').css(paddingProp, '');\n                        } else {\n                            if (isNaN(paddingValue)) {\n                                paddingValue = 0;\n                                this.value = paddingValue;\n                            }\n                            component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\n                        }\n                    });\n                    \n                    var marginSettings = form.find('.marginSettings');\n                    marginSettings.on('change', function () {\n                        var paddingValue = this.value || '';\n                        var component = keditor.getSettingComponent();\n                        var paddingProp = $(this).attr('name');\n                        if (paddingValue.trim() === '') {\n                            component.find('.jumbotron').css(paddingProp, '');\n                        } else {\n                            if (isNaN(paddingValue)) {\n                                paddingValue = 0;\n                                this.value = paddingValue;\n                            }\n                            component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\n                        }\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"jumbotron\" component', component);\n            form.find('[name=button-color]').val(component.attr('data-bgcolor')).trigger('update');\n            form.find('.paddingSettings').each(function () {\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px', ''));\n            });\n            form.find('.marginSettings').each(function () {\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px', ''));\n            });\n            form.find('[name=showButton][value=false]').prop('checked', component.find('a').hasClass('hide'));\n            form.find('[name=rounded][value=false]').prop('checked', component.find('.jumbotron').css('border-radius').replace('px', '') === '0');\n            form.find('.chk-inverse').prop('checked', component.find('.jumbotron').hasClass('jumbotron-inverse'));\n        },\n        \n        destroy: function (component, keditor) {\n            flog('destroy \"text\" component', component);\n            \n            var id = component.find('.keditor-component-content').attr('id');\n            var editor = CKEDITOR.instances[id];\n            if (editor) {\n                editor.destroy();\n            }\n        }\n    };\n    \n})(jQuery);\n\n\r\n/**\n * KEditor SVG Map Component (Australia)\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['ksvgmap'] = {\n        init: function (contentArea, container, component, keditor) {\n            var script = component.find('script');\n            if (script.length) {\n                script.remove();\n            }\n            if (component.attr('data-height')) {\n                component.find('.ksvgmap').css('height', +component.attr('data-height'));\n            }\n            $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js', function () {\n                $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-au-mill.js', function () {\n                    component.find('.ksvgmap').vectorMap({\n                        map: 'au_mill',\n                        backgroundColor: '#fff',\n                        zoomButtons: false,\n                        focusOn: {\n                            x: 0.5,\n                            y: 0.5,\n                            scale: 1\n                        },\n                        regionStyle: {\n                            initial: {\n                                fill: '#efefef'\n                            },\n                            hover: {\n                                fill: \"#00aa90\"\n                            }\n                        },\n                        onRegionTipShow: function (e, el, code) {\n                            if (component.attr('data-' + code))\n                                el.html(el.html() + ' - ' + component.attr('data-' + code));\n                        }\n                    });\n                    var i = setInterval(function () {\n                        try {\n                            var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\n                            map.updateSize();\n                            clearInterval(i);\n                        } catch (e) {\n                            flog('trying to get jvectormap object');\n                        }\n                    }, 50);\n                });\n            });\n        },\n        getContent: function (component, keditor) {\n            flog('getContent \"svgmap\" component', component);\n            var componentContent = component.children('.keditor-component-content');\n            var script = '<script>$(function(){$(document.body).hasClass(\"content-editor-page\")||$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js\",function(){$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-au-mill.js\",function(){$(\".ksvgmap\").each(function(){var a=$(this).parents(\"[data-type=component-ksvgmap]\");a.hasClass(\"ksvgInit\")||(a.addClass(\"ksvgInit\"),$(this).vectorMap({map:\"au_mill\",backgroundColor:\"#fff\",zoomButtons:!1,scale:5,regionStyle:{initial:{fill:\"#efefef\"},hover:{fill:\"#00aa90\"}},onRegionTipShow:function(b,c,d){a.attr(\"data-\"+d)&&c.html(\"<span class=\\'vectormap-tip-region-name\\'>\"+c.html()+\"</span><span class=\\'vectormap-tip-separator\\'> - </span><span class=\\'vectormap-tip-region-data\\'>\"+a.attr(\"data-\"+d)+\"</span>\")}}))})})})});</script>';\n            var css = '<link rel=\"stylesheet\" href=\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.css\">';\n            component.find('.jvectormap-container').remove();\n            var arr = $(document.body).find('[data-type=\"component-ksvgmap\"]:not(.keditor-snippet)');\n            if (arr.length > 0) {\n                if ($(arr[arr.length - 1]).attr('id') === component.attr('id')) {\n                    $(css).insertBefore(component.find('.ksvgmap'));\n                    $(script).insertAfter(component.find('.ksvgmap'));\n                }\n            }\n            \n            return componentContent.html();\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'SVGMap Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"svgmap\" settings', form);\n            \n            return $.ajax({\n                url: '/static/keditor/componentKsvgMapSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var component = keditor.getSettingComponent();\n                    form.find('.state').on('change', function (e) {\n                        var val = component.attr('data-' + this.value);\n                        form.find('.stateMessage').val(val);\n                    });\n                    form.find('.stateMessage').on('change', function (e) {\n                        var currentState = form.find('.state').val();\n                        component.attr('data-' + currentState, this.value);\n                    });\n                    form.find('.height').on('change', function (e) {\n                        component.attr('data-height', this.value);\n                        component.find('.ksvgmap').css('height', this.value);\n                        var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\n                        map.updateSize();\n                    });\n                }\n            });\n        },\n        showSettingForm: function (form, component, keditor) {\n            var height = component.attr('data-height');\n            var defaultState = form.find('.state').val();\n            form.find('.height').val(height);\n            form.find('.stateMessage').val(component.attr('data-' + defaultState));\n        }\n    };\n})(jQuery);\n\r\n/**\n * KEditor Photo Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['photo'] = {\n        init: function (contentArea, container, component, keditor) {\n            flog('init \"photo\" component', component);\n            \n            var componentContent = component.children('.keditor-component-content');\n            var img = componentContent.find('img');\n            \n            img.css('display', 'inline-block');\n            if (!img.css('vertical-align')) {\n                img.css('vertical-align', 'middle');\n            }\n            \n            var options = keditor.options;\n            if (typeof options.onComponentReady === 'function') {\n                options.onComponentReady.call(contentArea, component);\n            }\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Photo Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"photo\" settings', form);\n            \n            var self = this;\n            var options = keditor.options;\n            \n            return $.ajax({\n                url: '/static/keditor/componentPhotoSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var txtLink = form.find('#photo-link');\n                    txtLink.on('change', function () {\n                        var link = this.value.trim();\n                        var pattern = new RegExp('^[a-zA-Z0-9_/%:/./-]+$');\n                        var span = txtLink.next();\n                        var formGroup = txtLink.closest('.form-group');\n                        \n                        if (pattern.test(link)) {\n                            keditor.getSettingComponent().find('a').attr('href', link);\n                            span.hide();\n                            formGroup.removeClass('has-error');\n                        } else {\n                            span.show();\n                            formGroup.addClass('has-error');\n                        }\n                    });\n                    \n                    var cbbTarget = form.find('#photo-target');\n                    cbbTarget.on('change', function () {\n                        keditor.getSettingComponent().find('a').attr('target', this.value);\n                    });\n                    \n                    var chkLinkable = form.find('#photo-linkable');\n                    chkLinkable.on('click', function () {\n                        var img = keditor.getSettingComponent().find('img');\n                        \n                        if (chkLinkable.is(':checked')) {\n                            txtLink.prop('disabled', false);\n                            cbbTarget.prop('disabled', false);\n                            img.wrap('<a href=\"\"></a>');\n                        } else {\n                            txtLink.prop('disabled', true);\n                            cbbTarget.prop('disabled', true);\n                            img.unwrap('a');\n                        }\n                    });\n                    \n                    var photoEdit = form.find('#photo-edit');\n                    photoEdit.mselect({\n                        contentTypes: ['image'],\n                        bs3Modal: true,\n                        pagePath: options.pagePath,\n                        basePath: options.basePath,\n                        onSelectFile: function (url, relativeUrl, fileType, hash) {\n                            var img = keditor.getSettingComponent().find('img');\n                            img.attr('src', \"/_hashes/files/\" + hash);\n                            self.showSettingForm(form, keditor.getSettingComponent(), options);\n                        }\n                    });\n                    \n                    var inputAlign = form.find('#photo-align');\n                    inputAlign.on('change', function () {\n                        var panel = keditor.getSettingComponent().find('.photo-panel');\n                        panel.css('text-align', this.value);\n                    });\n                    \n                    var inputVAlign = form.find('#v-align');\n                    inputVAlign.on('change', function () {\n                        var panel = keditor.getSettingComponent().find('.photo-panel').find('img');\n                        panel.css('vertical-align', this.value);\n                    });\n                    \n                    var inputResponsive = form.find('#photo-responsive');\n                    inputResponsive.on('click', function () {\n                        keditor.getSettingComponent().find('img')[this.checked ? 'addClass' : 'removeClass']('img-responsive');\n                    });\n                    \n                    var cbbStyle = form.find('#photo-style');\n                    cbbStyle.on('change', function () {\n                        var img = keditor.getSettingComponent().find('img');\n                        var val = this.value;\n                        \n                        img.removeClass('img-rounded img-circle img-thumbnail');\n                        if (val) {\n                            img.addClass(val);\n                        }\n                    });\n                    \n                    var inputWidth = form.find('#photo-width');\n                    var inputHeight = form.find('#photo-height');\n                    inputWidth.on('change', function () {\n                        var img = keditor.getSettingComponent().find('img');\n                        var newWidth = +this.value;\n                        var newHeight = Math.round(newWidth / self.ratio);\n                        \n                        if (newWidth <= 0) {\n                            newWidth = self.width;\n                            newHeight = self.height;\n                            this.value = newWidth;\n                        }\n                        \n                        img.css({\n                            'width': newWidth,\n                            'height': newHeight\n                        });\n                        inputHeight.val(newHeight);\n                    });\n                    inputHeight.on('change', function () {\n                        var img = keditor.getSettingComponent().find('img');\n                        var newHeight = +this.value;\n                        var newWidth = Math.round(newHeight * self.ratio);\n                        \n                        if (newHeight <= 0) {\n                            newWidth = self.width;\n                            newHeight = self.height;\n                            this.value = newHeight;\n                        }\n                        \n                        img.css({\n                            'height': newHeight,\n                            'width': newWidth\n                        });\n                        inputWidth.val(newWidth);\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"photo\" component', component);\n            \n            var self = this;\n            var inputAlign = form.find('#photo-align');\n            var inputVAlign = form.find('#v-align');\n            var inputResponsive = form.find('#photo-responsive');\n            var inputWidth = form.find('#photo-width');\n            var inputHeight = form.find('#photo-height');\n            var cbbStyle = form.find('#photo-style');\n            var txtLink = form.find('#photo-link');\n            var cbbTarget = form.find('#photo-target');\n            var chkLinkable = form.find('#photo-linkable');\n            \n            txtLink.next().hide();\n            txtLink.closest('.form-group').removeClass('has-error');\n            \n            var panel = component.find('.photo-panel');\n            var img = panel.find('img');\n            \n            var a = img.parent('a');\n            if (a.length > 0) {\n                chkLinkable.prop('checked', true);\n                txtLink.prop('disabled', false).val(a.attr('href'));\n                cbbTarget.prop('disabled', false).val(a.attr('target'));\n            } else {\n                chkLinkable.prop('checked', false);\n                txtLink.prop('disabled', true).val('');\n                cbbTarget.prop('disabled', true).val('');\n            }\n            \n            var algin = panel.css('text-align');\n            if (algin !== 'right' || algin !== 'center') {\n                algin = 'left';\n            }\n            \n            var valign = img.css('vertical-align');\n            \n            if (img.hasClass('img-rounded')) {\n                cbbStyle.val('img-rounded');\n            } else if (img.hasClass('img-circle')) {\n                cbbStyle.val('img-circle');\n            } else if (img.hasClass('img-thumbnail')) {\n                cbbStyle.val('img-thumbnail');\n            } else {\n                cbbStyle.val('');\n            }\n            inputAlign.val(algin);\n            inputVAlign.val(valign);\n            inputResponsive.prop('checked', img.hasClass('img-responsive'));\n            inputWidth.val(img.width());\n            inputHeight.val(img.height());\n            \n            $('<img />').attr('src', img.attr('src')).load(function () {\n                self.ratio = this.width / this.height;\n                self.width = this.width;\n                self.height = this.height;\n            });\n        }\n    };\n    \n})(jQuery);\n\r\n/**\n * KEditor Text Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var contentEditor = $.contentEditor;\n    var flog = KEditor.log;\n    \n    CKEDITOR.disableAutoInline = true;\n    CKEDITOR.dtd.$removeEmpty['i'] = false;\n    \n    // Text component\n    // ---------------------------------------------------------------------\n    KEditor.components['text'] = {\n        init: function (contentArea, container, component, keditor) {\n            flog('init \"text\" component', component);\n            \n            var options = keditor.options;\n            \n            var componentContent = component.find('.keditor-component-content');\n            var ckeditorPlace = componentContent.find('.keditor-component-text-content-inner');\n            \n            if (ckeditorPlace.length === 0) {\n                var contentHtml = componentContent.html();\n                ckeditorPlace = $('<div class=\"keditor-component-text-content-inner clearfix\"></div>');\n                componentContent.html(ckeditorPlace);\n                ckeditorPlace.html(contentHtml);\n                ckeditorPlace.wrap('<div class=\"keditor-component-text-content\"></div>');\n            }\n            \n            if (!ckeditorPlace.attr('id')) {\n                ckeditorPlace.attr('id', keditor.generateId('component-text-content-inner'));\n            }\n            \n            ckeditorPlace.prop('contenteditable', true);\n            ckeditorPlace.on('input', function (e) {\n                if (typeof options.onComponentChanged === 'function') {\n                    options.onComponentChanged.call(contentArea, e, component);\n                }\n                \n                if (typeof options.onContainerChanged === 'function') {\n                    options.onContainerChanged.call(contentArea, e, container);\n                }\n                \n                if (typeof options.onContentChanged === 'function') {\n                    options.onContentChanged.call(contentArea, e);\n                }\n            });\n            \n            var editor = ckeditorPlace.ckeditor(options.ckeditorOptions).editor;\n            editor.on('instanceReady', function () {\n                flog('CKEditor is ready', component);\n                \n                if (typeof options.onComponentReady === 'function') {\n                    options.onComponentReady.call(contentArea, component, editor);\n                }\n            });\n        },\n        \n        getContent: function (component, keditor) {\n            flog('getContent \"text\" component', component);\n            \n            var componentContent = component.find('.keditor-component-content');\n            var componentTextContent = componentContent.find('.keditor-component-text-content');\n            \n            var id = componentTextContent.children().attr('id');\n            var editor = CKEDITOR.instances[id];\n            if (editor) {\n                componentTextContent.html('<div class=\"keditor-component-text-content-inner clearfix\">' + editor.getData() + '</div>');\n            }\n            \n            return componentContent.html();\n        },\n        \n        destroy: function (component, keditor) {\n            flog('destroy \"text\" component', component);\n            \n            var id = component.find('.keditor-component-content').attr('id');\n            var editor = CKEDITOR.instances[id];\n            if (editor) {\n                editor.destroy();\n            }\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Text Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('initSettingForm \"text\" component');\n            \n            return $.ajax({\n                url: '/static/keditor/componentTextSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    // =================================================================================\n                    // Backgrounds\n                    // =================================================================================\n                    var basePath = window.location.pathname.replace('contenteditor', '');\n                    if (keditor.options.basePath) {\n                        basePath = keditor.options.basePath;\n                    }\n                    form.find('.background-image-edit').mselect({\n                        contentTypes: ['image'],\n                        bs3Modal: true,\n                        pagePath: basePath,\n                        basePath: basePath,\n                        onSelectFile: function (url, relativeUrl, fileType, hash) {\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                            var imageUrl = 'http://' + window.location.host + '/_hashes/files/' + hash;\n                            target.css('background-image', 'url(\"' + imageUrl + '\")');\n                            form.find('.background-image-previewer').attr('src', imageUrl);\n                        }\n                    });\n                    form.find('.background-image-delete').on('click', function (e) {\n                        e.preventDefault();\n                        \n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        target.css('background-image', '');\n                        form.find('.background-image-previewer').attr('src', '/static/images/photo_holder.png');\n                    });\n                    \n                    var colorPicker = form.find('.txt-bg-color');\n                    contentEditor.initSimpleColorPicker(colorPicker, function (color) {\n                        target.css('background-color', color);\n                    });\n                    \n                    form.find('.select-bg-repeat').on('change', function () {\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        \n                        target.css('background-repeat', this.value);\n                    });\n                    \n                    form.find('.select-bg-size').on('change', function () {\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        \n                        target.css('background-size', this.value);\n                    });\n                    \n                    form.find('.select-bg-position').on('change', function () {\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        \n                        target.css('background-position', this.value);\n                    });\n                    \n                    // =================================================================================\n                    // Padding\n                    // =================================================================================\n                    form.find('.txt-padding').each(function () {\n                        var txt = $(this);\n                        var styleName = txt.attr('data-style-name');\n                        \n                        txt.on('change', function () {\n                            var paddingValue = this.value || '';\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\n                            \n                            if (paddingValue.trim() === '') {\n                                target.style[styleName] = '';\n                            } else {\n                                if (isNaN(paddingValue)) {\n                                    paddingValue = 0;\n                                    this.value = paddingValue;\n                                }\n                                target.style[styleName] = paddingValue + 'px';\n                            }\n                        });\n                    });\n                    \n                    // =================================================================================\n                    // Margin\n                    // =================================================================================\n                    form.find('.txt-margin').each(function () {\n                        var txt = $(this);\n                        var styleName = txt.attr('data-style-name');\n                        \n                        txt.on('change', function () {\n                            var marginValue = this.value || '';\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\n                            \n                            if (marginValue.trim() === '') {\n                                target.style[styleName] = '';\n                            } else {\n                                if (isNaN(marginValue)) {\n                                    marginValue = 0;\n                                    this.value = marginValue;\n                                }\n                                target.style[styleName] = marginValue + 'px';\n                            }\n                        });\n                    });\n                    \n                    // =================================================================================\n                    // Width and Height\n                    // =================================================================================\n                    form.find('.txt-height').on('change', function () {\n                        var height = this.value || '';\n                        if (isNaN(height)) {\n                            height = '';\n                        }\n                        \n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        target.css('height', height);\n                    });\n                    \n                    form.find('.txt-max-height').on('change', function () {\n                        var maxHeight = this.value || '';\n                        if (isNaN(maxHeight)) {\n                            maxHeight = '';\n                        }\n                        \n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        target.css('max-height', maxHeight + 'px');\n                    });\n                    \n                    form.find('.txt-width').on('change', function () {\n                        var width = this.value || '';\n                        if (isNaN(width)) {\n                            width = '';\n                        }\n                        \n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        target.css('width', width);\n                    });\n                    \n                    form.find('.txt-max-width').on('change', function () {\n                        var maxWidth = this.value || '';\n                        if (isNaN(maxWidth)) {\n                            maxWidth = '';\n                        }\n                        \n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\n                        target.css('max-width', maxWidth + 'px');\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"text\" component', component);\n            \n            var target = component.find('.keditor-component-text-content').get(0);\n            \n            var imageUrl = target.style.backgroundImage;\n            imageUrl = (imageUrl || '').replace(/^url\\(['\"]+(.+)['\"]+\\)$/, '$1');\n            form.find('.background-image-previewer').attr('src', imageUrl !== 'none' && imageUrl !== '' ? imageUrl : '/static/images/photo_holder.png');\n            \n            form.find('.select-bg-repeat').val(target.style.backgroundRepeat || 'repeat');\n            form.find('.select-bg-position').val(target.style.backgroundPosition || '0% 0%');\n            form.find('.select-bg-size').val(target.style.backgroundSize || 'auto');\n            \n            form.find('.txt-bg-color').val(target.style.backgroundColor || '').trigger('update')\n            \n            form.find('.txt-padding').each(function () {\n                var txt = $(this);\n                var styleName = txt.attr('data-style-name');\n                \n                txt.val((target.style[styleName] || '').replace('px', ''));\n            });\n            form.find('.txt-margin').each(function () {\n                var txt = $(this);\n                var styleName = txt.attr('data-style-name');\n                \n                txt.val((target.style[styleName] || '').replace('px', ''));\n            });\n            \n            form.find('.txt-height').val((target.style.height || '').replace('px', ''));\n            form.find('.txt-max-height').val((target.style.maxHeight || '').replace('px', ''));\n            form.find('.txt-width').val((target.style.width || '').replace('px', ''));\n            form.find('.txt-maxWith').val((target.style.maxWidth || '').replace('px', ''));\n        }\n    };\n    \n})(jQuery);\n\r\n/**\n * KEditor Video Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['video'] = {\n        init: function (contentArea, container, component, keditor) {\n            flog('init \"video\" component', component);\n            \n            var self = this;\n            \n            var img = component.find('img[data-video-src]');\n            img.attr('id', keditor.generateId('component-video'));\n            \n            var wrapper = img.parent();\n            if (!wrapper.hasClass('video-wrapper')) {\n                img.wrap('<div class=\"video-wrapper\"></div>');\n                wrapper = img.parent();\n            }\n            \n            wrapper.attr('data-id', img.attr('id'));\n            wrapper.attr('data-autostart', img.attr('data-autostart'));\n            wrapper.attr('data-aspectratio', img.attr('data-aspectratio'));\n            wrapper.attr('data-video-src', img.attr('data-video-src'));\n            wrapper.attr('data-repeat', img.attr('data-repeat'));\n            wrapper.attr('data-controls', img.attr('data-controls'));\n            \n            $.getScriptOnce('/static/jwplayer/6.10/jwplayer.js', function () {\n                jwplayer.key = 'cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=';\n                self.buildJWVideoPlayerPreview(component);\n            });\n        },\n        \n        getContent: function (component) {\n            flog('getContent \"video\" component, component');\n            \n            var wrapper = component.find('.video-wrapper');\n            var html = '<img class=\"video-jw\" ';\n            html += '       id=\"' + this.componentId + '\" ';\n            html += '       src=\"' + wrapper.attr('data-video-src') + '/alt-640-360.png\" ';\n            html += '       data-autostart=\"' + wrapper.attr('data-autostart') + '\" ';\n            html += '       data-aspectratio=\"' + wrapper.attr('data-aspectratio') + '\" ';\n            html += '       data-video-src=\"' + wrapper.attr('data-video-src') + '\" ';\n            html += '       data-repeat=\"' + wrapper.attr('data-repeat') + '\" ';\n            html += '       data-controls=\"' + wrapper.attr('data-controls') + '\" />';\n            wrapper.html(html);\n            \n            return component.find('.keditor-component-content').html();\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Video Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"video\" settings', form);\n            var self = this;\n            \n            return $.ajax({\n                url: '/static/keditor/componentVideoSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var selectPicker = form.find('.select-border-style');\n                    selectPicker.selectpicker().on('changed.bs.select', function () {\n                        self.borderStyle = this.value;\n                        keditor.getSettingComponent().find('.video-wrapper').css('border-style', this.value);\n                    });\n                    \n                    var txtBorderWidth = form.find('.border-width');\n                    txtBorderWidth.on('change', function () {\n                        var width = this.value;\n                        if (isNaN(width) || width < 0) {\n                            width = 1;\n                            this.value = width;\n                        }\n                        \n                        self.borderWidth = width;\n                        keditor.getSettingComponent().find('.video-wrapper').css('border-width', width);\n                    });\n                    \n                    var colorPicker = form.find('.color-picker');\n                    var input = colorPicker.find('input');\n                    var previewer = colorPicker.find('.input-group-addon i');\n                    colorPicker.colorpicker({\n                        format: 'hex',\n                        container: colorPicker.parent(),\n                        component: '.input-group-addon',\n                        align: 'left',\n                        colorSelectors: {\n                            'transparent': 'transparent'\n                        }\n                    }).on('changeColor.colorpicker', function (e) {\n                        var colorHex = e.color.toHex();\n                        \n                        if (!input.val() || input.val().trim().length === 0) {\n                            colorHex = '';\n                            previewer.css('background-color', '');\n                        }\n                        \n                        self.borderColor = colorHex;\n                        keditor.getSettingComponent().find('.video-wrapper').css('border-color', colorHex);\n                    });\n                    \n                    form.find('.chk-border').on('click', function () {\n                        selectPicker.prop('disabled', !this.checked).selectpicker('refresh');\n                        txtBorderWidth.prop('disabled', !this.checked);\n                        colorPicker.colorpicker(this.checked ? 'enable' : 'disable');\n                        \n                        if (!this.checked) {\n                            keditor.getSettingComponent().find('.video-wrapper').css('border', '');\n                            selectPicker.selectpicker('val', '');\n                            txtBorderWidth.val('');\n                            colorPicker.colorpicker('setValue', 'transparent');\n                        }\n                    });\n                    \n                    var btnVideoFileInput = form.find('.btn-videoFileInput');\n                    btnVideoFileInput.mselect({\n                        contentTypes: ['video'],\n                        bs3Modal: true,\n                        pagePath: window.location.pathname.replace('contenteditor', ''),\n                        onSelectFile: function (url) {\n                            keditor.getSettingComponent().find('.video-wrapper').attr('data-video-src', url);\n                            self.refreshVideoPlayerPreview(keditor);\n                        }\n                    });\n                    \n                    var autoplayToggle = form.find('#video-autoplay');\n                    autoplayToggle.on('click', function () {\n                        keditor.getSettingComponent().find('.video-wrapper').attr('data-autostart', this.checked);\n                        self.buildJWVideoPlayerPreview(keditor);\n                    });\n                    \n                    var loopToggle = form.find('#video-loop');\n                    loopToggle.on('click', function () {\n                        keditor.getSettingComponent().find('.video-wrapper').attr('data-repeat', this.checked);\n                        self.buildJWVideoPlayerPreview(keditor);\n                    });\n                    \n                    var ratio = form.find('.video-ratio');\n                    ratio.on('click', function (e) {\n                        if (this.checked) {\n                            keditor.getSettingComponent().find('.video-wrapper').attr('data-aspectratio', this.value);\n                            self.buildJWVideoPlayerPreview(keditor);\n                        }\n                    });\n                    \n                    var showcontrolsToggle = form.find('#video-showcontrols');\n                    showcontrolsToggle.on('click', function (e) {\n                        keditor.getSettingComponent().find('.video-wrapper').attr('data-controls', this.checked);\n                        self.buildJWVideoPlayerPreview(keditor);\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"video\" component', form, component);\n            \n            var wrapper = component.find('.video-wrapper');\n            var borderWidth = wrapper.css('border-width') || '';\n            var isBorderEnabled = borderWidth !== '0px';\n            \n            var chkBorder = form.find('.chk-border');\n            var txtBorderWidth = form.find('.border-width');\n            var colorPicker = form.find('.color-picker');\n            var selectPicker = form.find('.select-border-style');\n            \n            chkBorder.prop('checked', isBorderEnabled);\n            selectPicker.prop('disabled', !isBorderEnabled).selectpicker('refresh').selectpicker('val', wrapper.css('border-style'));\n            txtBorderWidth.prop('disabled', !isBorderEnabled).val(isBorderEnabled ? borderWidth.replace('px', '') : '');\n            colorPicker.colorpicker(isBorderEnabled ? 'enable' : 'disable').colorpicker('setValue', isBorderEnabled ? wrapper.css('border-color') : '');\n            \n            form.find('#video-autoplay').prop('checked', wrapper.attr('data-autostart') === 'true');\n            form.find('#video-loop').prop('checked', wrapper.attr('data-repeat') === 'true');\n            form.find('.video-ratio').filter('[value=\"' + wrapper.attr('data-aspectratio') + '\"]').prop('checked', true);\n            form.find('#video-showcontrols').prop('checked', wrapper.attr('data-controls') === 'true');\n        },\n        \n        buildJWVideoPlayerPreview: function (component) {\n            if (!component.jquery) {\n                component = component.getSettingComponent();\n            }\n            var wrapper = component.find('.video-wrapper');\n            var src = wrapper.attr('data-video-src');\n            var autostart = wrapper.attr('data-autostart');\n            var repeat = wrapper.attr('data-repeat');\n            var aspectratio = wrapper.attr('data-aspectratio');\n            var controls = wrapper.attr('data-controls');\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\n            var posterHref = src + '/alt-640-360.png';\n            \n            flog(\"buildJWPlayer\", src, \"aspectratio=\", aspectratio);\n            playerInstance.setup({\n                autostart: autostart,\n                repeat: repeat,\n                controls: controls,\n                aspectratio: aspectratio,\n                flashplayer: \"/static/jwplayer/6.10/jwplayer.flash.swf\",\n                html5player: \"/static/jwplayer/6.10/jwplayer.html5.js\",\n                width: \"100%\",\n                androidhls: true, //enable hls on android 4.1+\n                playlist: [{\n                    image: posterHref,\n                    sources: [{\n                        file: src\n                    }\n                        , {\n                            file: src + \"/../alt-640-360.webm\"\n                        }, {\n                            file: src + \"/../alt-640-360.m4v\"\n                        }]\n                }]\n                , primary: \"flash\"\n            });\n            \n            playerInstance.onReady(function () {\n                flog('jwplayer preview init done');\n            });\n        },\n        \n        refreshVideoPlayerPreview: function (keditor) {\n            var wrapper = keditor.getSettingComponent().find('.video-wrapper');\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\n            var src = wrapper.attr('data-video-src');\n            \n            playerInstance.load([{\n                file: src\n            }]);\n            playerInstance.play();\n        }\n    };\n})(jQuery);\n\r\n/**\n * KEditor Vimeo Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['vimeo'] = {\n        getContent: function (component, keditor) {\n            flog('getContent \"vimeo\" component', component);\n            \n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.vimeo-cover').remove();\n            \n            return componentContent.html();\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Vimeo Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"vimeo\" settings', form);\n            \n            return $.ajax({\n                url: '/static/keditor/componentVimeoSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var btnEdit = form.find('.btn-vimeo-edit');\n                    btnEdit.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        var inputData = prompt('Please enter Vimeo URL in here:');\n                        var vimeoRegex = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n                        var match = inputData.match(vimeoRegex);\n                        if (match && match[1]) {\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://player.vimeo.com/video/' + match[1] + '?byline=0&portrait=0&badge=0');\n                        } else {\n                            alert('Your Vimeo URL is invalid!');\n                        }\n                    });\n                    \n                    var btn169 = form.find('.btn-vimeo-169');\n                    btn169.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\n                    });\n                    \n                    var btn43 = form.find('.btn-vimeo-43');\n                    btn43.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\n                    });\n                    \n                    var chkAutoplay = form.find('#vimeo-autoplay');\n                    chkAutoplay.on('click', function () {\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\n                        var currentUrl = embedItem.attr('src');\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?byline=0&portrait=0&badge=0&autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\n                        \n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\n                        embedItem.attr('src', newUrl);\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"vimeo\" component', component);\n            \n            var embedItem = component.find('.embed-responsive-item');\n            var chkAutoplay = form.find('#vimeo-autoplay');\n            var src = embedItem.attr('src');\n            \n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\n        }\n    };\n    \n})(jQuery);\n\r\n/**\n * KEditor Youtube Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['youtube'] = {\n        getContent: function (component, keditor) {\n            flog('getContent \"youtube\" component', component);\n            \n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.youtube-cover').remove();\n            \n            return componentContent.html();\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Youtube Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"youtube\" settings', form);\n            \n            return $.ajax({\n                url: '/static/keditor/componentYoutubeSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var btnEdit = form.find('.btn-youtube-edit');\n                    btnEdit.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        var inputData = prompt('Please enter Youtube URL in here:');\n                        var youtubeRegex = /^(?:http(?:s)?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:(?:watch)?\\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\\/))([^\\?&\\\"'>]+)/;\n                        var match = inputData.match(youtubeRegex);\n                        if (match && match[1]) {\n                            keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://www.youtube.com/embed/' + match[1]);\n                        } else {\n                            alert('Your Youtube URL is invalid!');\n                        }\n                    });\n                    \n                    var btn169 = form.find('.btn-youtube-169');\n                    btn169.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\n                    });\n                    \n                    var btn43 = form.find('.btn-youtube-43');\n                    btn43.on('click', function (e) {\n                        e.preventDefault();\n                        \n                        keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\n                    });\n                    \n                    var chkAutoplay = form.find('#youtube-autoplay');\n                    chkAutoplay.on('click', function () {\n                        var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\n                        var currentUrl = embedItem.attr('src');\n                        var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\n                        \n                        flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\n                        embedItem.attr('src', newUrl);\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"youtube\" component', component);\n            \n            var embedItem = component.find('.embed-responsive-item');\n            var chkAutoplay = form.find('#youtube-autoplay');\n            var src = embedItem.attr('src');\n            \n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\n        }\n    };\n    \n})(jQuery);\n"],"sourceRoot":"/source/"}