{"version":3,"sources":["keditor-component-accordion-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","settingEnabled","init","contentArea","container","component","options","id","generateId","componentContent","children","find","attr","panels","each","index","item","p","itemId","panelCollapseId","title","html","indexOf","collapse","removeClass","prop","on","e","onComponentChanged","call","onContainerChanged","onContentChanged","editor","ckeditor","ckeditorOptions","onComponentReady","document","off","preventDefault","confirm","panelsCount","length","this","parents","remove","Msg","error","clone","first","append","getContent","h","parent","replaceWith","addClass","destroy","CKEDITOR","instances","jQuery"],"mappings":"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","file":"keditor-component-accordion-0.0.0.min.js","sourcesContent":["/**\n * KEditor Jumbotron Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n\n    KEditor.components['accordion'] = {\n        settingEnabled: false,\n\n        init: function (contentArea, container, component, keditor) {\n            var options = keditor.options;\n            var id = keditor.generateId('accordion');\n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.accordionWrap .panel-group').attr('id', id);\n            componentContent.find('.accordionWrap a[data-toggle]').attr('data-parent', '#' + id);\n\n\n            var panels = componentContent.find('.panel');\n            panels.each(function (index, item) {\n                var p = $(item);\n                var itemId = keditor.generateId('heading' + index);\n                var panelCollapseId = keditor.generateId('collapse' + index);\n                p.find('.panel-heading').attr('id', itemId);\n                p.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\n                var title = p.find('a[data-toggle]').html();\n                if (title.indexOf('<div>') === -1) {\n                    p.find('a[data-toggle]').attr('href', '#' + panelCollapseId).html('<div>' + title + '</div>');\n                }\n            });\n\n            componentContent.find('.accordionWrap .panel-collapse').collapse('show');\n            componentContent.find('.panel-footer, .btnAddAccordionItem').removeClass('hide');\n            componentContent.find('.panel-title a div').prop('contenteditable', true);\n            componentContent.find('.panel-collapse .panel-body').prop('contenteditable', true);\n\n            componentContent.find('.panel-title a div, .panel-collapse .panel-body').on('input', function (e) {\n                if (typeof options.onComponentChanged === 'function') {\n                    options.onComponentChanged.call(contentArea, e, component);\n                }\n\n                if (typeof options.onContainerChanged === 'function') {\n                    options.onContainerChanged.call(contentArea, e, container);\n                }\n\n                if (typeof options.onContentChanged === 'function') {\n                    options.onContentChanged.call(contentArea, e);\n                }\n            });\n\n            var editor = componentContent.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\n            editor.on('instanceReady', function () {\n                flog('CKEditor is ready', component);\n\n                if (typeof options.onComponentReady === 'function') {\n                    options.onComponentReady.call(contentArea, component, editor);\n                }\n            });\n\n            $(document).off('click', '.btnDeleteAccordionItem').on('click', '.btnDeleteAccordionItem', function (e) {\n                e.preventDefault();\n\n                if (confirm('Are you sure you want to delete this item?')) {\n                    var panelsCount = componentContent.find('.panel').length;\n                    if (panelsCount > 1) {\n                        $(this).parents('.panel').remove();\n                    } else {\n                        Msg.error('You cant delete the last item');\n                    }\n                }\n            });\n\n            $(document).off('click', '.btnAddAccordionItem').on('click', '.btnAddAccordionItem', function (e) {\n                e.preventDefault();\n                var clone = componentContent.find('.panel').first().clone();\n                var itemId = keditor.generateId('heading');\n                var panelCollapseId = keditor.generateId('collapse');\n                clone.find('.panel-heading').attr('id', itemId);\n                clone.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\n                clone.find('a[data-toggle]').attr('href', '#' + panelCollapseId);\n                componentContent.find('.accordionWrap .panel-group').append(clone);\n                var editor = clone.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\n                editor.on('instanceReady', function () {\n                    flog('CKEditor is ready', component);\n\n                    if (typeof options.onComponentReady === 'function') {\n                        options.onComponentReady.call(contentArea, component, editor);\n                    }\n                });\n            });\n        },\n\n        getContent: function (component, keditor) {\n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.panel-title a div').each(function () {\n                var h = $(this).html();\n                $(this).parent('a').html(h);\n            });\n            componentContent.find('.panel-collapse .panel-body').each(function () {\n                var h = $(this).html();\n                $(this).replaceWith('<div class=\"panel-body\">' + h + '</div>');\n            });\n            componentContent.find('.panel-footer, .btnAddAccordionItem').addClass('hide');\n            return componentContent.html();\n        },\n\n        destroy: function (component, keditor) {\n            flog('destroy \"text\" component', component);\n\n            var id = component.find('.keditor-component-content').attr('id');\n            var editor = CKEDITOR.instances[id];\n            if (editor) {\n                editor.destroy();\n            }\n        }\n    };\n})(jQuery);\n\n"],"sourceRoot":"/source/"}