/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(a){var e=a.keditor,t=e.log;e.components.carousel={init:function(a,e,o,n){t('init "carousel" component',o);var i=o.children(".keditor-component-content"),s=i.find(".carousel"),r=n.generateId("component-carousel");s.attr("id",r),s.find(".carousel-indicators li").attr("data-target",r),s.find(".carousel-control").attr("href","#"+r)},getContent:function(a,e){var t=a.children(".keditor-component-content");return t.html()},settingEnabled:!0,settingTitle:"Carousel settings",initSettingForm:function(e,o){e.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <div class="carouselImageWrap"></div>       </div>   </div>   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary carouselAddImage"><i class="fa fa-plus"></i> Add Image</button>       </div>   </div>   <div class="form-group">       <label for="photo-responsive" class="col-sm-12">Cycle continuously</label>       <div class="col-sm-12">           <input type="checkbox" class="carouselWrap" />       </div>   </div>   <div class="form-group">       <label for="photo-align" class="col-sm-12">Pause</label>       <div class="col-sm-12">           <select class="form-control carouselPause">               <option selected value="">No</option>               <option value="hover">Hover</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Interval</label>       <div class="col-sm-12">           <input type="number" class="form-control carouselInterval" value="5000" />       </div>   </div></form>');var n=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1),i=e.find(".carouselAddImage"),s=e.find(".carouselImageWrap"),r=this;i.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:n,basePath:n,onSelectFile:function(a,n,i,s){t("keditor carousel selected a file",a,s),r.addImageToList(e,a,s),r.addImageToCarousel(o.getSettingComponent(),a,s)}}),s.sortable({handle:".btn-sort-image",items:"> .carouselImageItem",axis:"y",tolerance:"pointer",sort:function(){a(this).removeClass("ui-state-default")},update:function(){r.rearrangeItems(o.getSettingComponent(),e)}}),a(document.body).on("click",".carouselImageItem a.btn-remove-image",function(e){if(e.preventDefault(),confirm("Are you sure that you want to delete this image?")){var t=a(this),n=t.closest(".btn-group").siblings("[data-hash]").attr("data-hash");r.refreshCarousel(o.getSettingComponent(),n),t.closest(".carouselImageItem").remove()}}),e.find(".carouselPause").on("change",function(a){a.preventDefault();var e=o.getSettingComponent().find(".carousel");e.attr("data-pause",this.value)}),e.find(".carouselInterval").on("change",function(a){a.preventDefault();var e=o.getSettingComponent().find(".carousel");e.attr("data-interval",this.value)}),e.find(".carouselWrap").on("click",function(a){var e=o.getSettingComponent().find(".carousel");this.checked?e.attr("data-wrap","true"):e.attr("data-wrap","false")})},showSettingForm:function(e,t,o){var n=this;e.find(".carouselImageWrap").html(""),t.find(".carousel-inner > .item").each(function(t,o){var i=a(o).find("img").attr("src"),s=a(o).attr("data-hash");n.addImageToList(e,i,s)});var i=t.find(".carousel").attr("data-wrap"),s=t.find(".carousel").attr("data-pause"),r=t.find(".carousel").attr("data-interval");e.find(".carouselPause").val(s),e.find(".carouselInterval").val(r),e.find(".carouselWrap").prop("checked","true"===i)},addImageToCarousel:function(a,e,t){var o=a.find(".carousel"),n=o.find(".carousel-indicators").children().length,i=0===n?"active":"";o.find(".carousel-indicators").append('<li data-target="'+o.attr("id")+'" data-slide-to="'+n+'" class="'+i+'"></li>'),o.find(".carousel-inner").append('<div data-hash="'+t+'" class="item '+i+'">   <img src="'+e+'" alt="" width="100%" height="" />   <div class="carousel-caption"></div></div>')},addImageToList:function(a,e,t){a.find(".carouselImageWrap").append('<div class="carouselImageItem">   <img class="img-responsive" src="'+e+'" data-hash="'+t+'" />   <div class="btn-group btn-group-sm">       <a class="btn btn-info btn-sort-image" href="#"><i class="fa fa-sort"></i></a>       <a title="Delete this image" class="btn btn-danger btn-remove-image" href="#"><i class="fa fa-trash"></i></a>   </div></div>')},refreshCarousel:function(a,e){a.find("[data-hash="+e+"]").remove(),a.find(".carousel-inner .item.active").length||a.find(".carousel-inner .item:first-child").addClass("active"),a.find(".carousel-indicators li:last-child").remove()},rearrangeItems:function(e,t){var o=this,n=e.find(".carousel");n.find(".carousel-inner").html(""),n.find(".carousel-indicators").html(""),t.find(".carouselImageWrap").find(".carouselImageItem").each(function(){var t=a(this),n=t.find("img");o.addImageToCarousel(e,n.attr("src"),n.attr("data-hash"))})}}}(jQuery);
//# sourceMappingURL=keditor-component-carousel-0.0.0.min.js.map
