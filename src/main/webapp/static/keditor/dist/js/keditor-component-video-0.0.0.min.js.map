{"version":3,"sources":["keditor-component-video-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","init","contentArea","container","component","self","this","img","find","attr","generateId","wrapper","parent","hasClass","wrap","getScriptOnce","jwplayer","key","buildJWVideoPlayerPreview","getContent","html","componentId","settingEnabled","settingTitle","initSettingForm","form","append","selectPicker","selectpicker","on","borderStyle","value","getSettingComponent","css","txtBorderWidth","width","isNaN","borderWidth","colorPicker","input","previewer","colorpicker","format","align","colorSelectors","transparent","e","colorHex","color","toHex","val","trim","length","borderColor","prop","checked","btnVideoFileInput","mselect","contentTypes","bs3Modal","pagePath","window","location","pathname","replace","onSelectFile","url","refreshVideoPlayerPreview","autoplayToggle","loopToggle","ratio","showcontrolsToggle","showSettingForm","isBorderEnabled","chkBorder","filter","jquery","src","autostart","repeat","aspectratio","controls","playerInstance","posterHref","setup","flashplayer","html5player","androidhls","playlist","image","sources","file","primary","onReady","load","play","jQuery"],"mappings":"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","file":"keditor-component-video-0.0.0.min.js","sourcesContent":["/**\r\n * KEditor Video Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['video'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"video\" component', component);\r\n\r\n            var self = this;\r\n\r\n            var img = component.find('img[data-video-src]');\r\n            img.attr('id', keditor.generateId('component-video'));\r\n\r\n            var wrapper = img.parent();\r\n            if (!wrapper.hasClass('video-wrapper')) {\r\n                img.wrap('<div class=\"video-wrapper\"></div>');\r\n                wrapper = img.parent();\r\n            }\r\n\r\n            wrapper.attr('data-id', img.attr('id'));\r\n            wrapper.attr('data-autostart', img.attr('data-autostart'));\r\n            wrapper.attr('data-aspectratio', img.attr('data-aspectratio'));\r\n            wrapper.attr('data-video-src', img.attr('data-video-src'));\r\n            wrapper.attr('data-repeat', img.attr('data-repeat'));\r\n            wrapper.attr('data-controls', img.attr('data-controls'));\r\n\r\n            $.getScriptOnce('/static/jwplayer/6.10/jwplayer.js', function () {\r\n                jwplayer.key = 'cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=';\r\n                self.buildJWVideoPlayerPreview(component);\r\n            });\r\n        },\r\n\r\n        getContent: function (component) {\r\n            flog('getContent \"video\" component, component');\r\n\r\n            var wrapper = component.find('.video-wrapper');\r\n            var html = '<img class=\"video-jw\" ';\r\n            html += '       id=\"' + this.componentId + '\" ';\r\n            html += '       src=\"' + wrapper.attr('data-video-src') + '/alt-640-360.png\" ';\r\n            html += '       data-autostart=\"' + wrapper.attr('data-autostart') + '\" ';\r\n            html += '       data-aspectratio=\"' + wrapper.attr('data-aspectratio') + '\" ';\r\n            html += '       data-video-src=\"' + wrapper.attr('data-video-src') + '\" ';\r\n            html += '       data-repeat=\"' + wrapper.attr('data-repeat') + '\" ';\r\n            html += '       data-controls=\"' + wrapper.attr('data-controls') + '\" />';\r\n            wrapper.html(html);\r\n\r\n            return component.find('.keditor-component-content').html();\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Video Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"video\" settings', form);\r\n            var self = this;\r\n\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <div class=\"video-toolbar\">' +\r\n                '               <a href=\"#\" class=\"btn-videoFileInput btn btn-sm btn-primary btn-block\"><i class=\"fa fa-upload\"></i> Change your video</a>' +\r\n                '               <input id=\"videoFileInput\" type=\"file\" style=\"display: none\">' +\r\n                '           </div>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"video-autoplay\" class=\"col-sm-12\">Autoplay</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"video-autoplay\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"video-loop\" class=\"col-sm-12\">Repeat</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"video-loop\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"video-showcontrols\" class=\"col-sm-12\">Show Controls</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"video-showcontrols\" checked />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Ratio</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"radio\" name=\"video-radio\" class=\"video-ratio\" value=\"4:3\" checked /> 4:3' +\r\n                '       </div>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"radio\" name=\"video-radio\" class=\"video-ratio\" value=\"16:9\" /> 16:9' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Enable border</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" class=\"chk-border\" value=\"\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Border color</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <div class=\"input-group color-picker\">' +\r\n                '               <span class=\"input-group-addon\"><i></i></span>' +\r\n                '               <input type=\"text\" value=\"\" class=\"txt-border-color form-control\" disabled />' +\r\n                '           </div>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Border width</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" class=\"border-width form-control\" disabled />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Border style</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select class=\"form-control select-border-style selectpicker\" disabled title=\" - Select Border Style - \">' +\r\n                '               <option data-content=\"<div class=border-style-solid></div>\" value=\"solid\">Solid</option>' +\r\n                '               <option data-content=\"<div class=border-style-dotted></div>\" value=\"dotted\">Dotted</option>' +\r\n                '               <option data-content=\"<div class=border-style-dashed></div>\" value=\"dashed\">Dased</option>' +\r\n                '               <option data-content=\"<div class=border-style-double></div>\" value=\"double\">Double</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            var selectPicker = form.find('.select-border-style');\r\n            selectPicker.selectpicker().on('changed.bs.select', function () {\r\n                self.borderStyle = this.value;\r\n                keditor.getSettingComponent().find('.video-wrapper').css('border-style', this.value);\r\n            });\r\n\r\n            var txtBorderWidth = form.find('.border-width');\r\n            txtBorderWidth.on('change', function () {\r\n                var width = this.value;\r\n                if (isNaN(width) || width < 0) {\r\n                    width = 1;\r\n                    this.value = width;\r\n                }\r\n\r\n                self.borderWidth = width;\r\n                keditor.getSettingComponent().find('.video-wrapper').css('border-width', width);\r\n            });\r\n\r\n            var colorPicker = form.find('.color-picker');\r\n            var input = colorPicker.find('input');\r\n            var previewer = colorPicker.find('.input-group-addon i');\r\n            colorPicker.colorpicker({\r\n                format: 'hex',\r\n                container: colorPicker.parent(),\r\n                component: '.input-group-addon',\r\n                align: 'left',\r\n                colorSelectors: {\r\n                    'transparent': 'transparent'\r\n                }\r\n            }).on('changeColor.colorpicker', function (e) {\r\n                var colorHex = e.color.toHex();\r\n\r\n                if (!input.val() || input.val().trim().length === 0) {\r\n                    colorHex = '';\r\n                    previewer.css('background-color', '');\r\n                }\r\n\r\n                self.borderColor = colorHex;\r\n                keditor.getSettingComponent().find('.video-wrapper').css('border-color', colorHex);\r\n            });\r\n\r\n            form.find('.chk-border').on('click', function () {\r\n                selectPicker.prop('disabled', !this.checked).selectpicker('refresh');\r\n                txtBorderWidth.prop('disabled', !this.checked);\r\n                colorPicker.colorpicker(this.checked ? 'enable' : 'disable');\r\n\r\n                if (!this.checked) {\r\n                    keditor.getSettingComponent().find('.video-wrapper').css('border', '');\r\n                    selectPicker.selectpicker('val', '');\r\n                    txtBorderWidth.val('');\r\n                    colorPicker.colorpicker('setValue', 'transparent');\r\n                }\r\n            });\r\n\r\n            var btnVideoFileInput = form.find('.btn-videoFileInput');\r\n            btnVideoFileInput.mselect({\r\n                contentTypes: ['video'],\r\n                bs3Modal: true,\r\n                pagePath: window.location.pathname.replace('contenteditor', ''),\r\n                onSelectFile: function (url) {\r\n                    keditor.getSettingComponent().find('.video-wrapper').attr('data-video-src', url);\r\n                    self.refreshVideoPlayerPreview(keditor);\r\n                }\r\n            });\r\n\r\n            var autoplayToggle = form.find('#video-autoplay');\r\n            autoplayToggle.on('click', function () {\r\n                keditor.getSettingComponent().find('.video-wrapper').attr('data-autostart', this.checked);\r\n                self.buildJWVideoPlayerPreview(keditor);\r\n            });\r\n\r\n            var loopToggle = form.find('#video-loop');\r\n            loopToggle.on('click', function () {\r\n                keditor.getSettingComponent().find('.video-wrapper').attr('data-repeat', this.checked);\r\n                self.buildJWVideoPlayerPreview(keditor);\r\n            });\r\n\r\n            var ratio = form.find('.video-ratio');\r\n            ratio.on('click', function (e) {\r\n                if (this.checked) {\r\n                    keditor.getSettingComponent().find('.video-wrapper').attr('data-aspectratio', this.value);\r\n                    self.buildJWVideoPlayerPreview(keditor);\r\n                }\r\n            });\r\n\r\n            var showcontrolsToggle = form.find('#video-showcontrols');\r\n            showcontrolsToggle.on('click', function (e) {\r\n                keditor.getSettingComponent().find('.video-wrapper').attr('data-controls', this.checked);\r\n                self.buildJWVideoPlayerPreview(keditor);\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"video\" component', form, component);\r\n\r\n            var wrapper = component.find('.video-wrapper');\r\n            var borderWidth = wrapper.css('border-width') || '';\r\n            var isBorderEnabled = borderWidth !== '0px';\r\n\r\n            var chkBorder = form.find('.chk-border');\r\n            var txtBorderWidth = form.find('.border-width');\r\n            var colorPicker = form.find('.color-picker');\r\n            var selectPicker = form.find('.select-border-style');\r\n\r\n            chkBorder.prop('checked', isBorderEnabled);\r\n            selectPicker.prop('disabled', !isBorderEnabled).selectpicker('refresh').selectpicker('val', wrapper.css('border-style'));\r\n            txtBorderWidth.prop('disabled', !isBorderEnabled).val(isBorderEnabled ? borderWidth.replace('px', '') : '');\r\n            colorPicker.colorpicker(isBorderEnabled ? 'enable' : 'disable').colorpicker('setValue', isBorderEnabled ? wrapper.css('border-color') : '');\r\n\r\n            form.find('#video-autoplay').prop('checked', wrapper.attr('data-autostart') === 'true');\r\n            form.find('#video-loop').prop('checked', wrapper.attr('data-repeat') === 'true');\r\n            form.find('.video-ratio').filter('[value=\"' + wrapper.attr('data-aspectratio') + '\"]').prop('checked', true);\r\n            form.find('#video-showcontrols').prop('checked', wrapper.attr('data-controls') === 'true');\r\n        },\r\n\r\n        buildJWVideoPlayerPreview: function (component) {\r\n            if (!component.jquery) {\r\n                component = component.getSettingComponent();\r\n            }\r\n            var wrapper = component.find('.video-wrapper');\r\n            var src = wrapper.attr('data-video-src');\r\n            var autostart = wrapper.attr('data-autostart');\r\n            var repeat = wrapper.attr('data-repeat');\r\n            var aspectratio = wrapper.attr('data-aspectratio');\r\n            var controls = wrapper.attr('data-controls');\r\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\r\n            var posterHref = src + '/alt-640-360.png';\r\n\r\n            flog(\"buildJWPlayer\", src, \"aspectratio=\", aspectratio);\r\n            playerInstance.setup({\r\n                autostart: autostart,\r\n                repeat: repeat,\r\n                controls: controls,\r\n                aspectratio: aspectratio,\r\n                flashplayer: \"/static/jwplayer/6.10/jwplayer.flash.swf\",\r\n                html5player: \"/static/jwplayer/6.10/jwplayer.html5.js\",\r\n                width: \"100%\",\r\n                androidhls: true, //enable hls on android 4.1+\r\n                playlist: [{\r\n                    image: posterHref,\r\n                    sources: [{\r\n                        file: src\r\n                    }\r\n                        , {\r\n                            file: src + \"/../alt-640-360.webm\"\r\n                        }, {\r\n                            file: src + \"/../alt-640-360.m4v\"\r\n                        }]\r\n                }]\r\n                , primary: \"flash\"\r\n            });\r\n\r\n            playerInstance.onReady(function () {\r\n                flog('jwplayer preview init done');\r\n            });\r\n        },\r\n\r\n        refreshVideoPlayerPreview: function (keditor) {\r\n            var wrapper = keditor.getSettingComponent().find('.video-wrapper');\r\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\r\n            var src = wrapper.attr('data-video-src');\r\n\r\n            playerInstance.load([{\r\n                file: src\r\n            }]);\r\n            playerInstance.play();\r\n        }\r\n    };\r\n})(jQuery);\r\n"]}