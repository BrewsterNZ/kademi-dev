{"version":3,"sources":["keditor-component-carousel-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","init","contentArea","container","component","componentContent","children","carousel","find","length","self","this","images","addClass","each","item","push","src","attr","hash","css","html","i","image","addItemToCarousel","id","generateId","getContent","settingEnabled","settingTitle","editingItemId","initSettingForm","form","ajax","url","type","dataType","success","resp","basePath","window","location","pathname","substr","lastIndexOf","carouselAddImage","carouselItemsWrap","mselect","contentTypes","bs3Modal","pagePath","onSelectFile","relUrl","addItemToList","refreshCarousel","getSettingComponent","sortable","handle","items","axis","tolerance","sort","removeClass","update","contentModal","appendTo","document","body","ckeditorOptions","options","removePlugins","replace","extraPlugins","editor","ckeditor","on","e","preventDefault","modal","setData","carouselContent","getData","content","confirm","btn","closest","siblings","remove","carouselItem","val","trigger","value","isNaN","comp","checked","showSettingForm","carouselImg","slice","isWrap","pause","interval","height","prop","data","index","cls","backgroundUrl","append","itemStr","Date","getTime","textarea","img","jQuery"],"mappings":"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","file":"keditor-component-carousel-0.0.0.min.js","sourcesContent":["/**\n * Created by Anh on 7/27/2016.\n */\n/**\n * KEditor Carousel Component\n * @copyright: Kademi (http://kademi.co)\n * @author: Kademi (http://kademi.co)\n * @version: @{version}\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\n */\n(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['carousel'] = {\n        init: function (contentArea, container, component, keditor) {\n            flog('init \"carousel\" component', component);\n            var componentContent = component.children('.keditor-component-content');\n            var carousel = componentContent.find('.carousel');\n            \n            if (carousel.find('.carousel-img').length === 0 && carousel.find('.carousel-content').length === 0) {\n                var self = this;\n                var images = [];\n                \n                carousel.addClass('carousel-fixed-height');\n                carousel.find('.carousel-inner .item').each(function () {\n                    var item = $(this);\n                    \n                    images.push({\n                        src: item.find('img').attr('src'),\n                        hash: item.attr('data-hash')\n                    });\n                });\n                \n                carousel.attr('data-height', 200).css('height', 200);\n                carousel.find('.carousel-inner').html('');\n                carousel.find('.carousel-indicators').html('');\n                \n                $.each(images, function (i, image) {\n                    self.addItemToCarousel(component, image.src, image.hash);\n                });\n            }\n            \n            var id = keditor.generateId('component-carousel');\n            carousel.attr('id', id);\n            carousel.find('.carousel-indicators li').attr('data-target', '#' + id);\n            carousel.find('.carousel-control').attr('href', '#' + id);\n        },\n        getContent: function (component, keditor) {\n            var componentContent = component.children('.keditor-component-content');\n            return componentContent.html();\n        },\n        settingEnabled: true,\n        \n        settingTitle: 'Carousel settings',\n        \n        editingItemId: '',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"carousel\" settings', form);\n            \n            var self = this;\n            return $.ajax({\n                url: '/static/keditor/componentCarouselSettings.html',\n                type: 'get',\n                dataType: 'HTML',\n                success: function (resp) {\n                    form.html(resp);\n                    \n                    var basePath = window.location.pathname.substr(0, window.location.pathname.lastIndexOf('/') + 1);\n                    var carouselAddImage = form.find('.carouselAddImage');\n                    var carouselItemsWrap = form.find('.carouselItemsWrap');\n                    \n                    carouselAddImage.mselect({\n                        contentTypes: ['image'],\n                        bs3Modal: true,\n                        pagePath: basePath,\n                        basePath: basePath,\n                        onSelectFile: function (url, relUrl, type, hash) {\n                            flog('Keditor carousel selected a file', url, hash);\n                            self.addItemToList(form, {\n                                src: url,\n                                hash: hash\n                            });\n                            \n                            self.refreshCarousel(keditor.getSettingComponent(), form);\n                            self.editingItemId = '';\n                        }\n                    });\n                    \n                    carouselItemsWrap.sortable({\n                        handle: '.btn-sort-item',\n                        items: '> .carouselItem',\n                        axis: 'y',\n                        tolerance: 'pointer',\n                        sort: function () {\n                            $(this).removeClass('ui-state-default');\n                        },\n                        update: function () {\n                            self.refreshCarousel(keditor.getSettingComponent(), form);\n                        }\n                    });\n                    \n                    var contentModal = $(\n                        '<div class=\"modal fade\" tabindex=\"-1\" id=\"modal-carousel-content\">' +\n                        '    <div class=\"modal-dialog modal-lg\">' +\n                        '        <div class=\"modal-content\">' +\n                        '            <div class=\"modal-header\">' +\n                        '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>' +\n                        '                <h4 class=\"modal-title\">Edit your content</h4>' +\n                        '            </div>' +\n                        '            <div class=\"modal-body\">' +\n                        '                <textarea id=\"modal-carousel-content-body\" class=\"form-control\" rows=\"12\"></textarea>' +\n                        '            </div>' +\n                        '            <div class=\"modal-footer\">' +\n                        '                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>' +\n                        '                <button type=\"button\" class=\"btn btn-primary btn-carousel-save-content\">Save</button>' +\n                        '            </div>' +\n                        '        </div>' +\n                        '    </div>' +\n                        '</div>'\n                    ).appendTo(document.body);\n                    \n                    var ckeditorOptions = keditor.options.ckeditorOptions;\n                    ckeditorOptions.removePlugins = ckeditorOptions.removePlugins.replace(',autogrow', '');\n                    ckeditorOptions.extraPlugins = ckeditorOptions.extraPlugins + ',autogrow';\n                    var editor = $('#modal-carousel-content-body').ckeditor(ckeditorOptions).editor;\n                    \n                    form.find('.carouselAddImage').on('click', function (e) {\n                        e.preventDefault();\n                    });\n                    \n                    form.find('.carouselAddContent').on('click', function (e) {\n                        e.preventDefault();\n                        contentModal.modal('show');\n                    });\n                    \n                    contentModal.on('hidden.bs.modal', function () {\n                        editor.setData('');\n                        self.editingItemId = '';\n                    });\n                    \n                    contentModal.find('.btn-carousel-save-content').on('click', function (e) {\n                        e.preventDefault();\n                        \n                        flog('Keditor carousel add content');\n                        \n                        var carouselContent = editor.getData() || '';\n                        self.addItemToList(form, {\n                            content: carouselContent\n                        });\n                        \n                        self.refreshCarousel(keditor.getSettingComponent(), form);\n                        contentModal.modal('hide');\n                    });\n                    \n                    $(document.body).on('click', '.carouselItem a.btn-remove-item', function (e) {\n                        e.preventDefault();\n                        \n                        if (confirm('Are you sure that you want to delete this image?')) {\n                            var btn = $(this);\n                            var hash = btn.closest('.btn-group').siblings('[data-hash]').attr('data-hash');\n                            \n                            self.refreshCarousel(keditor.getSettingComponent(), hash);\n                            btn.closest('.carouselItem').remove();\n                        }\n                    });\n                    \n                    $(document.body).on('click', '.carouselItem a.btn-edit-item', function (e) {\n                        e.preventDefault();\n                        \n                        var carouselItem = $(this).closest('.carouselItem');\n                        self.editingItemId = carouselItem.attr('id');\n                        \n                        if (carouselItem.find('textarea').length > 0) {\n                            editor.setData(carouselItem.find('textarea').val() || '');\n                            form.find('.carouselAddContent').trigger('click');\n                        } else {\n                            form.find('.carouselAddImage').trigger('click');\n                        }\n                    });\n                    \n                    form.find('.carouselHeight').on('change', function (e) {\n                        var value = this.value;\n                        \n                        if (isNaN(value) || +value < 200) {\n                            value = 200;\n                            this.value = 200;\n                        }\n                        \n                        var carousel = keditor.getSettingComponent().find('.carousel');\n                        carousel.attr('data-height', value);\n                        carousel.css('height', value);\n                    });\n                    \n                    form.find('.carouselPause').on('change', function (e) {\n                        e.preventDefault();\n                        var comp = keditor.getSettingComponent().find('.carousel');\n                        comp.attr('data-pause', this.value);\n                    });\n                    \n                    form.find('.carouselInterval').on('change', function (e) {\n                        e.preventDefault();\n                        var comp = keditor.getSettingComponent().find('.carousel');\n                        comp.attr('data-interval', this.value);\n                    });\n                    \n                    form.find('.carouselWrap').on('click', function (e) {\n                        var comp = keditor.getSettingComponent().find('.carousel');\n                        if (this.checked) {\n                            comp.attr('data-wrap', 'true');\n                        } else {\n                            comp.attr('data-wrap', 'false');\n                        }\n                    });\n                }\n            });\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            var self = this;\n            self.editingItemId = '';\n            form.find('.carouselItemsWrap').html('');\n            component.find('.carousel-inner > .item').each(function () {\n                var item = $(this);\n                var carouselImg = item.find('.carousel-img');\n                var carouselContent = item.find('.carousel-content');\n                \n                if (carouselContent.length > 0) {\n                    self.addItemToList(form, {\n                        content: carouselContent.html()\n                    });\n                } else {\n                    var url = carouselImg.css('background-image');\n                    url = url.slice(4, -1).replace(/['\"]/g, '');\n                    var hash = $(item).attr('data-hash');\n                    \n                    self.addItemToList(form, {\n                        src: url,\n                        hash: hash\n                    });\n                }\n            });\n            \n            var isWrap = component.find('.carousel').attr('data-wrap');\n            var pause = component.find('.carousel').attr('data-pause');\n            var interval = component.find('.carousel').attr('data-interval');\n            var height = component.find('.carousel').attr('data-height');\n            \n            form.find('.carouselPause').val(pause);\n            form.find('.carouselInterval').val(interval);\n            form.find('.carouselWrap').prop('checked', isWrap === 'true');\n            form.find('.carouselHeight').val(height);\n        },\n        \n        addItemToCarousel: function (component, data) {\n            flog('addItemToCarousel', component, data);\n            \n            var carousel = component.find('.carousel');\n            var id = carousel.attr('id');\n            var index = carousel.find('.carousel-indicators').children().length;\n            var cls = index === 0 ? 'active' : '';\n            var backgroundUrl = \"background-image: url('\" + data.src + \"')\";\n            \n            carousel.find('.carousel-indicators').append(\n                '<li data-target=\"#' + id + '\" data-slide-to=\"' + index + '\" class=\"' + cls + '\"></li>'\n            );\n            \n            var itemStr = '';\n            if (data.content) {\n                itemStr += '<div class=\"item ' + cls + '\">';\n                itemStr += '   <div class=\"carousel-content clearfix\">' + data.content + '</div>';\n                itemStr += '   <div class=\"carousel-caption\"></div>';\n                itemStr += '</div>';\n            } else {\n                itemStr += '<div data-hash=\"' + data.hash + '\" class=\"item ' + cls + '\">';\n                itemStr += '   <div class=\"carousel-img\" style=\"' + backgroundUrl + '\"></div>';\n                itemStr += '   <div class=\"carousel-caption\"></div>';\n                itemStr += '</div>';\n            }\n            \n            carousel.find('.carousel-inner').append(itemStr);\n        },\n        \n        addItemToList: function (form, data) {\n            flog('addItemToList', form, data);\n            \n            var itemStr = '';\n            if (data.content) {\n                itemStr += '<img class=\"img-responsive\" src=\"/static/keditor/componentCarouselContent.png\" />';\n                itemStr += '<textarea style=\"display: none\">' + data.content + '</textarea>';\n            } else {\n                itemStr = '<img class=\"img-responsive\" src=\"' + data.src + '\" data-hash=\"' + data.hash + '\" />';\n            }\n            itemStr += '   <div class=\"btn-group btn-group-sm\">';\n            itemStr += '       <a class=\"btn btn-info btn-sort-item\" href=\"#\"><i class=\"fa fa-sort\"></i></a>';\n            itemStr += '       <a class=\"btn btn-success btn-edit-item\" href=\"#\"><i class=\"fa fa-edit\"></i></a>';\n            itemStr += '       <a title=\"Delete this image\" class=\"btn btn-danger btn-remove-item\" href=\"#\"><i class=\"fa fa-trash\"></i></a>';\n            itemStr += '   </div>';\n            \n            if (this.editingItemId) {\n                form.find('#' + this.editingItemId).html(itemStr);\n                this.editingItemId = '';\n            } else {\n                form.find('.carouselItemsWrap').append(\n                    '<div class=\"carouselItem\" id=\"carouselItem-' + (new Date()).getTime() + '\">' + itemStr + '</div>'\n                );\n            }\n        },\n        \n        refreshCarousel: function (component, form) {\n            var self = this;\n            var carousel = component.find('.carousel');\n            carousel.find('.carousel-inner').html('');\n            carousel.find('.carousel-indicators').html('');\n            \n            form.find('.carouselItemsWrap').find('.carouselItem').each(function () {\n                var carouselItem = $(this);\n                var textarea = carouselItem.find('textarea')\n                var img = carouselItem.find('img');\n                \n                if (textarea.length === 0) {\n                    self.addItemToCarousel(component, {\n                        src: img.attr('src'),\n                        hash: img.attr('data-hash')\n                    });\n                } else {\n                    self.addItemToCarousel(component, {\n                        content: textarea.val()\n                    });\n                }\n            });\n        }\n    }\n    \n})(jQuery);"],"sourceRoot":"/source/"}