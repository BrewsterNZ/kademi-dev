/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(n){var e=n.keditor,t=e.log;e.components.accordion={settingEnabled:!1,init:function(e,o,a,i){var d=i.options,l=i.generateId("accordion"),c=a.children(".keditor-component-content");c.find(".accordionWrap .panel-group").attr("id",l),c.find(".accordionWrap a[data-toggle]").attr("data-parent","#"+l);var r=c.find(".panel");r.each(function(e,t){var o=n(t),a=i.generateId("heading"+e),d=i.generateId("collapse"+e);o.find(".panel-heading").attr("id",a),o.find(".panel-collapse").attr("aria-labelledby",a).attr("id",d);var l=o.find("a[data-toggle]").html();-1===l.indexOf("<div>")&&o.find("a[data-toggle]").attr("href","#"+d).html("<div>"+l+"</div>")}),c.find(".accordionWrap .panel-collapse").collapse("show"),c.find(".panel-footer, .btnAddAccordionItem").removeClass("hide"),c.find(".panel-title a div").prop("contenteditable",!0),c.find(".panel-collapse .panel-body").prop("contenteditable",!0),c.find(".panel-title a div, .panel-collapse .panel-body").on("input",function(n){"function"==typeof d.onComponentChanged&&d.onComponentChanged.call(e,n,a),"function"==typeof d.onContainerChanged&&d.onContainerChanged.call(e,n,o),"function"==typeof d.onContentChanged&&d.onContentChanged.call(e,n)});var p=c.find(".panel-title a div, .panel-collapse .panel-body").ckeditor(d.ckeditorOptions).editor;p.on("instanceReady",function(){t("CKEditor is ready",a),"function"==typeof d.onComponentReady&&d.onComponentReady.call(e,a,p)}),n(document).off("click",".btnDeleteAccordionItem").on("click",".btnDeleteAccordionItem",function(e){if(e.preventDefault(),confirm("Are you sure you want to delete this item?")){var t=c.find(".panel").length;t>1?n(this).parents(".panel").remove():Msg.error("You cant delete the last item")}}),n(document).off("click",".btnAddAccordionItem").on("click",".btnAddAccordionItem",function(n){n.preventDefault();var o=c.find(".panel").first().clone(),l=i.generateId("heading"),r=i.generateId("collapse");o.find(".panel-heading").attr("id",l),o.find(".panel-collapse").attr("aria-labelledby",l).attr("id",r),o.find("a[data-toggle]").attr("href","#"+r),c.find(".accordionWrap .panel-group").append(o);var p=o.find(".panel-title a div, .panel-collapse .panel-body").ckeditor(d.ckeditorOptions).editor;p.on("instanceReady",function(){t("CKEditor is ready",a),"function"==typeof d.onComponentReady&&d.onComponentReady.call(e,a,p)})})},getContent:function(e,t){var o=e.children(".keditor-component-content");return o.find(".panel-title a div").each(function(){var e=n(this).html();n(this).parent("a").html(e)}),o.find(".panel-collapse .panel-body").each(function(){var e=n(this).html();n(this).replaceWith('<div class="panel-body">'+e+"</div>")}),o.find(".panel-footer, .btnAddAccordionItem").addClass("hide"),o.html()},destroy:function(n,e){t('destroy "text" component',n);var o=n.find(".keditor-component-content").attr("id"),a=CKEDITOR.instances[o];a&&a.destroy()}}}(jQuery);
//# sourceMappingURL=keditor-component-accordion-0.0.0.min.js.map
