/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(n){var e=n.keditor,t=e.log;e.components.accordion={settingEnabled:!0,settingTitle:"Accordion Settings",init:function(e,a,o,i){var d=i.options,l=i.generateId("accordion"),c=o.children(".keditor-component-content");c.find(".accordionWrap .panel-group").attr("id",l),c.find(".accordionWrap a[data-toggle]").attr("data-parent","#"+l);var r=c.find(".panel");r.each(function(e,t){var a=n(t),o=i.generateId("heading"+e),d=i.generateId("collapse"+e);a.find(".panel-heading").attr("id",o),a.find(".panel-collapse").attr("aria-labelledby",o).attr("id",d);var l=a.find("a[data-toggle]").html();a.find("a[data-toggle]").attr("href","#"+d).attr("aria-controls","#"+d),l.indexOf("<div>")===-1&&a.find("a[data-toggle]").html("<div>"+l+"</div>")}),c.find(".accordionWrap .panel-collapse").collapse("show"),c.find(".panel-footer, .btnAddAccordionItem").removeClass("hide"),c.find(".panel-title a div").prop("contenteditable",!0),c.find(".panel-collapse .panel-body").prop("contenteditable",!0),c.find(".panel-title a div, .panel-collapse .panel-body").on("input",function(n){"function"==typeof d.onComponentChanged&&d.onComponentChanged.call(e,n,o),"function"==typeof d.onContainerChanged&&d.onContainerChanged.call(e,n,a),"function"==typeof d.onContentChanged&&d.onContentChanged.call(e,n)});var p=c.find(".panel-title a div, .panel-collapse .panel-body").ckeditor(d.ckeditorOptions).editor;p.on("instanceReady",function(){t("CKEditor is ready",o),"function"==typeof d.onComponentReady&&d.onComponentReady.call(e,o,p)}),n(document).off("click",".btnDeleteAccordionItem").on("click",".btnDeleteAccordionItem",function(e){if(e.preventDefault(),confirm("Are you sure you want to delete this item?")){var t=c.find(".panel").length;t>1?n(this).parents(".panel").remove():Msg.error("You cant delete the last item")}}),n(document).off("click",".btnAddAccordionItem").on("click",".btnAddAccordionItem",function(n){n.preventDefault();var a=c.find(".panel").first().clone(),l=i.generateId("heading"),r=i.generateId("collapse");a.find(".panel-heading").attr("id",l),a.find(".panel-collapse").attr("aria-labelledby",l).attr("id",r),a.find("a[data-toggle]").attr("href","#"+r),c.find(".accordionWrap .panel-group").append(a);var p=a.find(".panel-title a div, .panel-collapse .panel-body").ckeditor(d.ckeditorOptions).editor;p.on("instanceReady",function(){t("CKEditor is ready",o),"function"==typeof d.onComponentReady&&d.onComponentReady.call(e,o,p)})})},getContent:function(e,t){var a=e.children(".keditor-component-content");return a.find(".panel-title a div").each(function(){var e=n(this).html();n(this).parent("a").html(e)}),a.find(".panel-collapse .panel-body").each(function(){var e=n(this).html();n(this).replaceWith('<div class="panel-body">'+e+"</div>")}),"true"==e.attr("data-initial-collapsed")&&a.find(".panel").each(function(){var e=n(this).find(".panel-heading a"),t=n(this).find(".panel-collapse");t.addClass("collapse").attr("aria-expanded","false").removeClass("in"),e.addClass("collapsed").attr("aria-expanded","false")}),a.find(".panel-footer, .btnAddAccordionItem").addClass("hide"),a.html()},destroy:function(n,e){t('destroy "text" component',n);var a=n.find(".keditor-component-content").attr("id"),o=CKEDITOR.instances[a];o&&o.destroy()},initSettingForm:function(e,a){return t('init "accordion" settings',e),n.ajax({url:"/static/keditor/componentAccordionSettings.html",type:"get",dataType:"HTML",success:function(n){e.html(n),e.find(".collapsedAll").on("click",function(){var n=a.getSettingComponent();n.attr("data-initial-collapsed",this.checked)}),e.find(".panelStyle").on("change",function(n){var e=a.getSettingComponent(),t=e.attr("data-panel-style")||"panel-default";e.attr("data-panel-style",this.value),e.find(".panel").removeClass(t).addClass(this.value)})}})},showSettingForm:function(n,e,t){n.find(".collapsedAll").prop("checked","true"==e.attr("data-initial-collapsed")),n.find(".panelStyle").val(e.attr("data-panel-style"))}}}(jQuery);
//# sourceMappingURL=keditor-component-accordion-0.0.0.min.js.map
