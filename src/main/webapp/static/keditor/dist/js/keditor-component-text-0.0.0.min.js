/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var n=t.keditor,e=n.log;CKEDITOR.disableAutoInline=!0,CKEDITOR.dtd.$removeEmpty.i=!1,n.components.text={init:function(n,o,i,a){e('init "text" component',i);var c=a.options,r=i.find(".keditor-component-content"),d=r.find(".keditor-component-text-content-inner");if(0===d.length){var s=r.html();d=t('<div class="keditor-component-text-content-inner clearfix"></div>'),r.html(d),d.html(s),d.wrap('<div class="keditor-component-text-content"></div>')}d.attr("id")||d.attr("id",a.generateId("component-text-content-inner")),d.prop("contenteditable",!0),d.on("input",function(t){"function"==typeof c.onComponentChanged&&c.onComponentChanged.call(n,t,i),"function"==typeof c.onContainerChanged&&c.onContainerChanged.call(n,t,o),"function"==typeof c.onContentChanged&&c.onContentChanged.call(n,t)});var g=d.ckeditor(a.options.ckeditorOptions).editor;g.on("instanceReady",function(){e("CKEditor is ready",i),"function"==typeof c.onComponentReady&&c.onComponentReady.call(n,i,g)})},getContent:function(t,n){e('getContent "text" component',t);var o=t.find(".keditor-component-content"),i=o.find(".keditor-component-text-content"),a=i.children().attr("id"),c=CKEDITOR.instances[a];return c&&i.html('<div class="keditor-component-text-content-inner clearfix">'+c.getData()+"</div>"),o.html()},destroy:function(t,n){e('destroy "text" component',t);var o=t.find(".keditor-component-content").attr("id"),i=CKEDITOR.instances[o];i&&i.destroy()},settingEnabled:!0,settingTitle:"Text Settings",initSettingForm:function(n,o){return e('initSettingForm "text" component'),t.ajax({url:"/static/keditor/componentTextSettings.html",type:"get",dataType:"HTML",success:function(e){n.html(e);var i=window.location.pathname.replace("contenteditor","");o.options.basePath&&(i=o.options.basePath),n.find(".background-image-edit").mselect({contentTypes:["image"],bs3Modal:!0,pagePath:i,basePath:i,onSelectFile:function(t,e,i,a){var c=o.getSettingComponent().find(".keditor-component-text-content"),r="http://"+window.location.host+"/_hashes/files/"+a;c.css("background-image",'url("'+r+'")'),n.find(".background-image-previewer").attr("src",r)}}),n.find(".background-image-delete").on("click",function(t){t.preventDefault();var e=o.getSettingComponent().find(".keditor-component-text-content");e.css("background-image",""),n.find(".background-image-previewer").attr("src","/static/images/photo_holder.png")});var a=n.find(".color-picker");initColorPicker(a,function(t){var n=o.getSettingComponent().find(".keditor-component-text-content");t&&"transparent"!==t?n.css("background-color",t):n.css("background-color","")}),n.find(".select-bg-repeat").on("change",function(){var t=o.getSettingComponent().find(".keditor-component-text-content");t.css("background-repeat",this.value)}),n.find(".select-bg-size").on("change",function(){var t=o.getSettingComponent().find(".keditor-component-text-content");t.css("background-size",this.value)}),n.find(".select-bg-position").on("change",function(){var t=o.getSettingComponent().find(".keditor-component-text-content");t.css("background-position",this.value)}),n.find(".txt-padding").each(function(){var n=t(this),e=n.attr("data-style-name");n.on("change",function(){var t=this.value||"",n=o.getSettingComponent().find(".keditor-component-text-content").get(0);""===t.trim()?n.style[e]="":(isNaN(t)&&(t=0,this.value=t),n.style[e]=t+"px")})}),n.find(".txt-margin").each(function(){var n=t(this),e=n.attr("data-style-name");n.on("change",function(){var t=this.value||"",n=o.getSettingComponent().find(".keditor-component-text-content").get(0);""===t.trim()?n.style[e]="":(isNaN(t)&&(t=0,this.value=t),n.style[e]=t+"px")})}),n.find(".txt-height").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var n=o.getSettingComponent().find(".keditor-component-text-content");n.css("height",t)}),n.find(".txt-max-height").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var n=o.getSettingComponent().find(".keditor-component-text-content");n.css("max-height",t+"px")}),n.find(".txt-width").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var n=o.getSettingComponent().find(".keditor-component-text-content");n.css("width",t)}),n.find(".txt-max-width").on("change",function(){var t=this.value||"";isNaN(t)&&(t="");var n=o.getSettingComponent().find(".keditor-component-text-content");n.css("max-width",t+"px")})}})},showSettingForm:function(n,o,i){e('showSettingForm "text" component',o);var a=o.find(".keditor-component-text-content").get(0),c=a.style.backgroundImage;c=(c||"").replace(/^url\(['"]+(.+)['"]+\)$/,"$1"),n.find(".background-image-previewer").attr("src","none"!==c&&""!==c?c:"/static/images/photo_holder.png"),n.find(".select-bg-repeat").val(a.style.backgroundRepeat||"repeat"),n.find(".select-bg-position").val(a.style.backgroundPosition||"0% 0%"),n.find(".select-bg-size").val(a.style.backgroundSize||"auto");var r=n.find(".color-picker");r.colorpicker("setValue",a.style.backgroundColor||"transparent"),n.find(".txt-padding").each(function(){var n=t(this),e=n.attr("data-style-name");n.val((a.style[e]||"").replace("px",""))}),n.find(".txt-margin").each(function(){var n=t(this),e=n.attr("data-style-name");n.val((a.style[e]||"").replace("px",""))}),n.find(".txt-height").val((a.style.height||"").replace("px","")),n.find(".txt-max-height").val((a.style.maxHeight||"").replace("px","")),n.find(".txt-width").val((a.style.width||"").replace("px","")),n.find(".txt-maxWith").val((a.style.maxWidth||"").replace("px",""))}}}(jQuery);
//# sourceMappingURL=keditor-component-text-0.0.0.min.js.map
