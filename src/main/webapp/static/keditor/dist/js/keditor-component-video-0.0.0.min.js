/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(e){var t=e.keditor,o=t.log;t.components.video={init:function(t,a,r,i){o('init "video" component',r);var d=this,l=r.find("img[data-video-src]");l.attr("id",i.generateId("component-video"));var s=l.parent();s.hasClass("video-wrapper")||(l.wrap('<div class="video-wrapper"></div>'),s=l.parent()),s.attr("data-id",l.attr("id")),s.attr("data-autostart",l.attr("data-autostart")),s.attr("data-aspectratio",l.attr("data-aspectratio")),s.attr("data-video-src",l.attr("data-video-src")),s.attr("data-repeat",l.attr("data-repeat")),s.attr("data-controls",l.attr("data-controls")),e.getScriptOnce("/static/jwplayer/6.10/jwplayer.js",function(){jwplayer.key="cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=",d.buildJWVideoPlayerPreview(r)})},getContent:function(e){o('getContent "video" component, component');var t=e.find(".video-wrapper"),a='<img class="video-jw" ';return a+='       id="'+this.componentId+'" ',a+='       src="'+t.attr("data-video-src")+'/alt-640-360.png" ',a+='       data-autostart="'+t.attr("data-autostart")+'" ',a+='       data-aspectratio="'+t.attr("data-aspectratio")+'" ',a+='       data-video-src="'+t.attr("data-video-src")+'" ',a+='       data-repeat="'+t.attr("data-repeat")+'" ',a+='       data-controls="'+t.attr("data-controls")+'" />',t.html(a),e.find(".keditor-component-content").html()},settingEnabled:!0,settingTitle:"Video Settings",initSettingForm:function(e,t){o('init "video" settings',e);var a=this;e.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <div class="video-toolbar">               <a href="#" class="btn-videoFileInput btn btn-sm btn-primary btn-block"><i class="fa fa-upload"></i> Change your video</a>               <input id="videoFileInput" type="file" style="display: none">           </div>       </div>   </div>   <div class="form-group">       <label for="video-autoplay" class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="video-autoplay" />       </div>   </div>   <div class="form-group">       <label for="video-loop" class="col-sm-12">Repeat</label>       <div class="col-sm-12">           <input type="checkbox" id="video-loop" />       </div>   </div>   <div class="form-group">       <label for="video-showcontrols" class="col-sm-12">Show Controls</label>       <div class="col-sm-12">           <input type="checkbox" id="video-showcontrols" checked />       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Ratio</label>       <div class="col-sm-12">           <input type="radio" name="video-radio" class="video-ratio" value="4:3" checked /> 4:3       </div>       <div class="col-sm-12">           <input type="radio" name="video-radio" class="video-ratio" value="16:9" /> 16:9       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Enable border</label>       <div class="col-sm-12">           <input type="checkbox" class="chk-border" value="" />       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Border color</label>       <div class="col-sm-12">           <div class="input-group color-picker">               <span class="input-group-addon"><i></i></span>               <input type="text" value="" class="txt-border-color form-control" disabled />           </div>       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Border width</label>       <div class="col-sm-12">           <input type="number" class="border-width form-control" disabled />       </div>   </div>   <div class="form-group">       <label for="" class="col-sm-12">Border style</label>       <div class="col-sm-12">           <select class="form-control select-border-style selectpicker" disabled title=" - Select Border Style - ">               <option data-content="<div class=border-style-solid></div>" value="solid">Solid</option>               <option data-content="<div class=border-style-dotted></div>" value="dotted">Dotted</option>               <option data-content="<div class=border-style-dashed></div>" value="dashed">Dased</option>               <option data-content="<div class=border-style-double></div>" value="double">Double</option>           </select>       </div>   </div></form>');var r=e.find(".select-border-style");r.selectpicker().on("changed.bs.select",function(){a.borderStyle=this.value,t.getSettingComponent().find(".video-wrapper").css("border-style",this.value)});var i=e.find(".border-width");i.on("change",function(){var e=this.value;(isNaN(e)||0>e)&&(e=1,this.value=e),a.borderWidth=e,t.getSettingComponent().find(".video-wrapper").css("border-width",e)});var d=e.find(".color-picker"),l=d.find("input"),s=d.find(".input-group-addon i");d.colorpicker({format:"hex",container:d.parent(),component:".input-group-addon",align:"left",colorSelectors:{transparent:"transparent"}}).on("changeColor.colorpicker",function(e){var o=e.color.toHex();l.val()&&0!==l.val().trim().length||(o="",s.css("background-color","")),a.borderColor=o,t.getSettingComponent().find(".video-wrapper").css("border-color",o)}),e.find(".chk-border").on("click",function(){r.prop("disabled",!this.checked).selectpicker("refresh"),i.prop("disabled",!this.checked),d.colorpicker(this.checked?"enable":"disable"),this.checked||(t.getSettingComponent().find(".video-wrapper").css("border",""),r.selectpicker("val",""),i.val(""),d.colorpicker("setValue","transparent"))});var c=e.find(".btn-videoFileInput");c.mselect({contentTypes:["video"],bs3Modal:!0,pagePath:window.location.pathname.replace("contenteditor",""),onSelectFile:function(e){t.getSettingComponent().find(".video-wrapper").attr("data-video-src",e),a.refreshVideoPlayerPreview(t)}});var n=e.find("#video-autoplay");n.on("click",function(){t.getSettingComponent().find(".video-wrapper").attr("data-autostart",this.checked),a.buildJWVideoPlayerPreview(t)});var p=e.find("#video-loop");p.on("click",function(){t.getSettingComponent().find(".video-wrapper").attr("data-repeat",this.checked),a.buildJWVideoPlayerPreview(t)});var v=e.find(".video-ratio");v.on("click",function(e){this.checked&&(t.getSettingComponent().find(".video-wrapper").attr("data-aspectratio",this.value),a.buildJWVideoPlayerPreview(t))});var u=e.find("#video-showcontrols");u.on("click",function(e){t.getSettingComponent().find(".video-wrapper").attr("data-controls",this.checked),a.buildJWVideoPlayerPreview(t)})},showSettingForm:function(e,t,a){o('showSettingForm "video" component',e,t);var r=t.find(".video-wrapper"),i=r.css("border-width")||"",d="0px"!==i,l=e.find(".chk-border"),s=e.find(".border-width"),c=e.find(".color-picker"),n=e.find(".select-border-style");l.prop("checked",d),n.prop("disabled",!d).selectpicker("refresh").selectpicker("val",r.css("border-style")),s.prop("disabled",!d).val(d?i.replace("px",""):""),c.colorpicker(d?"enable":"disable").colorpicker("setValue",d?r.css("border-color"):""),e.find("#video-autoplay").prop("checked","true"===r.attr("data-autostart")),e.find("#video-loop").prop("checked","true"===r.attr("data-repeat")),e.find(".video-ratio").filter('[value="'+r.attr("data-aspectratio")+'"]').prop("checked",!0),e.find("#video-showcontrols").prop("checked","true"===r.attr("data-controls"))},buildJWVideoPlayerPreview:function(e){e.jquery||(e=e.getSettingComponent());var t=e.find(".video-wrapper"),a=t.attr("data-video-src"),r=t.attr("data-autostart"),i=t.attr("data-repeat"),d=t.attr("data-aspectratio"),l=t.attr("data-controls"),s=jwplayer(t.attr("data-id")),c=a+"/alt-640-360.png";o("buildJWPlayer",a,"aspectratio=",d),s.setup({autostart:r,repeat:i,controls:l,aspectratio:d,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",width:"100%",androidhls:!0,playlist:[{image:c,sources:[{file:a},{file:a+"/../alt-640-360.webm"},{file:a+"/../alt-640-360.m4v"}]}],primary:"flash"}),s.onReady(function(){o("jwplayer preview init done")})},refreshVideoPlayerPreview:function(e){var t=e.getSettingComponent().find(".video-wrapper"),o=jwplayer(t.attr("data-id")),a=t.attr("data-video-src");o.load([{file:a}]),o.play()}}}(jQuery);
//# sourceMappingURL=keditor-component-video-0.0.0.min.js.map
