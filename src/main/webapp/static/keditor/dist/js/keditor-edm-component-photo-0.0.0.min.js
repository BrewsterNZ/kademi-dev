/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var o=t.keditor,n=t.edmEditor,i=o.log;o.components.photo={init:function(t,o,n,e){i('init "photo" component',n);var a=this,r=n.find("img");a.adjustWidthForImg(r,r.hasClass("full-width"));var d=e.options;"function"==typeof d.onComponentReady&&d.onComponentReady.call(t,n)},settingEnabled:!0,settingTitle:"Photo Settings",initSettingForm:function(o,e){i('init "photo" settings',o);var a=this;return t.ajax({url:"/static/keditor/componentAudioSettings.html",type:"get",dataType:"HTML",success:function(t){o.html(t),o=o.find(".form-horizontal"),n.initDefaultComponentControls(o,e,{onPaddingChanged:function(t,o){if("padding-left"===t||"padding-right"===t){var n=e.getSettingComponent().find("img");a.adjustWidthForImg(n,n.hasClass("full-width"))}}});var i=o.find("#photo-link");i.on("change",function(){var t=this.value.trim(),o=new RegExp("^[a-zA-Z0-9_/%:/./-]+$"),n=i.next(),a=i.closest(".form-group");o.test(t)?(e.getSettingComponent().find("a").attr("href",t),n.hide(),a.removeClass("has-error")):(n.show(),a.addClass("has-error"))});var r=o.find("#photo-target");r.on("change",function(){e.getSettingComponent().find("a").attr("target",this.value)});var d=o.find("#photo-linkable");d.on("click",function(){var t=e.getSettingComponent().find("img");d.is(":checked")?(i.prop("disabled",!1),r.prop("disabled",!1),t.wrap('<a href="" style="text-decoration: none;"></a>'),t.css("border","0")):(i.prop("disabled",!0),r.prop("disabled",!0),t.unwrap("a"))});var s=o.find("#photo-edit");s.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:e.options.pagePath,basePath:e.options.basePath,onSelectFile:function(t,o,n,i){var r=e.getSettingComponent().find("img");r.attr("src","http://"+window.location.host+"/_hashes/files/"+i),a.adjustWidthForImg(r,!0)}});var h=o.find("#photo-alt");h.on("change",function(){e.getSettingComponent().find("img").attr("alt",this.value)});var l=o.find("#photo-fullwidth");l.on("click",function(){var t=e.getSettingComponent().find("img");t[this.checked?"addClass":"removeClass"]("full-width"),a.adjustWidthForImg(t,this.checked)})}})},showSettingForm:function(t,o,e){i('showSettingForm "photo" component',o),n.showDefaultComponentControls(t,o,e);var a=o.find("img"),r=t.find("#photo-alt");r.val(a.attr("alt")||"");var d=t.find("#photo-fullwidth");d.prop("checked",a.hasClass("full-width"));var s=t.find("#photo-link"),h=t.find("#photo-target"),l=t.find("#photo-linkable");s.next().hide(),s.closest(".form-group").removeClass("has-error");var p=a.parent("a");p.length>0?(l.prop("checked",!0),s.prop("disabled",!1).val(p.attr("href")),h.prop("disabled",!1).val(p.attr("target"))):(l.prop("checked",!1),s.prop("disabled",!0).val(""),h.prop("disabled",!0).val(""))},adjustWidthForImg:function(o,n){i("adjustWidthForImg",o,n),o.css("display","none"),t("<img />").attr("src",o.attr("src")).load(function(){var t=this.width,i=this.height,e=t/i,a=o.parent();a.is("a")&&(a=a.parent());var r=a.width();o.attr({width:n?r:t,height:n?r/e:i}),o.css("display","block")})},onWithChanged:function(t,o,n){var i=this,e=t.find("img");i.adjustWidthForImg(e,e.hasClass("full-width"))}}}(jQuery);
//# sourceMappingURL=keditor-edm-component-photo-0.0.0.min.js.map
