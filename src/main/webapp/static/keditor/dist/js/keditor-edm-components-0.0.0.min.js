/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var n=t.keditor,e=t.edmEditor,i=n.log;n.components.button={settingEnabled:!0,settingTitle:"Button Settings",initSettingForm:function(n,o){return i('init "button" settings',n),t.ajax({url:"/static/keditor/edmComponentButtonSettings.html",type:"get",dataType:"HTML",success:function(i){n.html(i),n=n.find(".form-horizontal"),e.initDefaultComponentControls(n,o);var a=n.find(".button-color-picker");e.initSimpleColorPicker(a,function(t){var n=o.getSettingComponent().find(".button-wrapper");n.attr("bgcolor",t)});var r=n.find("#button-border-radius");r.on("change",function(){e.setStyles("border-radius",this.value+"px",o.getSettingComponent().find(".button-wrapper"))}),n.find(".button-inner-padding").each(function(){var n=t(this),i=n.attr("data-css");e.initPaddingControl(n,function(t){e.setStyles(i,t+"px",o.getSettingComponent().find(".button-inner"))})});var d=n.find("#button-text");d.on("change",function(){var t=this.value||"";t=t.trim(),o.getSettingComponent().find(".button-wrapper a").text(t)});var s=n.find("#button-link");s.on("change",function(){var t=this.value||"";t=t.trim(),o.getSettingComponent().find(".button-wrapper a").attr("href",t)});var l=n.find(".button-color-text-picker");e.initSimpleColorPicker(l,function(t){var n=o.getSettingComponent().find(".button-wrapper a");e.setStyles("color",t,n)});var c=n.find("#button-font-size");c.on("change",function(){e.setStyles("font-size",(this.value>0?this.value:0)+"px",o.getSettingComponent().find(".button-wrapper .button-inner"))});var p=n.find("#button-font-family");p.on("change",function(){e.setStyles("font-family",this.value,o.getSettingComponent().find(".button-wrapper .button-inner"))}),n.find(".btn-style").each(function(){var n=t(this),e=n.attr("data-prop");n.on("click",function(t){t.preventDefault();var i=n.attr("data-value");n.hasClass("active")?(n.removeClass("active"),i=""):n.addClass("active"),o.getSettingComponent().find(".button-wrapper a").get(0).style[e]=i})});var f=n.find(".btn-align");f.each(function(){var n=t(this),e=n.attr("data-value");n.on("click",function(t){if(t.preventDefault(),!n.hasClass("active")){var i=o.getSettingComponent().find(".button-wrapper");f.removeClass("active"),n.addClass("active"),"full"===e?i.attr("width","100%").attr("align","center"):i.removeAttr("width").attr("align",e)}})})}})},showSettingForm:function(n,o,a){i('showSettingForm "button" component',o),e.showDefaultComponentControls(n,o,a);var r=o.find(".button-wrapper"),d=r.find(".button-inner"),s=d.find("a"),l=n.find(".button-color-picker");l.val(r.css("background-color")||"").trigger("update");var c=n.find("#button-border-radius"),p=r.css("border-radius");c.val(p?p.replace("px",""):""),n.find(".button-inner-padding").each(function(){var n=t(this),e=n.attr("data-css"),i=d.css(e);n.val(i?i.replace("px",""):"0")});var f=n.find("#button-text");f.val(s.text());var h=n.find("#button-link");h.val(s.attr("href"));var g=n.find(".button-color-text-picker");g.val(s.css("color")||"").trigger("update");var u=n.find("#button-font-size"),m=d.css("font-size");u.val(m?m.replace("px",""):"");var v=n.find("#button-font-family");v.val(d.css("font-family").toLowerCase().replace(/,\s/g,",").replace(/"/g,""));var C=n.find(".btn-bold"),b=s.css("font-weight");C["700"===b||"bold"===b?"addClass":"removeClass"]("active");var w=n.find(".btn-italic");w["italic"===s.css("font-style")?"addClass":"removeClass"]("active");var S=r.attr("align");"100%"===r.attr("width")&&(S="full"),n.find(".btn-align").removeClass("active").filter("[data-value="+S+"]").addClass("active")}}}(jQuery),function(t){var n=t.keditor,e=t.edmEditor,i=n.log;n.components.line={settingEnabled:!0,settingTitle:"Line Settings",initSettingForm:function(n,o){return i('init "line" settings',n),t.ajax({url:"/static/keditor/edmComponentLineSettings.html",type:"get",dataType:"HTML",success:function(t){n.html(t),n=n.find(".form-horizontal"),e.initDefaultComponentControls(n,o);var i=n.find("#line-height");i.on("change",function(){o.getSettingComponent().find(".wrapper div").css("height",this.value)});var a=n.find("#line-width");a.on("change",function(){o.getSettingComponent().find(".wrapper table").attr("width",this.value)}),n.find("[name=width]").on("click",function(){a.prop("disabled",this.value),this.value&&o.getSettingComponent().find(".wrapper table").attr("width","100%")});var r=n.find(".line-color-picker");e.initSimpleColorPicker(r,function(t){var n=o.getSettingComponent().find(".wrapper"),i=n.find("div");e.setStyles("background-color",t,i)})}})},showSettingForm:function(t,n,o){i('showSettingForm "line" component',n);var a=t.find("#line-height"),r=n.find(".wrapper div").css("height");a.val(r?r.replace("px",""):"0");var d=t.find("#line-width"),s=n.find(".wrapper table").attr("width");t.find("[name=width]")["100%"===s?"filter":"not"]('[value="line-full-width"]').trigger("click"),d.val("100%"===s?"":s?s.replace("px",""):"0"),e.showDefaultComponentControls(t,n,o);var l=n.find(".wrapper"),c=l.find("div"),p=t.find(".line-color-picker");p.val(c.css("background-color")||"").trigger("update")}}}(jQuery),function(t){var n=t.keditor,e=t.edmEditor,i=n.log;n.components.photo={init:function(t,n,e,o){i('init "photo" component',e);var a=this,r=e.find("img");a.adjustWidthForImg(r,r.hasClass("full-width"));var d=o.options;"function"==typeof d.onComponentReady&&d.onComponentReady.call(t,e)},settingEnabled:!0,settingTitle:"Photo Settings",initSettingForm:function(n,o){i('init "photo" settings',n);var a=this;return t.ajax({url:"/static/keditor/edmComponentPhotoSettings.html",type:"get",dataType:"HTML",success:function(t){n.html(t),n=n.find(".form-horizontal"),e.initDefaultComponentControls(n,o,{onPaddingChanged:function(t,n){if("padding-left"===t||"padding-right"===t){var e=o.getSettingComponent().find("img");a.adjustWidthForImg(e,e.hasClass("full-width"))}}});var i=n.find("#photo-link");i.on("change",function(){var t=this.value.trim(),n=new RegExp("^[a-zA-Z0-9_/%:/./-]+$"),e=i.next(),a=i.closest(".form-group");n.test(t)?(o.getSettingComponent().find("a").attr("href",t),e.hide(),a.removeClass("has-error")):(e.show(),a.addClass("has-error"))});var r=n.find("#photo-target");r.on("change",function(){o.getSettingComponent().find("a").attr("target",this.value)});var d=n.find("#photo-linkable");d.on("click",function(){var t=o.getSettingComponent().find("img");d.is(":checked")?(i.prop("disabled",!1),r.prop("disabled",!1),t.wrap('<a href="" style="text-decoration: none;"></a>'),t.css("border","0")):(i.prop("disabled",!0),r.prop("disabled",!0),t.unwrap("a"))});var s=n.find("#photo-edit");s.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:o.options.pagePath,basePath:o.options.basePath,onSelectFile:function(t,n,e,i){var r=o.getSettingComponent().find("img");r.attr("src","http://"+window.location.host+"/_hashes/files/"+i),a.adjustWidthForImg(r,!0)}});var l=n.find("#photo-alt");l.on("change",function(){o.getSettingComponent().find("img").attr("alt",this.value)});var c=n.find("#photo-fullwidth");c.on("click",function(){var t=o.getSettingComponent().find("img");t[this.checked?"addClass":"removeClass"]("full-width"),a.adjustWidthForImg(t,this.checked)});var p=n.find("#photo-align");p.on("change",function(){var t=o.getSettingComponent().find("img");t.attr("align",this.value),e.setStyles("margin-left","center"===this.value?"auto":"",t),e.setStyles("margin-right","center"===this.value?"auto":"",t)})}})},showSettingForm:function(t,n,o){i('showSettingForm "photo" component',n),e.showDefaultComponentControls(t,n,o);var a=n.find("img"),r=t.find("#photo-alt");r.val(a.attr("alt")||"");var d=t.find("#photo-fullwidth");d.prop("checked",a.hasClass("full-width"));var s=t.find("#photo-link"),l=t.find("#photo-target"),c=t.find("#photo-linkable"),p=t.find("#photo-align");p.val(a.attr("align")||"left"),s.next().hide(),s.closest(".form-group").removeClass("has-error");var f=a.parent("a");f.length>0?(c.prop("checked",!0),s.prop("disabled",!1).val(f.attr("href")),l.prop("disabled",!1).val(f.attr("target"))):(c.prop("checked",!1),s.prop("disabled",!0).val(""),l.prop("disabled",!0).val(""))},adjustWidthForImg:function(n,e){i("adjustWidthForImg",n,e),n.css("display","none"),t("<img />").attr("src",n.attr("src")).load(function(){var t=this.width,i=this.height,o=t/i,a=n.parent();a.is("a")&&(a=a.parent());var r=a.width();n.attr({width:e?r:t,height:e?r/o:i}),n.css("display","block")})},onWithChanged:function(t,n,e){var i=this,o=t.find("img");i.adjustWidthForImg(o,o.hasClass("full-width"))}}}(jQuery),function(t){var n=t.keditor,e=t.edmEditor,i=n.log;n.components.spacer={settingEnabled:!0,settingTitle:"Spacer Settings",initSettingForm:function(t,n){i('initSettingForm "spacer" component'),t.append('<div class="form-horizontal">    <div class="form-group">       <label for="spacer-height" class="col-sm-12">Height</label>       <div class="col-sm-12">           <input type="number" id="spacer-height" class="form-control" />       </div>    </div></div>'),t=t.find(".form-horizontal"),e.initDefaultComponentControls(t,n,{hidePadding:!0});var o=t.find("#spacer-height");o.on("change",function(){n.getSettingComponent().find(".spacer").attr("height",this.value)})},showSettingForm:function(t,n,o){i('showSettingForm "spacer" component',n);var a=t.find("#spacer-height");a.val(n.find(".spacer").attr("height")),e.showDefaultComponentControls(t,n,o)}}}(jQuery),function(t){var n=t.keditor,e=t.edmEditor,i=n.log;CKEDITOR.disableAutoInline=!0,CKEDITOR.isEDM=!0,n.components.text={init:function(n,e,o,a){i('init "text" component',o);var r=a.options,d=o.children(".keditor-component-content"),s=d.find(".text-wrapper"),l=s.html(),c=t('<div class="text-editor" contenteditable="true"></div>').attr("id",a.generateId("text-editor")).html(l);s.html(c);var p=c.ckeditor(a.options.ckeditorOptions).editor;p.on("instanceReady",function(){i("CKEditor is ready",o),"function"==typeof r.onComponentReady&&r.onComponentReady.call(a,o,p,n)}),c.on("input",function(t){"function"==typeof r.onComponentChanged&&r.onComponentChanged.call(a,t,o,n),"function"==typeof r.onContainerChanged&&r.onContainerChanged.call(a,t,e,n),"function"==typeof r.onContentChanged&&r.onContentChanged.call(a,t,n)})},getContent:function(t,n){i('getContent "text" component',t);var e=t.find(".keditor-component-content"),o=e.find(".text-wrapper"),a=e.find(".text-editor"),r=a.attr("id"),d=CKEDITOR.instances[r];return d&&o.html(d.getData()),e.html()},destroy:function(t,n){i('destroy "text" component',t);var e=t.find(".text-editor").attr("id"),o=CKEDITOR.instances[e];o&&o.destroy()},settingEnabled:!0,settingTitle:"Text Settings",initSettingForm:function(t,n){i('initSettingForm "text" component'),t.append('<div class="form-horizontal"></div>'),t=t.find(".form-horizontal"),e.initDefaultComponentControls(t,n)},showSettingForm:function(t,n,o){i('showSettingForm "text" component',n),e.showDefaultComponentControls(t,n,o)}}}(jQuery);
//# sourceMappingURL=keditor-edm-components-0.0.0.min.js.map
