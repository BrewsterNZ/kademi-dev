!function(t){var e=t.keditor,o=e.log;e.components.audio={init:function(e,n,i,a){o('init "audio" component',i),this.component=i;var s=i.find("img[data-src]");s.attr("id")?this.componentId=s.attr("id"):(this.componentId=t.keditor.generateId("component-audio"),s.attr("id",this.componentId)),this.src=s.attr("data-src"),this.width=s.attr("data-width"),this.autostart="true"===s.attr("data-autostart");var r=this;t.getScript("/static/jwplayer/6.10/jwplayer.js",function(){jwplayer.key="cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=",r.buildJWAudioPlayerPreview()})},getContent:function(t,e){o('getContent "audio" component, component');var n='<img data-componentId="'+this.componentId+'" src="/theme/apps/content/preview/audio.png" data-autostart="'+this.autostart+'" data-width="'+this.width+'" data-src="'+this.src+'" data-kaudio="'+this.src+'" />';return n},destroy:function(t,e){},settingEnabled:!0,settingTitle:"Audio settings",initSettingForm:function(t,e){o('init "audio" settings',t),t.append('<form class="form-horizontal"><div class="form-group"><label for="audioFileInput" class="col-sm-12">Audio file</label><div class="col-sm-12"><div class="audio-toolbar"><a href="#" class="btn-audioFileInput btn btn-sm btn-primary"><i class="fa fa-upload"></i></a><input id="audioFileInput" type="file" style="display: none"></div></div></div><div class="form-group"><label for="audio-autoplay" class="col-sm-12">Autoplay</label><div class="col-sm-12"><input type="checkbox" id="audio-autoplay" /></div></div><div class="form-group"><label for="audio-width" class="col-sm-12">Width (px)</label><div class="col-sm-12"><input type="number" id="audio-width" min="200" max="500" class="form-control" value="300" /></div></div></form>')},showSettingForm:function(t,e,o){var n=this,i=e.find("audio"),a=t.find(".btn-audioFileInput");a.mselect({contentTypes:["audio"],bs3Modal:!0,pagePath:window.location.pathname.replace("contenteditor",""),onSelectFile:function(t){n.src=t,n.refreshAudioPlayerPreview()}});var s=t.find("#audio-autoplay");this.autostart&&s.prop("checked",!0),s.on("click",function(t){this.checked?i.attr("autoplay","autoplay"):i.removeAttr("autoplay"),n.autostart=this.checked,n.buildJWAudioPlayerPreview()});var r=t.find("#audio-width");r.val(this.width),r.on("change",function(){n.width=this.value,n.resizeAudioPlayerPreview()})},hideSettingForm:function(t){},buildJWAudioPlayerPreview:function(){var t=this.width,e=this.src,o=this.autostart,n=jwplayer(this.componentId);n.setup({file:e,width:t,height:40,autostart:o,flashplayer:"/static/jwplayer/6.10/jwplayer.flash.swf",html5player:"/static/jwplayer/6.10/jwplayer.html5.js",primary:"flash"}),n.onReady(function(){log("jwplayer preview init done")})},refreshAudioPlayerPreview:function(){var t=this,e=jwplayer(t.componentId),o=t.src;e.load([{file:o}]),e.play()},resizeAudioPlayerPreview:function(){var t=this,e=jwplayer(t.componentId),o=t.width;e.resize(o,40)}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.googlemap={init:function(t,e,o,n){},getContent:function(t,e){o('getContent "googlemap" component',t);var n=t.children(".keditor-component-content");return n.find(".googlemap-cover").remove(),n.html()},destroy:function(t,e){},settingEnabled:!0,settingTitle:"Google Map Viewer",initSettingForm:function(n,i){o('initSettingForm "googlemap" component'),n.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary btn-googlemap-edit">Update Map</button>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-googlemap-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-googlemap-43">4:3</button>       </div>   </div></form>');var a=n.find(".btn-googlemap-edit");a.on("click",function(o){o.preventDefault();var n=prompt("Please enter Google Map embed code in here:"),i=t(n),a=i.attr("src");i.length>0&&a&&a.length>0?e.settingComponent.find(".embed-responsive-item").attr("src",a):alert("Your Google Map embed code is invalid!")});var s=n.find(".btn-googlemap-169");s.on("click",function(t){t.preventDefault(),e.settingComponent.find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9")});var r=n.find(".btn-googlemap-43");r.on("click",function(t){t.preventDefault(),e.settingComponent.find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3")})},showSettingForm:function(t,e,n){o('showSettingForm "googlemap" component',e);var i=e.find(".embed-responsive-item"),a=t.find("#googlemap-autoplay"),s=i.attr("src");a.prop("checked",-1!==s.indexOf("autoplay=1"))},hideSettingForm:function(t){}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.photo={init:function(t,e,o,n){},getContent:function(t,e){o('getContent "photo" component, component');var n=t.children(".keditor-component-content");n.find(".photo-toolbar").remove();var i=n.find("img");return i.unwrap(),n.html()},destroy:function(t,e){},settingEnabled:!0,settingTitle:"Photo",initSettingForm:function(t,o){var n=this;t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary" id="photo-edit">Change Photo</button>           <input type="file" style="display: none" />       </div>   </div>   <div class="form-group">       <label for="photo-align" class="col-sm-12">Align</label>       <div class="col-sm-12">           <select id="photo-align" class="form-control">               <option value="left">Left</option>               <option value="center">Center</option>               <option value="right">Right</option>           </select>       </div>   </div>   <div class="form-group">       <label for="photo-responsive" class="col-sm-12">Responsive</label>       <div class="col-sm-12">           <input type="checkbox" id="photo-responsive" />       </div>   </div>   <div class="form-group">       <label for="photo-width" class="col-sm-12">Width</label>       <div class="col-sm-12">           <input type="number" id="photo-width" class="form-control" />       </div>   </div>   <div class="form-group">       <label for="photo-height" class="col-sm-12">Height</label>       <div class="col-sm-12">           <input type="number" id="photo-height" class="form-control" />       </div>   </div></form>');var i=t.find("#photo-edit"),a=i.next();i.on("click",function(t){t.preventDefault(),a.trigger("click")}),a.on("change",function(){var t=this.files[0];if(/image/.test(t.type)){var n=e.settingComponent.find("img");n.attr("src",URL.createObjectURL(t)),n.css({width:"",height:""}),n.load(function(){e.showSettingPanel(e.settingComponent,o)})}else alert("Your selected file is not photo!")});var s=t.find("#photo-align");s.on("change",function(){var t=e.settingComponent.find(".photo-panel");t.css("text-align",this.value)});var r=t.find("#photo-responsive");r.on("click",function(){e.settingComponent.find("img")[this.checked?"addClass":"removeClass"]("img-responsive")});var l=t.find("#photo-width"),d=t.find("#photo-height");l.on("change",function(){var t=e.settingComponent.find("img"),o=+this.value,i=Math.round(o/n.ratio);0>=o&&(o=n.width,i=n.height,this.value=o),t.css({width:o,height:i}),d.val(i)}),d.on("change",function(){var t=e.settingComponent.find("img"),o=+this.value,i=Math.round(o*n.ratio);0>=o&&(i=n.width,o=n.height,this.value=o),t.css({height:o,width:i}),l.val(i)})},showSettingForm:function(e,o,n){var i=this,a=e.find("#photo-align"),s=e.find("#photo-responsive"),r=e.find("#photo-width"),l=e.find("#photo-height"),d=o.find(".photo-panel"),c=d.find("img"),p=d.css("text-align");"right"===p&&"center"===p||(p="left"),a.val(p),s.prop("checked",c.hasClass("img-responsive")),r.val(c.width()),l.val(c.height()),t("<img />").attr("src",c.attr("src")).load(function(){i.ratio=this.width/this.height,i.width=this.width,i.height=this.height})},hideSettingForm:function(t){}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.text={options:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"editing",groups:["find","selection","spellchecker","editing"]},{name:"forms",groups:["forms"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},"/",{name:"clipboard",groups:["clipboard","undo"]},{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"tools",groups:["tools"]},{name:"others",groups:["others"]}],title:!1,allowedContent:!0,bodyId:"editor",templates_replaceContent:!1,enterMode:"P",forceEnterMode:!0,format_tags:"p;h1;h2;h3;h4;h5;h6",removePlugins:"table,magicline,tabletools",removeButtons:"Save,NewPage,Preview,Print,Templates,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Form,HiddenField,ImageButton,Button,Select,Textarea,TextField,Radio,Checkbox,Outdent,Indent,Blockquote,CreateDiv,Language,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,BGColor,Maximize,About,ShowBlocks,BidiLtr,BidiRtl,Flash,Image,Subscript,Superscript,Anchor",minimumChangeMilliseconds:100},init:function(t,e,n,i){o('init "text" component',n);var a=this,s=n.children(".keditor-component-content");s.prop("contenteditable",!0),s.on("input",function(o){"function"==typeof i.onComponentChanged&&i.onComponentChanged.call(t,o,n),"function"==typeof i.onContainerChanged&&i.onContainerChanged.call(t,o,e),"function"==typeof i.onContentChanged&&i.onContentChanged.call(t,o)});var r=s.ckeditor(a.options).editor;r.on("instanceReady",function(){o("CKEditor is ready",n),"function"==typeof i.onComponentReady&&i.onComponentReady.call(t,n,r)})},getContent:function(t,e){o('getContent "text" component',t);var n=t.find(".keditor-component-content"),i=n.attr("id"),a=CKEDITOR.instances[i];return a?a.getData():n.html()},destroy:function(t,e){o('destroy "text" component',t);var n=t.find(".keditor-component-content").attr("id"),i=CKEDITOR.instances[n];i&&i.destroy()}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.video={init:function(t,e,n,i){o('init "video" component',n)},getContent:function(t,e){o('getContent "video" component, component');var n=t.children(".keditor-component-content"),i=n.find("video");return i.unwrap(),n.html()},destroy:function(t,e){},settingEnabled:!0,settingTitle:"Video settings",initSettingForm:function(t,e){o('init "video" settings',t);t.append('<form class="form-horizontal"><div class="form-group"><label for="videoFileInput" class="col-sm-12">Video file</label><div class="col-sm-12"><div class="video-toolbar"><a href="#" class="btn-videoFileInput btn btn-sm btn-primary"><i class="fa fa-upload"></i></a><input id="videoFileInput" type="file" style="display: none"></div></div></div><div class="form-group"><label for="video-autoplay" class="col-sm-12">Autoplay</label><div class="col-sm-12"><input type="checkbox" id="video-autoplay" /></div></div><div class="form-group"><label for="video-loop" class="col-sm-12">Loop</label><div class="col-sm-12"><input type="checkbox" id="video-loop" /></div></div><div class="form-group"><label for="video-showcontrols" class="col-sm-12">Show Controls</label><div class="col-sm-12"><input type="checkbox" id="video-showcontrols" checked /></div></div><div class="form-group"><label for="" class="col-sm-12">Ratio</label><div class="col-sm-12"><input type="radio" name="video-radio" class="video-ratio" value="4/3" checked /> 4:3</div><div class="col-sm-12"><input type="radio" name="video-radio" class="video-ratio" value="16/9" /> 16:9</div></div><div class="form-group"><label for="video-width" class="col-sm-12">Width (px)</label><div class="col-sm-12"><input type="number" id="video-width" min="320" max="1920" class="form-control" value="320" /></div></div></form>')},showSettingForm:function(t,o,n){var i=o.find("video"),a=t.find("#videoFileInput"),s=t.find(".btn-videoFileInput");s.on("click",function(t){t.preventDefault(),a.trigger("click")}),a.on("change",function(){var t=this.files[0];/video/.test(t.type)?(i.attr("src",URL.createObjectURL(t)),i.load(function(){e.showSettingPanel(o,n)})):alert("Your selected file is not an video file!")});var r=t.find("#video-autoplay");r.on("click",function(t){this.checked?i.prop("autoplay",!0):i.removeProp("autoplay")});var l=t.find("#video-loop");l.on("click",function(t){this.checked?i.prop("loop",!0):i.removeProp("loop")});var d=t.find(".video-ratio");d.on("click",function(t){if(this.checked){var e=i.css("width")||i.prop("width");e=e.replace("px","");var o="16/9"===this.value?16/9:4/3,n=e/o;i.css("width",e+"px"),i.css("height",n+"px"),i.removeProp("width"),i.removeProp("height")}});var c=t.find("#video-showcontrols");c.on("click",function(t){this.checked?i.attr("controls","controls"):i.removeAttr("controls")});var p=t.find("#video-width");p.on("change",function(){i.css("width",this.value+"px");var e="16/9"===t.find(".video-ratio:checked").val()?16/9:4/3,o=this.value/e;i.css("height",o+"px"),i.removeProp("width"),i.removeProp("height")})},hideSettingForm:function(t){}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.vimeo={init:function(t,e,o,n){},getContent:function(t,e){o('getContent "vimeo" component',t);var n=t.children(".keditor-component-content");return n.find(".vimeo-cover").remove(),n.html()},destroy:function(t,e){},settingEnabled:!0,settingTitle:"Vimeo Player",initSettingForm:function(t,n){o('initSettingForm "vimeo" component'),t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary btn-vimeo-edit">Change Video</button>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="vimeo-autoplay" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-vimeo-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-vimeo-43">4:3</button>       </div>   </div></form>');var i=t.find(".btn-vimeo-edit");i.on("click",function(t){t.preventDefault();var o=prompt("Please enter Vimeo URL in here:"),n=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,i=o.match(n);i&&i[1]?e.settingComponent.find(".embed-responsive-item").attr("src","https://player.vimeo.com/video/"+i[1]+"?byline=0&portrait=0&badge=0"):alert("Your Vimeo URL is invalid!")});var a=t.find(".btn-vimeo-169");a.on("click",function(t){t.preventDefault(),e.settingComponent.find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9")});var s=t.find(".btn-vimeo-43");s.on("click",function(t){t.preventDefault(),e.settingComponent.find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3")});var r=t.find("#vimeo-autoplay");r.on("click",function(){var t=e.settingComponent.find(".embed-responsive-item"),n=t.attr("src"),i=n.replace(/(\?.+)+/,"")+"?byline=0&portrait=0&badge=0&autoplay="+(r.is(":checked")?1:0);o("Current url: "+n,"New url: "+i),t.attr("src",i)})},showSettingForm:function(t,e,n){o('showSettingForm "vimeo" component',e);var i=e.find(".embed-responsive-item"),a=t.find("#vimeo-autoplay"),s=i.attr("src");a.prop("checked",-1!==s.indexOf("autoplay=1"))},hideSettingForm:function(t){}}}(jQuery),function(t){var e=t.keditor,o=e.log;e.components.youtube={init:function(t,e,o,n){},getContent:function(t,e){o('getContent "youtube" component',t);var n=t.children(".keditor-component-content");return n.find(".youtube-cover").remove(),n.html()},destroy:function(t,e){},settingEnabled:!0,settingTitle:"Youtube Player",initSettingForm:function(t,n){o('initSettingForm "youtube" component'),t.append('<form class="form-horizontal">   <div class="form-group">       <div class="col-sm-12">           <button type="button" class="btn btn-block btn-primary btn-youtube-edit">Change Video</button>       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Autoplay</label>       <div class="col-sm-12">           <input type="checkbox" id="youtube-autoplay" />       </div>   </div>   <div class="form-group">       <label class="col-sm-12">Aspect Ratio</label>       <div class="col-sm-12">           <button type="button" class="btn btn-sm btn-default btn-youtube-169">16:9</button>           <button type="button" class="btn btn-sm btn-default btn-youtube-43">4:3</button>       </div>   </div></form>');var i=t.find(".btn-youtube-edit");i.on("click",function(t){t.preventDefault();var o=prompt("Please enter Youtube URL in here:"),n=/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"'>]+)/,i=o.match(n);i&&i[1]?e.settingComponent.find(".embed-responsive-item").attr("src","https://www.youtube.com/embed/"+i[1]):alert("Your Youtube URL is invalid!")});var a=t.find(".btn-youtube-169");a.on("click",function(t){t.preventDefault(),e.settingComponent.find(".embed-responsive").removeClass("embed-responsive-4by3").addClass("embed-responsive-16by9")});var s=t.find(".btn-youtube-43");s.on("click",function(t){t.preventDefault(),e.settingComponent.find(".embed-responsive").removeClass("embed-responsive-16by9").addClass("embed-responsive-4by3")});var r=t.find("#youtube-autoplay");r.on("click",function(){var t=e.settingComponent.find(".embed-responsive-item"),n=t.attr("src"),i=n.replace(/(\?.+)+/,"")+"?autoplay="+(r.is(":checked")?1:0);o("Current url: "+n,"New url: "+i),t.attr("src",i)})},showSettingForm:function(t,e,n){o('showSettingForm "youtube" component',e);var i=e.find(".embed-responsive-item"),a=t.find("#youtube-autoplay"),s=i.attr("src");a.prop("checked",-1!==s.indexOf("autoplay=1"))},hideSettingForm:function(t){}}}(jQuery);
//# sourceMappingURL=keditor-components-1.1.0.min.js.map
