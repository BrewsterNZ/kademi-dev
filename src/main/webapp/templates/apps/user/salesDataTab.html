#foreach($entry in $dataSeries.recordsMap.entrySet())
<h3>$entry.key</h3>
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>From</th>
            <th>To</th>
            <th>Amount</th>
            #if ($dataSeries.usersSeries.get($entry.key).fieldset.pairsOrdered)
            #foreach ($field in $dataSeries.usersSeries.get($entry.key).fieldset.pairsOrdered)
            <th>$field.name</th>
            #end
            #end
        </tr>
    </thead>
	<tbody>
    	#foreach($record in $entry.value)
		<tr>
    		<td>$formatter.formatDate($record.periodFrom, $page.organisation.timezone)</td>
    		<td>$formatter.formatDate($record.periodTo, $page.organisation.timezone)</td>
    		<td>$record.amount</td>
            #if ($dataSeries.userSeries.get($entry.key).fieldset.pairsOrdered)
	            #foreach ($field in $dataSeries.usersSeries.get($entry.key).fieldset.pairsOrdered)
		    		<td>$!record.fields.get($field.name)</td>
	            #end
            #end
		</tr>
		#end
	</tbody>
</table>
#end