<html xmlns="http://www.w3.org/1999/xhtml">    <head>        <title>Manage Product Images</title>        <link rel="stylesheet" href="/static/dropzone/4.3.0/downloads/css/dropzone.css" />    </head>    <body class="">        <div class="row">            <div class="col-md-12">                <div class="alert alert-info">                    <p>                        <i class="fa fa-info-circle"></i>                        Please upload image files with the same name as the product code you want them attached to, with an extension. For example, to upload an image to product with SKU                        <b>ABC-123</b> you could upload a file called <b>"ABC-123.png"</b>.                    </p>                    <p>                        Allowable formats:                        <ul>                            #foreach( $patternDesc in $page.patternDescriptions )                            <li>Matches on $patternDesc</li>                            #end                        </ul>                    </p>                </div>                               <div class="well">                    <form action="${page.href}_DAV/PUT?overwrite=true" class="dropzone dropzone-fullwidth" id="uploadFileDropzone"></form>                </div>                <div class="alert-wrapper"></div>                                <div class="alert alert-info">                    <form action="$page.href" method="POST" id="form-delete-all">                        <input type="hidden" name="delete-all"/>                        <p>This will permanently delete all images attached to products in this account. This cannot be undone!</p>                                                <button class="btn btn-danger btn-lg">                            <i class="fa fa-exclamation-triangle"></i>                            Delete all images                        </button>                    </form>                                    </div>                                            </div>        </div>        <script src="/static/dropzone/4.3.0/downloads/dropzone.min.js"></script>        <script type="text/javascript">            $(function () {                $("#form-delete-all").forms({                    validate : function() {                        return confirm("Are you sure you want to delete all product images?");                    },                    onSuccess : function(resp) {                        if( resp.status ) {                            Msg.info("Deleted ok, refreshing the page..");                            window.location.reload();                        } else {                            Msg.error("Sorry, there was a problem removing images " + resp.messages);                        }                    }                });                Dropzone.autoDiscover = false;                $('.dropzone').dropzone({                    paramName: 'file', // The name that will be used to transfer the file                    maxFilesize: 500.0, // MB                    maxFiles : 100, // browser becomes unuseable for large numbers of files                    addRemoveLinks: true,                    parallelUploads: 1,                    uploadMultiple: false                });                var dz = Dropzone.forElement('#uploadFileDropzone');                dz.on('success', function (file, response) {                    var resp = JSON.parse(response);                    flog('Upload success!', file, resp);                    if (resp.error) {                        flog();                        var ref = file.previewElement.querySelectorAll('[data-dz-errormessage]');                        var results = [];                        for (var i = 0; i < ref.length; i++) {                            var node = ref[i];                            var errorMsg = resp.error.replace('Bad Request:', '').trim();                            results.push(node.textContent = errorMsg);                            showDropZoneError(errorMsg);                        }                        file.previewElement.classList.add('dz-error');                        return results;                    } else {                        reloadImageList();                    }                });                dz.on('error', function (file, errorMessage) {                    showDropZoneError('An error occured uploading: ' + file.name + ' because: ' + errorMessage);                });            });            function showDropZoneError(message) {                $('.alert-wrapper').append(                        '<p class="alert alert-danger"><button class="close" type="button" data-dismiss="alert">&times;</button><i class="fa fa-warning"></i> ' + message + '</p>'                        );            }            function reloadImageList() {                $("#productsList").reloadFragment();            }        </script>    </body></html>