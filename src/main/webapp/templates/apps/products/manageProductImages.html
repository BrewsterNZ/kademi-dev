<html xmlns="http://www.w3.org/1999/xhtml">    <head>        <title>Manage Product Images</title>        <link rel="stylesheet" href="/theme/assets/plugins/dropzone/downloads/css/dropzone.css" />    </head>    <body class="">        <div class="row">            <div class="col-md-6">                <div class="panel panel-default">                    <div id="productsList" class="panel-body">                        <div class="row">                            #foreach($product in $page.find("/products").children.ofType.product)                            <div class="col-xs-6 col-md-3">                                #if( $product.imageHrefs.size() > 0 )                                <div class="thumbnail">                                    <img src='$product.imageHrefs.get(0)' />                                    <div class="caption">                                        <h3>$product.name</h3>                                    </div>                                </div>                                #end                            </div>                            #end                        </div>                    </div>                </div>            </div>            <div class="col-md-6">                <p class="alert alert-info"><i class="fa fa-info-circle"></i>                    Please upload image files with the same name as the product code you want them attached to, with an extension. For example, to upload an image to product with SKU                    <b>ABC-123</b> you could upload a file called <b>"ABC-123.png"</b>.                </p>                <div class="well">                    <form action="${page.href}_DAV/PUT?overwrite=true" class="dropzone dropzone-fullwidth" id="uploadFileDropzone"></form>                </div>                <div class="alert-wrapper"></div>            </div>        </div>        <script src="/theme/assets/plugins/dropzone/downloads/dropzone.min.js"></script>        <script type="text/javascript">            $(function () {                Dropzone.autoDiscover = false;                $('.dropzone').dropzone({                    paramName: 'file', // The name that will be used to transfer the file                    maxFilesize: 500.0, // MB                    addRemoveLinks: true,                    parallelUploads: 1,                    uploadMultiple: false                });                var dz = Dropzone.forElement('#uploadFileDropzone');                dz.on('success', function (file, response) {                    var resp = JSON.parse(response);                    flog('Upload success!', file, resp);                    if (resp.error) {                        flog();                        var ref = file.previewElement.querySelectorAll('[data-dz-errormessage]');                        var results = [];                        for (var i = 0; i < ref.length; i++) {                            var node = ref[i];                            var errorMsg = resp.error.replace('Bad Request:', '').trim();                            results.push(node.textContent = errorMsg);                            showDropZoneError(errorMsg);                        }                        file.previewElement.classList.add('dz-error');                        return results;                    } else {                        reloadImageList();                    }                });                dz.on('error', function (file, errorMessage) {                    showDropZoneError('An error occured uploading: ' + file.name + ' because: ' + errorMessage);                });            });            function showDropZoneError(message) {                $('.alert-wrapper').append(                    '<p class="alert alert-danger"><button class="close" type="button" data-dismiss="alert">&times;</button><i class="fa fa-warning"></i> ' + message + '</p>'                );            }                        function reloadImageList() {                $("#productsList").reloadFragment();            }        </script>    </body></html>