<html xmlns="http://www.w3.org/1999/xhtml">    <head>        <title>Manage Products</title>    </head>    <body class="">        <div class="well">Please update the product details below</div>        #portlets("beforeManageProductDetails")        <div class="panel-body">            <form action="." method="POST" enctype="multipart/form-data" class="updateProduct form-horizontal" role="form">                <input type="hidden" name="action" value="update"/>                <div class="form-group">                    <div class="errorHandler alert alert-danger no-display pageMessage">.</div>                </div>                <div class="form-group">                    <label class="col-sm-2 control-label" for="name">Name/Code</label>                    <div class="col-sm-9">                        <input type="text" class="form-control required simpleChars" id="productName" name="name" value="$page.product.name" />                    </div>                </div>                <div class="form-group">                    <label class="col-sm-2 control-label" for="title">Title</label>                    <div class="col-sm-9">                        <input type="text" class="form-control required" name="title" value="$page.product.title"/>                    </div>                </div>                <div class="form-group">                    <label class="col-sm-2 control-label" for="baseCost">Base Cost</label>                    <div class="col-sm-9">                        <input type="text" class="form-control" name="baseCost" value="$!page.product.baseCost"/>                    </div>                </div>                <div class="form-group">                    <label class="col-sm-2 control-label" for="baseCost">Freight Cost</label>                    <div class="col-sm-9">                        <input type="text" class="form-control" name="freightCost" value="$!page.product.freightCost"/>                    </div>                </div>                <div class="form-group">                    <label class="col-sm-2 control-label" for="canOrderChk">Allow Ordering?</label>                    <div class="col-sm-9">                        <div class="checkbox">                            <label>                                $formatter.checkbox("canOrderChk", "canOrder", $page.product.canOrder)                                If ticked users will be given ordering options                            </label>                        </div>                    </div>                </div>                <div class="ordering">                    <h4 class="title">Order Form</h4>                    <hr />                    <div class="form-group">                        <label class="col-sm-2 control-label" for="orderForm">Order Form</label>                        <div class="col-sm-9">                            <textarea class="form-control" name="orderForm">$!{page.orderFormHtml}</textarea>                            <i>Enter the form html above</i>                        </div>                    </div>                    <div class="form-group">                        <label class="col-sm-2 control-label" for="orderColumns">CSV Columns</label>                        <div class="col-sm-9">                            <input type="text" name="orderColumns" id="orderColumns" class="form-control" value="$!page.product.orderColumns"/>                        </div>                    </div>                    <div class="form-group">                        <label class="col-sm-2 control-label" for="canOrderQuantityChk">Quantity?</label>                        <div class="col-sm-9">                            <div class="checkbox">                                <label>                                    $formatter.checkbox("canOrderQuantityChk", "canOrderQuantity", $page.product.canOrderQuantity)                                    If ticked users will be prompted for a quantity when ordering                                </label>                            </div>                        </div>                    </div>                </div>                <div class="form-group">                    <label class="col-sm-2 control-label" for="notes">Product Details</label>                    <div class="col-sm-9">                        <textarea id="notes" name="notes" class="htmleditor" cols="100" rows="5">$!page.product.notes</textarea>                        #portlets("insideManageProductDetails")                    </div>                </div>                <div class="form-group">                    <div class="col-sm-offset-2 col-sm-9">                        <button type="submit" class="btn btn-sm btn-primary">Save</button>                    </div>                </div>            </form>        </div>        <hr/>        <div class="panel panel-default">            <div class="panel-heading">                <i class="clip-pictures"></i>Product images            </div>            <div class="panel-body profile-photo">                <div class="clearfix">                    <div>                        <button id="btn-change-ava" class="btn btn-success">Add image</button>                    </div>                </div>            </div>            #foreach($href in $page.imageHrefs)            <a href="$href" target="_blank"><img src="$href/alt-150-150.png"/></a>            #end        </div>        <hr/>        #portlets("afterManageProductDetails")                <script type="text/javascript" src="/static/bootstrap-upcrop-image/1.0/bootstrap-upcrop-image.js">//</script>        <script type="text/javascript" src="/static/js/jquery.milton-upload.js"></script>        <script type="text/javascript">            $(function () {                jQuery("form.updateProduct").forms({                    callback: function () {                        Msg.success("Successfully updated product!");                    }                });                initHtmlEditors();                toggleOrderInfo();                $("#canOrderChk").change(function (event) {                    toggleOrderInfo();                });                $('#btn-change-ava').upcropImage({                    buttonContinueText: 'Save',                    url: window.location.pathname, // this is actually the default value anyway                    onCropComplete: function(resp) {                        flog("onCropComplete:", resp, resp.nextHref);                        $(".profile-photo img").attr("src", resp.nextHref);                    },                    onContinue: function (resp) {                        flog("onContinue:", resp, resp.result.nextHref);                        $.ajax({                            url: window.location.pathname,                            type: 'POST',                            dataType: 'json',                            data: {                                uploadedHref: resp.result.nextHref,                                applyImage: true                            },                            success: function(resp) {                                if( resp.status ) {                                    $(".profile-photo img").attr("src", resp.nextHref);                                } else {                                    alert("Sorry, an error occured updating your profile image");                                }                            },                            error: function() {                                alert('Sorry, we couldn\'t save your profile image.');                            }                        });                    }                });            });            function toggleOrderInfo() {                var chk = $("#canOrderChk:checked");                if (chk.length > 0) {                    $(".ordering").show();                } else {                    $(".ordering").hide();                }            }        </script>            </body></html>