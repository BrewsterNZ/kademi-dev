#set( $relations = $asset.getRelations($fieldDef.name) )

#if( $fieldDef.allowMany )
    #foreach($relation in $relations)
        #set( $asset = $services.assetManager.find($relation.objectId) )
        #renderFieldInput($asset $fieldDef)
    #end
#else
    #set( $relation = $relations[0] )
    #set( $asset = $services.assetManager.find($relation.objectId) )
    #renderFieldInput($asset $fieldDef)
#end

#macro (renderFieldInput $asset $fieldDef)
    <div class="relation-field-wrapper">
        #if ($fieldDef.contentType == "image")
            <p class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" checked="checked" /></label>
                <input type="text" name="$fieldDef.name" class="form-control select-asset select-asset-$fieldDef.contentType" placeholder="Type to search" value="$!asset.uniqueId" data-asset-name="$!asset.name" />
            </p>
            <div class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" /></label>
                <input type="hidden" name="$fieldDef.name" value="" disabled="disabled" class="relation-field-input" />
                <input type="text" class="form-control relation-field-placeholder" readonly="readonly" value="" disabled="disabled" placeholder="Upload new image file" />
                <span class="input-group-btn"><button type="button" disabled="disabled" class="btn btn-success btn-upload-image btn-upload-file">Upload</button></span>
            </div>
        #elseif ($fieldDef.contentType == "video")
            <p class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" checked="checked" /></label>
                <input type="text" name="$fieldDef.name" class="form-control select-asset select-asset-$fieldDef.contentType" placeholder="Type to search" value="$!asset.uniqueId" data-asset-name="$!asset.name" />
            </p>
            <div class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" /></label>
                <input type="hidden" name="$fieldDef.name" value="" disabled="disabled" class="relation-field-input" />
                <input type="text" class="form-control relation-field-placeholder" readonly="readonly" value="" disabled="disabled" placeholder="Upload new video file" />
                <span class="input-group-btn"><button type="button" disabled="disabled" class="btn btn-success btn-upload-video btn-upload-file">Upload</button></span>
            </div>
        #elseif ($fieldDef.contentType == "binary")
            <p class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" checked="checked" /></label>
                <input type="text" name="$fieldDef.name" class="form-control select-asset select-asset-$fieldDef.contentType" placeholder="Type to search" value="$!asset.uniqueId" data-asset-name="$!asset.name" />
            </p>
            <div class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" /></label>
                <input type="hidden" name="$fieldDef.name" value="" disabled="disabled" class="relation-field-input" />
                <input type="text" class="form-control relation-field-placeholder" readonly="readonly" value="" disabled="disabled" placeholder="Upload new binary file" />
                <span class="input-group-btn"><button type="button" disabled="disabled" class="btn btn-success btn-upload-binary btn-upload-file">Upload</button></span>
            </div>
        #elseif ($fieldDef.contentType == "text")
            <p class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" checked="checked" /></label>
                <input type="text" name="$fieldDef.name" class="form-control select-asset select-asset-$fieldDef.contentType" placeholder="Type to search" value="$!asset.uniqueId" data-asset-name="$!asset.name" />
            </p>
            <div class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" /></label>
                <button type="button" disabled="disabled" class="btn btn-block btn-success btn-edit-text">Edit text</button>
            </div>
        #else
            <p class="input-group input-group-sm">
                <label class="input-group-addon"><input type="radio" name="${fieldDef.name}-switcher" class="relation-field-switcher" checked="checked" /></label>
                <input type="text" name="$fieldDef.name" class="form-control select-asset select-asset-$fieldDef.contentType" placeholder="Type to search" value="$!asset.uniqueId" data-asset-name="$!asset.name" />
            </p>
        #end
    </div>
#end