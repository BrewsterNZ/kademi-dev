<html>    <head>        <title>Organisations map</title>    </head>    <body class="viewOrg">        <p class="input-group search-user input-group-sm">            <input type="text" id="addressSearch" class="form-control" placeholder="Search for organisations by address here" value="" />            <span class="input-group-btn">                <button class="btn btn-sm btn-default" type="button" data-type="clearer" data-target="#addressSearch">                    <i class="fa fa-times"></i>                </button>            </span>        </p>        <div id="map" style="width: 100%; height: 300px"></div>        <script type="text/javascript">            $(function () {                initMap();                $('#addressSearch').keyup(function () {                    typewatch(function () {                        search();                    }, 500);                });            });            function initMap() {                var orgLoc = {lat: -33.867, lng: 151.195};                map = new google.maps.Map(document.getElementById('map'), {                    center: orgLoc,                    zoom: 15                });            }            function search() {                var service = new google.maps.places.PlacesService(map);                var q = $("#addressSearch").val();                flog("search", q);                service.textSearch({                    query: q                }, callback);            }            function callback(results, status) {                flog("callback", results, status);                if (status === google.maps.places.PlacesServiceStatus.OK) {                    var first = results[0];                    firstLoc = first.geometry.location;                    flog("callback, set center", firstLoc);                    map.setCenter(firstLoc);                    createMarker(firstLoc);                }            }            function createMarker(loc) {                var marker = new google.maps.Marker({                    map: map,                    position: loc                });                google.maps.event.addListener(marker, 'click', function () {                    flog("clicked", marker.getPosition());                    var pos = marker.getPosition();                    map.setCenter(marker.getPosition());                    $("input[name=lat]").val(pos.lat);                    $("input[name=lng]").val(pos.lng);                    orgLat = Number($("input[name=lat]").val());                    orgLng = Number($("input[name=lng]").val());                });            }        </script>        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDS53FPtVGJPvZvrzh2sLcfPUQYS3gsh0c&libraries=places&callback=initMap" async defer></script>    </body></html>