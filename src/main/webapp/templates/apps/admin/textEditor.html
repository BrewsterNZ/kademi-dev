<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Text editor</title>
        <script type="text/javascript" src="/static/ace/1.2.0/src-noconflict/ace.js">//</script>
        <script type="text/javascript" src="/static/js/keymap.js">//</script>
        <script type="text/javascript" src="/static/jquery.fullscreen/jquery.fullscreen-0.4.1.min.js">//</script>
        <script type="text/javascript" src="textEditor.js">//</script>
        <link rel="stylesheet" type="text/css" href="textEditor.css" />
        <link rel="template" href="editorBase" />
        <style type="text/css" media="screen">
            #editor {
                position: absolute;
                top: 60px;
                right: 0;
                bottom: 10px;
                left: 0;
            }
        </style>
    </head>
    <body class="">
        #set($fname = $params.fileName)
        #set($file = $folder.child($fname))

        <div id="editor-wrapper">
            <div class="clearfix editor-toolbar">
                <div class="btn-toolbar pull-right" role="toolbar">
                    <div class="btn-group">
                        <a class="btn btn-success btn-save-file" href="$fname">Save file</a>
                        <a class="btn btn-default" href="./#files-tab">Cancel</a>
                    </div>
                    <div class="btn-group">
                        <a class="btn btn-warning btn-fullscreen" href="#" title="Enter fullscreen mode"><i class="clip-fullscreen"></i></a>
                    </div>
                </div>
                <h3 class="pull-left">$fname</h3>
            </div>
            <div id="editor" class="hide">#if($file.textContent)
                $formatter.htmlEncode($file.textContent)
                #else
                $formatter.htmlEncode($request.params.content)
                #end
            </div>
        </div>

        <script type="text/javascript">
            $(function () {
                initTextEditor('$fname');
            });
            window.onbeforeunload = function (e) {
                e.returnValue = "Are you sure you would like to leave the editor? You will lose any unsaved changes";
            }
        </script>
    </body>
</html>