<html>    <head>        <title>Backup and Restore</title>        <link rel="stylesheet" href="/static/dropzone/4.3.0/downloads/css/dropzone.css" />        <link href="/static/jquery-tree/jquery.tree.min.css" rel="stylesheet" type="text/css" />        <style>            .loader {                display: none;                width: 100%;                height: 500px;                z-index: 9999;                background: url('/templates/ajax-loader.gif') 50% 50% no-repeat rgb(249, 249, 249);            }            .icon {                width: 60px;                text-align: center;            }            .icon i {                font-size: 30px;            }            .btn-file {                position: relative;                overflow: hidden;            }            .btn-file input[type=file] {                position: absolute;                top: 0;                right: 0;                min-width: 100%;                min-height: 100%;                font-size: 100px;                text-align: right;                filter: alpha(opacity=0);                opacity: 0;                background: red;                cursor: inherit;                display: block;            }            .file-input {                background-color: white !important;                cursor: text !important;            }        </style>    </head>    <body class="">        <h1>Backup and Restore</h1>        <form class="form-horizontal" id="options">            <div class="row">                #foreach($appOptions in $page.options.entrySet())                <div class="col-md-12">                    <!-- <label>$appOptions.key</label> -->                    <div class="checkbox">                        #foreach($a in $appOptions.value.entrySet())                        <label class="checkbox-inline">                            <input type="checkbox" class="option" name="option_$a.value" value="true" checked="checked"> $a.key                        </label>                        #end                    </div>                </div>                #end            </div>        </form>        <div class="row">            <div class="col-md-6">                <div class="backgroundTask" id="backupBackgroundTask" style="display: none" data-task-href="/tasks/adminBackupFileProcessable"></div>                #[[<script type="text/html" class="backgroundTaskTemplate">                    {{#if data}}                    <div class="panel-body">                        <div class="form-horizontal">                            <div class="form-group">                                <label class="control-label col-md-2"><b>Started at</b></label>                                <div class="col-md-9">                                    <div class="form-control-static"><abbr class="timeago" title="{{formatISODate data.statusInfo.createdDate}}">{{formatDate data.statusInfo.createdDate}}</abbr></div>                                </div>                            </div>                            <div class="form-group">                                <label class="control-label col-md-2"><b>Status</b></label>                                <div class="col-md-9">                                    <div class="form-control-static">                                        {{#if data.statusInfo.complete}}                                        <span class="label label-success">Completed</span>                                        {{else}}                                        {{#if data.status}}                                        <span class="label label-info">{{data.status}}</span>                                        {{else}}                                        <span class="label label-default">N/A</span>                                        {{/if}}                                        {{/if}}                                    </div>                                </div>                            </div>                            {{#if data.statusInfo.complete}}                            <div class="form-group">                                <label class="control-label col-md-2"><b>Completed at</b></label>                                <div class="col-md-9">                                    <div class="form-control-static"><abbr class="timeago" title="{{formatISODate data.statusInfo.completedDate}}">{{formatDate data.statusInfo.completedDate}}</abbr></div>                                </div>                            </div>                            {{/if}}                        </div>                    </div>                                    {{#if data.statusInfo.complete}}                    {{else}}                    <div class="panel-footer">                        <div class="progress" style="margin-bottom: 0;">                            <div class="progress-bar progress-bar-warning progress-bar-striped active" style="width: 100%;"></div>                        </div>                    </div>                    {{/if}}                </div>                {{/if}}            </script>]]#            <div class="panel panel-default">                <div class="panel-heading">                    <i class="fa fa-download"></i>  Backup records                </div>                <div class="panel-body">                    <button id="downloadBtn" class="btn btn-md btn-success">                        Start backup                    </button>                </div>                <table id="backup-records-table" class="table table-hover table-striped">                    <thead>                        <tr>                            <th>Name</th>                            <th>Completed</th>                            <th>Started By</th>                            <th>Download</th>                        </tr>                    </thead>                    <tbody>                        #if($page.backupRecords.size() > 0)                        #foreach($b in $page.backupRecords)                        <tr>                            <td>$b.fileName</td>                            <td>$formatter.formatDateTime($b.completedDate)</td>                            <td>$b.createdBy.formattedName</td>                            <td>                                <a class="btn btn-sm btn-success" href="$b.fileName" download="$b.fileName"><i class="fa fa-download"></i> Download</a>                            </td>                        </tr>                        #end                        #else                        <tr>                            <td colspan="4" class="text-center">No Backups</td>                        </tr>                        #end                    </tbody>                </table>            </div>        </div>        <div class="col-md-6">            <div class="backgroundTask" id="restoreBackgroundTask" style="display: none" data-task-href="/tasks/adminRestoreFileProcessable"></div>            #[[<script type="text/html" class="backgroundTaskTemplate">                {{#if data}}                <div class="panel-body">                    <div class="form-horizontal">                        <div class="form-group">                            <label class="control-label col-md-2"><b>Started at</b></label>                            <div class="col-md-9">                                <div class="form-control-static"><abbr class="timeago" title="{{formatISODate data.statusInfo.createdDate}}">{{formatDate data.statusInfo.createdDate}}</abbr></div>                            </div>                        </div>                        <div class="form-group">                            <label class="control-label col-md-2"><b>Status</b></label>                            <div class="col-md-9">                                <div class="form-control-static">                                    {{#if data.statusInfo.complete}}                                    <span class="label label-success">Completed</span>                                    {{else}}                                    {{#if data.status}}                                    <span class="label label-info">{{data.status}}</span>                                    {{else}}                                    <span class="label label-default">N/A</span>                                    {{/if}}                                    {{/if}}                                </div>                            </div>                        </div>                        {{#if data.statusInfo.complete}}                        <div class="form-group">                            <label class="control-label col-md-2"><b>Completed at</b></label>                            <div class="col-md-9">                                <div class="form-control-static"><abbr class="timeago" title="{{formatISODate data.statusInfo.completedDate}}">{{formatDate data.statusInfo.completedDate}}</abbr></div>                            </div>                        </div>                        {{/if}}                    </div>                </div>                                {{#if data.statusInfo.complete}}                {{else}}                <div class="panel-footer">                    <div class="progress" style="margin-bottom: 0;">                        <div class="progress-bar progress-bar-warning progress-bar-striped active" style="width: 100%;"></div>                    </div>                </div>                {{/if}}            </div>            {{/if}}        </script>]]#        <div class="panel panel-default">            <div class="panel-heading"><i class="fa fa-upload"></i> Restore records</div>            <div class="panel-body">                <button class="btn btn-mg btn-success" id="btn-restore" type="button" data-toggle="modal" data-target="#modal-upload-file">                    Restore backup                </button>            </div>            <table id="restore-records-table" class="table table-hover table-striped">                <thead>                    <tr>                        <th>Name</th>                        <th>Completed</th>                        <th>Started By</th>                        <th>Download</th>                    </tr>                </thead>                <tbody>                    #if($page.restoreRecords.size() > 0)                    #foreach($b in $page.restoreRecords)                    <tr>                        <td>$b.fileName</td>                        <td>$formatter.formatDateTime($b.completedDate)</td>                        <td>$b.createdBy.formattedName</td>                        <td>                            #if($b.fileHash)                            <a class="btn btn-sm btn-success" href="/_hashes/files/$b.fileHash" download="$b.fileName"><i class="fa fa-download"></i> Download</a>                            #end                        </td>                    </tr>                    #end                    #else                    <tr>                        <td colspan="4" class="text-center">No Restores</td>                    </tr>                    #end                </tbody>            </table>        </div>    </div></div><div id="modal-upload-file" class="modal fade" aria-hidden="true" tabindex="-1">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button aria-hidden="true" data-dismiss="modal" class="close" type="button">&times;</button>                <h4 class="modal-title">Upload File</h4>            </div>            <form action="." method="POST" class="form-horizontal" enctype="multipart/form-data">                <div class="modal-body">                    <div class="form-message alert alert-danger" style="display: none;"></div>                    <div class="form-group">                        <input type="hidden" id="restoreFile" name="restoreFile" value="" />                        <label class="col-md-3 control-label">File</label>                        <div class="col-md-8">                            <div class="input-group">                                <span class="input-group-btn">                                    <span class="btn btn-primary btn-file">                                        Browse&hellip; <input name="backup" type="file" />                                    </span>                                </span>                                <input type="text" class="form-control file-input" readonly>                            </div>                        </div>                    </div>                    <div class="form-group">                        <label class="col-md-3 control-label" for="adminUrl">Admin Domain URL</label>                        <div class="col-md-8">                            <input class="form-control required href" id="adminUrl" type="text" name="adminUrl" />                        </div>                    </div>                    <div class="form-group">                        <label class="col-md-3 control-label" for="username">Username</label>                        <div class="col-md-8">                            <input class="form-control required" id="username" type="text" name="username" />                        </div>                    </div>                    <div class="form-group">                        <label class="col-md-3 control-label" for="password">Password</label>                        <div class="col-md-8">                            <input class="form-control required" id="password" type="password" name="password" />                        </div>                    </div>                    <div class="form-group">                        <div class="col-md-offset-1 col-md-10">                            <div class="progress" style="display: none;">                                <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">                                </div>                            </div>                        </div>                    </div>                </div>                <div class="modal-footer">                    <button class="btn btn-sm btn-default" data-dismiss="modal" type="button">Close</button>                    <button class="btn btn-sm btn-primary" type="submit">Upload</button>                </div>            </form>        </div>    </div></div><script src="/static/jquery-tree/jquery.tree.min.js" type="text/javascript">//</script><script src="/theme/apps/admin/backup.js?v101" type="text/javascript">//</script></body></html>