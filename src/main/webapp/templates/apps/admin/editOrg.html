<html>    <head>        <title>Edit organisation details</title>        <script type="text/javascript" src="/static/chosen/1.1.0/chosen.jquery.js">//</script>        <link rel="stylesheet" href="/static/chosen/1.1.0/chosen.css"/>    </head>    <body class="viewOrg">        <div class="row">            <div class="col-md-8">                <form method="post" action="$request.absolutePath" class="form-horizontal org-details">                    <div id="form-body">                        <div class="form-group">                            <label for="orgTitle" class="control-label col-md-3">Org ID</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.orgId" class="form-control required" name="orgId" id="orgId" placeholder="Your unique ID for the organisation" />                            </div>                        </div>                        <div class="form-group">                            <label for="orgTitle" class="control-label col-md-3">Name</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.title" class="form-control required" name="title" id="orgTitle" placeholder="User friendly name for the organisation" />                            </div>                        </div>                        <div class="form-group">                            <label for="orgTypeName" class="control-label col-md-3">Type</label>                            <div class="col-md-5">                                <select name="orgTypeName" class="form-control" id="orgTypeName">                                    <option value="">[None]</option>                                    #foreach($orgType in $page.orgTypes)                                    $formatter.option($orgType.name, $orgType.displayName, $page.orgType.name)                                    #end                                </select>                            </div>                        </div>                        <div class="form-group">                            <label for="orgPhone" class="control-label col-md-3">Contact email</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.email" class="form-control" name="email" id="orgEmail" />                            </div>                        </div>                        <div class="form-group">                            <label for="orgPhone" class="control-label col-md-3">Phone</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.phone" class="form-control" name="phone" id="orgPhone" />                            </div>                        </div>                        <div class="form-group">                            <label for="orgAddress" class="control-label col-md-3">Address</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.address" class="form-control" name="address" id="orgAddress" />                            </div>                        </div>                        <div class="form-group">                            <label for="orgAddress2" class="control-label col-md-3">Address Line2</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.addressLine2" class="form-control" name="addressLine2" id="orgAddress2" />                            </div>                        </div>                        <div class="form-group">                            <label for="orgState" class="control-label col-md-3">State</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.addressState" class="form-control" name="addressState" id="orgState" />                            </div>                        </div>                        <div class="form-group">                            <label for="orgPostcode" class="control-label col-md-3">Postcode</label>                            <div class="col-md-8">                                <input type="text" value="$!page.organisation.postcode" class="form-control" name="postcode" id="orgPostcode" />                            </div>                        </div>                        <div class="form-group">                            <label for="country" class="control-label col-md-3">Country</label>                            <div class="col-md-8">                                <select name="country" class="form-control chosen-select">                                    <option value="">[No country selected]</option>                                    #foreach($cc in $formatter.countryCodes.list)                                    $formatter.option( $cc.alpha2Code, $cc.englishShortName, $page.organisation.country )                                    #end                                </select>                            </div>                        </div>                        <div class="form-group">                            <label class="control-label col-md-3" for="location">Timezone</label>                            <div class="col-md-8">                                <select name="timezone" class="form-control chosen-select">                                    <option value="">[No timezone selected]</option>                                    #foreach($tzId in $page.timezoneIdList)                                    $formatter.option( $tzId, $tzId, $page.organisation.timezone )                                    #end                                </select>                                <small>This will be used as the default for any calendar events you create</small>                            </div>                        </div>                        #set($fields = $page.extraFields)                        #foreach($field in $fields.keySet())                        <div class="control-group form-group">                            <label class="control-label col-md-3 control-label" for="field_${field.name}">$field.text</label>                            <div class="controls col-md-8">                                $field.html( $fields[$field] )                            </div>                        </div>                        #end                    </div>                    <div class="form-group">                        <div class="col-md-11">                            <button type="submit" class="btn btn-sm btn-primary pull-right">Save</button>                        </div>                    </div>                </form>            </div>            <div class="col-md-3">                <h3>Administration domain</h3>                <p>Set an administration domain value here if you want this organisation to have                its own administration dashboard, so it can have its own administrators</p>                <p>The value you enter must be unique across all of Kademi, and will be used to form                    an admin dashboard address like <b>mydomain</b>.kademi.olhub.com</p>                <div class="form-group">                    <label class="control-label col-md-4" for="orgTitle">Admin Domain</label>                    <div class="col-md-8">                        <input id="adminDomain" value="$!page.organisation.adminDomain" class="form-control regex" type="text" placeholder="Unique in all of Kademi. Used to identify the admin console" data-message="Admin Domain needs to be simple characters only. All lower case, no spaces and no special chatacters." name="adminDomain" data-regex="^(?:(?!-)[a-z0-9-]{1,63}(?!-)|)$">                    </div>                </div>            </div>        </div>        <script type="text/javascript">            $(function () {                var oldId = $("#orgId").val();                $(".org-details").forms({                    callback: function (resp) {                        flog("saved", resp);                        Msg.info("Saved OK");                        var newId = $("#orgId").val();                        if (oldId !== newId) {                            window.location = "../" + newId + "/edit";                        } else {                            $("#form-body").reloadFragment({                                whenComplete: function () {                                    $(".chosen-select").chosen({                                        search_contains: true                                    });                                }                            });                        }                    }                });                $(".chosen-select").chosen({                    search_contains: true                });            });        </script>    </body></html>