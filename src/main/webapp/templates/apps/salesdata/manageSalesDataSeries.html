<html xmlns="http://www.w3.org/1999/xhtml">    <head>        <title>Manage Sales Data Series</title>        <style>            .upload {                position: relative;            }            #do-upload-csv, #do-upload-training-results-csv {                width: 190px;                cursor: pointer;            }            .upload-results {                display: none;            }            .DateTimeIcon {                display: none;            }        </style>        <script src="/static/d3/d3.v3.js" type="text/javascript">//</script>        <link href="/static/nvd3/nv.d3.css" rel="stylesheet" type="text/css" />        <script src="/static/nvd3/nv.d3.js" type="text/javascript">//</script>        <link rel="stylesheet" href="/static/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css" />        <script src="/static/bootstrap-timepicker/0.5.2/js/bootstrap-timepicker.min.js">//</script>        <script type="text/javascript" src="/theme/apps/admin/manageExtraField.js">//</script>        <script type="text/javascript" src="manageSalesData.js">//</script>    </head>    <body class="">        <form name="frmDetails" action="." method="post" class="form-horizontal series-form">            <div class="pull-right page-action">                <div class="btn-group">                    <button type="submit" role="button" class="btn btn-info btn-sm">Save configuration</button>                    <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">                        <span class="caret"></span>                    </button>                    <ul class="dropdown-menu pull-right" role="menu">                        <li class="presentation" role="menuitem"><a href="#" class="btn-upload-csv">Upload data series CSV</a></li>                        <li class="presentation" role="menuitem"><a role="button" href="records.csv">Open data series CSV</a></li>                        <li class="presentation" role="menuitem"><a role="button" href="#" data-toggle="modal" data-target="#createTestDataModal">Create random test data</a></li>                    </ul>                </div>            </div>            <div class="tabbable">                <ul class="nav nav-tabs tab-bricky">                    <li><a data-toggle="tab" href="#general">General</a></li>                    #if( !$page.is("new") )                        <li><a data-toggle="tab" href="#kpis">KPI's</a></li>                        <li><a data-toggle="tab" href="#points">Points</a></li>                        <li><a data-toggle="tab" href="#history">Records</a></li>                    #end                </ul>                <div class="tab-content">                    #if( !$page.is("new") )                    <div id="general" class="tab-pane">                        <div>                            <div class="panel panel-primary pull-right statCard">                                <div class="panel-heading">                                    <div class="row">                                        <div class="col-xs-3">                                            <i class="fa fa-database fa-4x"></i>                                        </div>                                        <div class="col-xs-9 text-right">                                            <div class="huge">$page.numItems</div>                                            <div>                                                data series records                                            </div>                                        </div>                                    </div>                                </div>                                <div class="panel-footer">                                    <a href="#config" class="pull-right">                                        <span>Configure</span>                                        <span><i class="fa fa-cog"></i></span>                                    </a>                                    <a href="#history">                                        <span>Records</span>                                        <span><i class="fa fa-arrow-circle-right"></i></span>                                    </a>                                    <div class="clearfix"></div>                                </div>                            </div>                            <p class="lead">                                <b>$page.series.title</b> records are associated with the <b>$page.attributionText</b>                                #if( $page.series.salesGroup )                                    and collected from <b>$page.series.salesGroup.name</b>                                #end                                .                                Values are measured in <b>$page.series.units</b>                            </p>                            <div class="clearfix"></div>                        </div>                        <hr />                        <div class="form-group" style="min-height: 300px">                            <div class="col-sm-12">                                <div id="seriesHistogram" style="height: 300px" data-href="$page.href">                                    <svg></svg>                                </div>                            </div>                        </div>                        <hr />                    #end                    <h3 id="config">Configuration</h3>                    <div class="form-group">                        <label class="control-label col-md-3" for="name">                            Code                            <small>Used in imports and exports</small>                        </label>                        <div class="col-md-8">                            <input type="text" name="name" id="name" value="$!page.series.name" placeholder="" class="required form-control simpleChars" required="true" />                        </div>                    </div>                    <div class="form-group">                        <label class="control-label col-md-3" for="title">Title</label>                        <div class="col-md-8">                            <input type="text" name="title" id="title" value="$!page.series.title" placeholder="" class="required form-control" required="true" />                        </div>                    </div>                    <div class="form-group">                        <label class="control-label col-md-3" for="units">                            Units                            <small>What is the units of the quantity being entered. Eg $ or %</small>                        </label>                        <div class="col-md-4">                            <input type="text" name="units" id="units" value="$!page.series.units" placeholder="" class="required form-control" required="true" />                        </div>                    </div>                    <div class="form-group">                        <label class="control-label col-md-3" for="salesType">                            Attribution                            <small>Should sales be attributed to the individual or their team</small>                        </label>                        <div class="col-md-4">                            <select name="salesType" id="salesType" class="form-control required" required="true">                                <option value="">[None]</option>                                $formatter.option("SALES_PROFILE", "Individual", $page.series.salesType)                                $formatter.option("SALES_ORG", "Team / Organisation", $page.series.salesType)                            </select>                        </div>                    </div>                    <div class="form-group">                        <label class="control-label col-md-3" for="website">                            Website                            <small>Select a website to be used for any emails generated from or for this series</small>                        </label>                        <div class="col-md-4">                            <select name="website" id="website" class="form-control">                                <option value="">[None]</option>                                #foreach($website in $page.find("/websites").children.ofType.website)                                    $formatter.option($website.name, $website.title, $page.series.website.name)                                #end                            </select>                        </div>                    </div>                    <div class="form-group">                        <label class="control-label col-md-3" for="enabled">                            Enabled                            <small>Will only be available if enabled</small>                        </label>                        <div class="col-md-8">                            $formatter.checkbox("enabled", "enabled", $page.series.enabled)<br />                        </div>                    </div>                    <div class="form-group">                        <label class="control-label col-md-3" for="salesGroup">                            Group                            <small>The user group to enter sales</small>                        </label>                        <div class="col-md-8">                            <select name="salesGroup" id="salesGroup" class="form-control">                                <option value="">[None]</option>                                #foreach($group in $page.allGroups)                                    $formatter.option($group.name, $group.name, $page.salesGroupName)                                #end                            </select>                        </div>                    </div>                    <hr />                    <div class="form-group">                        <div class="col-md-8 col-md-offset-3">                            <i>Select how often you would like users to enter the sales data, or whether to allow information to be collected at any time.</i>                        </div>                    </div>                    <div class="form-group">                        <label class="col-md-3 control-label" for="frequency">Frequency</label>                        <div class="col-md-8">                            <select name="frequency" class="form-control">                                $formatter.option("", "Anytime", $page.series.frequency)                                    #foreach($f in $page.allFrequencies)                                $formatter.option($f, $f, $page.series.frequency)                            #end                            </select>                        </div>                    </div>                    <div class="form-group">                        <label class="col-md-3 control-label" for="periodMultiples">Multiples</label>                        <div class="col-md-8">                            <input type="text" name="periodMultiples" value="$!page.series.periodMultiples" placeholder="Eg run every 3 days" class="form-control" />                        </div>                    </div>                    <div class="form-group">                        <label class="control-label col-md-3" for="notes">Notes                            <small>Shown to users, should explain what is required.</small>                        </label>                        <div class="col-md-8">                            <textarea cols="100" name="notes" id="notes" rows="10" placeholder="" class="form-control">$!page.series.notes</textarea>                        </div>                    </div>                    #if( !$page.is("new") )                        <div class="panel panel-default panel-fields">                            <div class="panel-heading">                                <i class="clip-question"></i> What extra fields do you to collect for each record?                            </div>                            <div class="panel-body">                                <p>                                    <button type="button" class="btn btn-sm btn-success btn-add-extra-field"><i class="fa fa-plus"></i> Add field</button>                                </p>                                <table id="table-extra-field" class="table table-hover table-stripled" data-group-href="$page.href">                                    <colgroup>                                        <col />                                        <col />                                        <col />                                        <col />                                        <col style="width: 150px" />                                    </colgroup>                                    <thead>                                        <tr>                                            <th>Name</th>                                            <th>Text</th>                                            <th>Required</th>                                            <th>Options</th>                                            <th class="action">Action</th>                                        </tr>                                    </thead>                                    <tbody>                                        #foreach($field in $page.dataCaptureFields.entrySet())                                            <tr class="extra-field">                                                <td>                                                    <input type="hidden" value="$field.key" name="key" />                                                    <input type="hidden" value="$field.value" name="value" />                                                </td>                                                <td></td>                                                <td></td>                                                <td></td>                                                <td></td>                                            </tr>                                        #end                                    </tbody>                                </table>                            </div>                        </div>                    #end                </div>                    <!-- Start KPIs -->                    #if( !$page.is("new") )                        <div id="kpis" class="tab-pane">                            <div class='alert alert-info'>                                <p>Use KPI's (Key Performance Indicators) to create achievement levels for this data series. For example, for sales people you might have                                    levels corresponding to sales targets. You can choose to allocate reward points for achieving levels.</p>                            </div>                            <button data-toggle="modal" data-target="#addKpiModal" class="btn btn-success btn-sm btn-add-kpi"><i class="fa fa-plus"></i> Add new KPI</button>                            <hr />                            <table class='table table-bordered table-striped'>                                <colgroup>                                    <col />                                    <col />                                    <col />                                    <col />                                    <col />                                    <col />                                    <col style="width: 120px" />                                </colgroup>                                <thead>                                    <tr>                                        <th>Title</th>                                        <th>Groups</th>                                        <th>Start Date</th>                                        <th>Aggregation</th>                                        <th>Aggregation Period</th>                                        <th>Reward</th>                                        <th>Action</th>                                    </tr>                                </thead>                                <tbody id='kpis-table-body'>                                    #set( $kpis = $page.child("kpis").children.ofType.kpi )                                    #if( $kpis.isEmpty() )                                        <tr>                                            <td colspan="7">No KPI's have been defined for this data series</td>                                        </tr>                                    #else                                        #foreach($kpi in $kpis)                                            <tr>                                                <td><a href="$kpi.href">$kpi.kpi.title</a></td>                                                <td>                                                    #foreach( $g in $kpi.kpi.appliesToGroups)                                        #genGroup($g)                                        #end                                                </td>                                                #if($kpi.kpi.startDate)                                                    <td>$formatter.formatDate($kpi.kpi.startDate)</td>                                                #else                                                    <td>No Date Set</td>                                                #end                                                #if($kpi.aggregationName)                                                    <td>$kpi.aggregationName</td>                                                #else                                                    <td>No Aggregation</td>                                                #end                                                <td>$kpi.period</td>                                                #if($kpi.kpi.reward.name)                                                    <td><a href="/points-buckets/$kpi.kpi.reward.name">$kpi.kpi.reward.title</a></td>                                                #else                                                    <td>No Reward Set</td>                                                #end                                                <td>                                                    <div class="btn-group">                                                        <a href="$kpi.href" class="btn btn-sm btn-info btn-sm">                                                            <i class="fa fa-edit"></i> Edit                                                        </a>                                                        <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">                                                            <span class="caret"></span>                                                        </button>                                                        <ul class="dropdown-menu pull-right" role="menu">                                                            <li><a href="$kpi.kpi.id" class="btn-dup-kpi"><i class="fa fa-copy"></i> Duplicate</a></li>                                                            <li role="presentation" class="divider"></li>                                                            <li><a href="$kpi.href" class="btn-del-kpi"><i class="glyphicon glyphicon-remove"></i> Delete</a></li>                                                        </ul>                                                    </div>                                                </td>                                            </tr>                                        #end                                    #end                                </tbody>                            </table>                        </div>                    #end                    <!-- End KPIs -->                    <!-- Start Points Allocation Sources -->                    #if( !$page.is("new") )                        <div id="points" class="tab-pane">                            <div class='alert alert-info'>                                <p>Use point allocation sources to award reward points based on the values of the data series. For example you can                                    choose to award 1 point for each dollar in sales.</p>                            </div>                            <button data-toggle="modal" data-target="#addSourceModal" class="btn btn-success btn-sm btn-add-kpi">                                <i class="fa fa-plus"></i> Add new points allocation                            </button>                            <hr />                            <table class='table table-bordered table-striped'>                                <colgroup>                                    <col />                                    <col />                                    <col />                                    <col />                                    <col style="width: 120px" />                                </colgroup>                                <thead>                                    <tr>                                        <th>Title</th>                                        <th>Total records</th>                                        <th>Processed</th>                                        <th>Reward</th>                                        <th>Actions</th>                                    </tr>                                </thead>                                <tbody id='sources-table-body'>                                    #set( $sources = $page.child("sources").children.ofType.source )                                    #if( $sources.isEmpty() )                                        <tr>                                            <td colspan="5">No points sources have been defined for this data series</td>                                        </tr>                                    #else                                        #foreach($source in $sources)                                            <tr>                                                <td><a href="$source.href">$source.title</a></td>                                                <td>$source.totalRecords</td>                                                <td>$source.numProcessed</td>                                                #if($source.source.reward.name)                                                    <td><a href="/rewards/$source.source.reward.name">$source.source.reward.title</a></td>                                                #else                                                    <td>No Reward Set</td>                                                #end                                                <td>                                                    <div class="btn-group">                                                        <a href="$source.href" class="btn btn-sm btn-info btn-sm">                                                            <i class="fa fa-edit"></i> Edit                                                        </a>                                                        <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">                                                            <span class="caret"></span>                                                        </button>                                                        <ul class="dropdown-menu pull-right" role="menu">                                                            <li><a href="$source.href" class="btn-del-points"><i class="glyphicon glyphicon-remove"></i>Delete</a></li>                                                        </ul>                                                    </div>                                                </td>                                            </tr>                                        #end                                    #end                                </tbody>                            </table>                        </div>                    #end                    <!-- End Points Allocation Sources -->                    <!-- Start content of History tab -->                    <div id="history" class="tab-pane">                        <div class="btn-group pull-right">                            <button type="button" data-toggle="modal" data-target="#addRecordModal" class="create-record btn btn-success btn-sm">                                <span class="fa fa-plus"></span>                                Create record                            </button>                            <button type="button" class="refresh-history btn btn-default btn-sm">                                <span class="fa fa-refresh"></span>                                Refresh                            </button>                            <button class="btn-remove-history btn btn-danger btn-sm" type="button"><i class="fa fa-remove"></i> Remove</button>                            <button type="button" class="btn btn-danger btn-sm dropdown-toggle" data-toggle="dropdown">                                <span class="caret"></span>                            </button>                            <ul class="dropdown-menu pull-right" role="menu">                                <li class="presentation" role="menuitem"><a href="#" class="btn-clear-history"><i class="fa fa-trash"></i> Clear History</a></li>                            </ul>                        </div>                        <div class="input-group col-md-4">                            <label for="data-query" class="input-group-addon">Search</label>                            <input type="text" id="data-query" placeholder="Search" value="" class="form-control" />                        </div>                        <div class="clearfix"></div>                        <hr />                        <p class="lead-text">This shows records which have been entered during the filter period</p>                        <div class="table-responsive" id="history-table">                            <table class="table table-striped table-hover">                                <thead>                                    <tr>                                        <th>Amount</th>                                        <th>Sales by</th>                                        <th>Date</th>                                        <th>Tags</th>                                        <th>SKU</th>                                        #foreach($field in $page.extraFieldNames)                                            <th>$field</th>                                        #end                                        <th>Entered</th>                                        <th><input type="checkbox" name="toRemoveId" class="chk-all" value="" /></th>                                        <th></th>                                    </tr>                                </thead>                                <tbody id="history-table-body">                                    #foreach($item in $page.history)                                        <tr>                                            <td>                                                #if( $item.amount )                                                    $item.amount                                                #else                                                    No value                                                #end                                            </td>                                            <td>                                                <!-- either a profilebean or orgdata -->                                                #if( $item.salesBy.name ) <!-- is individual -->                                                    <a href="/manageUsers/$item.salesBy.userId">$item.salesBy.name ($item.salesBy.userName)</a>                                                #else                                                    <a href="/manageOrgs/$item.salesBy.orgId">$item.salesBy.title</a>                                                #end                                            </td>                                            <td title="$formatter.formatDateISO8601($item.periodFrom)">$formatter.formatDateTime($item.periodFrom, $page.organisation.timezone)</td>                                            <td>$item.tags</td>                                            <td>$!item.productSku</td>                                            #foreach($field in $page.extraFieldNames)                                                <td>$!item.extraFields.get( $field )</td>                                            #end                                            <td>                                                <abbr title="$formatter.formatDateISO8601($item.enteredDate)" class="timeago">$!item.enteredDate</abbr> by                                                <a href="/manageUsers/$item.enteredBy.userId">$item.enteredBy.name</a>                                            </td>                                            <td><input type="checkbox" name="toRemoveId" value="$item.id" /></td>                                            <td>                                                <a class="btn btn-primary" href="$item.id">                                                    <i class="fa fa-pencil"></i>                                                </a>                                            </td>                                        </tr>                                    #end                                </tbody>                            </table>                        </div>                    </div>                    <!-- End content of History tab -->                </div>            </div>        </form>        <div id="addKpiModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title">Add KPI</h4>                    </div>                    <form action="." method="POST" class="form-horizontal">                    <div class="modal-body">                        <p>KPI's allow you to categorise performance in levels, and then take action based on what levels are achieved.</p>                        <p>For example,                            you might have a data series "Customer Service Index" which you would add a KPI for, and reward users who achieve 95-100%</p>                        <p>You can have multiple KPI's for a data series, but you will usually only have one.</p>                        <div class='alert alert-info'>Enter a descriptive title for the KPI below. You can then add levels and actions for each level.</div>                        <div class="form-message alert alert-danger" style="display: none;"></div>                            <div class="form-group">                                <label class="col-md-3 control-label" for="websiteName">Title</label>                                <div class="col-md-8">                                    <input type='text' name="newKpiTitle" class="form-control" />                                </div>                            </div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Close</button>                        <button class="btn btn-sm btn-primary" type="submit">Create KPI</button>                    </div>                    </form>                </div>            </div>        </div>        <div id="addSourceModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title">Add Points Allocation Source</h4>                    </div>                    <form action="." method="POST" class="form-horizontal">                        <div class="modal-body">                            <div class="form-message alert alert-danger" style="display: none;"></div>                            <div class="form-group">                                <label class="col-md-3 control-label" for="websiteName">Title</label>                                <div class="col-md-8">                                    <input type='text' name="newSourceTitle" class="form-control" />                                </div>                            </div>                            <div class="form-group">                                <label class="col-md-3 control-label" for="websiteName">Reward program</label>                                <div class="col-md-8">                                    <select name="reward" id="reward" class="form-control">                                        <option value="">[No points]</option>                                        #foreach($reward in $page.rewards)                                            $formatter.option($reward.name, $reward.name, $page.kpi.reward.name)                                        #end                                    </select>                                </div>                            </div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Close</button>                        <button class="btn btn-sm btn-primary" type="submit">Create allocation source</button>                    </div>                    </form>                </div>            </div>        </div>        <div id="modal-upload-csv" class="modal fade" aria-hidden="true" tabindex="-1">            <div class="modal-dialog modal-lg">                <div class="modal-content">                    <div class="modal-header">                        <button aria-hidden="true" data-dismiss="modal" class="close" type="button">&times;</button>                        <h4 class="modal-title">Upload Users CSV</h4>                    </div>                    <div class="modal-body">                        <div class="upload">                            <div class="btn-upload" id='do-upload-csv'></div>                            <br />                            <!--                            <div class="allow-inserts">                                <input type="checkbox" id="allow-inserts" /> <label for="allow-inserts">Allow inserts</label>                            </div>                            -->                        </div>                        <br />                        <div class="upload-results">                            <p>                                <strong>No. inserted:</strong>                                <span class="badge badge-success num-inserted">-</span>                                <strong>No. updated:</strong>                                <span class="badge badge-success num-updated">-</span>                                <strong>Unmatched rows:</strong>                                <span class="badge badge-danger num-unmatched">-</span>                            </p>                            <div class="table-responsive">                                <table class="table table-striped table-hover table-condensed">                                    <tbody>                                        <tr>                                            <td></td>                                        </tr>                                    </tbody>                                </table>                            </div>                        </div>                    </div>                    <div class="modal-footer">                        <button class="btn btn-sm btn-default" data-dismiss="modal" type="button">Close</button>                    </div>                </div>            </div>        </div>        <div id="modal-extra-field" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title">Add extra field</h4>                    </div>                    <form class="form-horizontal" action="$page.href" method="POST">                        <div class="modal-body">                            <div class="form-message alert alert-danger" style="display: none;"></div>                            <input id="extra-field-value" type="hidden" name="addFieldValue" />                            <div class="form-group">                                <label for="extra-field-name" class="control-label col-md-4">Name:</label>                                <div class="col-md-8">                                    <input id="extra-field-name" type="text" class="form-control required" name="addFieldName" placeholder="Field text" value="" />                                </div>                            </div>                            <div class="form-group">                                <label for="extra-field-required" class="control-label col-md-4">Required:</label>                                <div class="col-md-8">                                    <input id="extra-field-required" type="checkbox" />                                </div>                            </div>                            <div class="form-group">                                <label for="extra-field-text" class="control-label col-md-4">Text:</label>                                <div class="col-md-8">                                    <input id="extra-field-text" class="form-control required" placeholder="Field text" value="" />                                </div>                            </div>                            <div class="form-group">                                <label class="control-label col-md-4">Option:</label>                                <div class="col-md-8">                                    <button type="button" class="btn btn-sm btn-add-option btn-info">Add option</button>                                </div>                            </div>                            <div id="options-wrapper"></div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Close</button>                        <button class="btn btn-primary btn-sm btn-save-menu" type="submit">Save</button>                    </div>                    </form>                </div>            </div>        </div>        <div id="addRecordModal" class="modal fade level-modal" tabindex="-1" role="dialog" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title">Data series record</h4>                    </div>                    <form class="form-horizontal" action="$page.href" method="POST">                        <div class="modal-body">                            <div class="form-message alert alert-danger" style="display: none;"></div>                            <input type="hidden" name="createRecord" />                            <div class="form-group">                                <label for="amount" class="control-label col-md-4">Amount</label>                                <div class="col-md-8">                                    <input type="text" class="form-control required" name="amount" placeholder="Amount for this record" />                                </div>                            </div>                            <div class="form-group">                                <label class="control-label col-md-4">Date</label>                                <div class="col-md-8">                                    <div class="input-group">                                        <input type="text" name="periodFrom" placeholder="Period from" data-format="DD/MM/YYYY HH:mm" class="form-control DateTime" />                                        <span class="input-group-addon"> <i class="fa fa-calendar"></i> </span>                                    </div>                                </div>                            </div>                            <div class="form-group">                                <label for="extra-field-text" class="control-label col-md-4">Attributed to</label>                                <div class="col-md-8">                                    <input name="attributedTo" class="form-control required" placeholder="email address or Org Id" value="" />                                </div>                            </div>                            <div class="form-group">                                <label for="extra-field-text" class="control-label col-md-4">Tags</label>                                <div class="col-md-8">                                    <input name="tags" class="form-control" placeholder="Summer promotion,New business" value="" />                                </div>                            </div>                            <div class="form-group">                                <label for="extra-field-text" class="control-label col-md-4">Product SKU</label>                                <div class="col-md-8">                                    <input name="productSku" class="form-control" placeholder="ABC-123" value="" />                                </div>                            </div>                            #foreach($fieldName in $page.extraFieldNames)                                #set($field = $page.getExtraField($fieldName) )                                <div class="form-group">                                    <label class="control-label col-md-4">$field.text</label>                                    <div class="col-md-8">                                        <input name="extra_$field.name" class="form-control required" value="" />                                    </div>                                </div>                            #end                            <div id="options-wrapper"></div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Close</button>                        <button class="btn btn-sm btn-success" type="submit">Save record</button>                    </div>                    </form>                </div>            </div>        </div>        <div id="createTestDataModal" class="modal fade level-modal" tabindex="-1" role="dialog" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title">Create random test data</h4>                    </div>                    <form class="form-horizontal" action="$page.href" method="POST">                    <div class="modal-body">                        <p>This will create the specified number of records with random values, averaging the amount given, and randomly allocated                            to users from the data series group, or to organisations with the type specified, and over the date range given</p>                            <input type="hidden" name="createRandomTestData" />                            #if( $page.is("team") )                                <p>Organisations of the selected type will be created if necessary</p>                            #else                                <p>Profiles will be created and added to organisations of the given type if necessary</p>                            #end                        <div class="form-message alert alert-danger" style="display: none;"></div>                            <div class="form-group">                                <label for="amount" class="control-label col-md-4">Org type</label>                                <div class="col-md-8">                                    <select class="form-control" name="orgType">                                        <option value="">[No type]</option>                                        #foreach($orgType in $page.organisation.orgTypes)                                            $formatter.option($orgType.id, $orgType.displayName, "")                                        #end                                    </select>                                </div>                            </div>                            <div class="form-group">                                <label for="amount" class="control-label col-md-4">Average Amount</label>                                <div class="col-md-8">                                    <input type="text" class="form-control required" name="amount" placeholder="Amount for this record" />                                </div>                            </div>                            <div class="form-group">                                <label for="numRecords" class="control-label col-md-4">No. records</label>                                <div class="col-md-8">                                    <input type="text" class="form-control required" name="numRecords" placeholder="The number of records to create" />                                </div>                            </div>                            <div class="form-group">                                <label class="control-label col-md-4">Period from</label>                                <div class="col-md-8">                                    <div class="input-group">                                        <input type="text" name="periodFrom" placeholder="Period from" data-format="DD/MM/YYYY" class="form-control DateTime" />                                        <span class="input-group-addon"> <i class="fa fa-calendar"></i> </span>                                    </div>                                </div>                            </div>                            <div class="form-group">                                <label class="control-label col-md-4">Period to</label>                                <div class="col-md-8">                                    <div class="input-group">                                        <input type="text" name="periodTo" placeholder="Period to" data-format="DD/MM/YYYY" class="form-control DateTime" />                                        <span class="input-group-addon"> <i class="fa fa-calendar"></i> </span>                                    </div>                                </div>                            </div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Close</button>                        <button class="btn btn-sm btn-success" type="submit">Create test data</button>                    </div>                    </form>                </div>            </div>        </div>        #macro(genGroup $group)            #set($gc = "label label-info")            #set($gIcon = "")            #if( $group.groupType == "P" || !$group.groupType)                #set($gc = "label label-success")                #set($gIcon = "clip-users")            #elseif( $group.groupType == "S" )                #set($gc = "label label-info")                #set($gIcon = "fa fa-trophy")            #elseif( $group.groupType == "M" )                #set($gc = "label label-info")                #set($gIcon = "fa fa-envelope")            #end            <div class="$gc" style="margin-right: 2.5px; margin-bottom: 5px; display: inline-block;">                <i class="$gIcon"></i>                <span class="block-name" title="$group.name">$group.name</span>            </div>        #end        <script type="text/javascript" src="/static/js/jquery.milton-upload.js"></script>        <script type="text/javascript">            $(function () {                initManageSalesData();            });        </script>    </body></html>